{"version":3,"file":"Benchmark/index.js","mappings":"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","sources":["webpack://sbrython/./src/rbry/corelib/str.py?c666","webpack://sbrython/./src/pages/Benchmark/index.html","webpack://sbrython/./src/rbry/corelib/int.py?263f","webpack://sbrython/./src/rbry/runlib/tmp_corelib/type.ts","webpack://sbrython/./src/rbry/runlib/helpers/getClass.ts","webpack://sbrython/./src/rbry/runlib/interface/attr.ts","webpack://sbrython/./src/rbry/runlib/tmp_corelib/singledispatchmethod.ts","webpack://sbrython/./src/rbry/runlib/interface/uop.ts","webpack://sbrython/./src/rbry/runlib/interface/lit.ts","webpack://sbrython/./src/rbry/runlib/interface/call.ts","webpack://sbrython/./src/rbry/runlib/helpers/isClass.ts","webpack://sbrython/./src/rbry/runlib/interface/op.ts","webpack://sbrython/./src/rbry/runlib/interface/assert.ts","webpack://sbrython/./src/pages/Editor/index.ts","webpack://sbrython/./src/pages/Editor/utils/BenchRunner.ts","webpack://sbrython/./src/rbry/parser/index.ts","webpack://sbrython/./src/rbry/runners/interface.ts","webpack://sbrython/./src/rbry/runners/Brython/index.ts","webpack://sbrython/./src/rbry/emitter/handlers/index.ts","webpack://sbrython/./src/rbry/ast/index.ts","webpack://sbrython/./src/rbry/emitter/node2js.ts","webpack://sbrython/./src/rbry/emitter/handlers/Body.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/ClassDef.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/BinOp.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Compare.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/UnaryOp.ts","webpack://sbrython/./src/rbry/emitter/handlers/list.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/FunctionDef.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Assert.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Pass.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Return.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Assign.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Attribute.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/AugAssign.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Call.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Constant.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Expr.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Name.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/JoinedStr.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/If.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/While.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/For.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/Try.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Continue.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Break.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Raise.ts","webpack://sbrython/./src/rbry/emitter/handlers/imports/ImportFrom.ts","webpack://sbrython/./src/rbry/runners/RBrython/index.ts","webpack://sbrython/./src/rbry/emitter/index.ts","webpack://sbrython/./src/rbry/runners/index.ts","webpack://sbrython/./src/pages/Editor/utils/runner.ts","webpack://sbrython/./src/rbry/runlib/index.ts","webpack://sbrython/./src/rbry/runlib/tmp_corelib/NotImplemented.ts","webpack://sbrython/./src/rbry/corelib/float.py?73a7","webpack://sbrython/./src/pages/Editor/utils/printBenchStats.ts","webpack://sbrython/./src/rbry/corelib/bool.py?6bfe","webpack://sbrython/./src/rbry/runlib/interface/mcall.ts"],"sourcesContent":["export default \"from functools import singledispatchmethod\\nfrom types     import NotImplementedType\\n\\nclass str:\\n    def __new__(cls, o: object, /) -> str:\\n        return __JS_FROM__(__JS_AS_STRING__(o)) # type: ignore\\n        #return type(o).__str__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_FROM_OPI__(self, \\\"==\\\", o) # type: ignore\";","export default __webpack_public_path__ + \"Benchmark/index.html\";","export default \"from functools import singledispatchmethod\\nfrom types     import NotImplementedType\\n\\nclass int:\\n\\n    def __new__(cls, o: object, base: int, /) -> int:\\n        if type(o) == str:\\n            return __JS_IRUN__( # type: ignore\\n                '''\\n                    (x, base) => {\\n                        if( base !== 16)\\n                            return BigInt(x);\\n                        \\n                        let result = 0n;\\n                        for(let i = 2; i < x.length; ++i)\\n                            result = result << 4n + BigInt( parseInt(this.slice(i, i+8), 16) );\\n                        return result;\\n                    }\\n                ''', o, base) # type: ignore\\n        return type(o).__int__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_FROM_OPI__(self, \\\"==\\\", o) # type: ignore\\n\\n    ### add ###\\n\\n    @singledispatchmethod\\n    def __add__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__add__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"+\\\", b) # type: ignore\\n    \\n    ### add ###\\n\\n    @singledispatchmethod\\n    def __sub__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__sub__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"-\\\", b) # type: ignore\\n    \\n    ### mul ###\\n    @singledispatchmethod\\n    def __mul__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__mul__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"*\\\", b) # type: ignore\\n    \\n    ### pow ###\\n    @singledispatchmethod\\n    def __pow__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__pow__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"**\\\", b) # type: ignore\\n    \\n    ### div ###\\n    @singledispatchmethod\\n    def __div__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__div__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(__JS_AS_NUMBER__(self), # type: ignore\\n                                \\\"/\\\",\\n                              __JS_AS_NUMBER__(b)) # type: ignore\\n    \\n    ### mod ###\\n    @singledispatchmethod\\n    def __mod__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n\\n    @__mod__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"%\\\", b) # type: ignore\\n    \\n    ### or ###\\n    @singledispatchmethod\\n    def __or__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n\\n    @__or__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"|\\\", b) # type: ignore\\n\\n    ### and ###\\n    @singledispatchmethod\\n    def __and__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n\\n    @__and__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"&\\\", b) # type: ignore\\n    \\n    \\n    ### lshift ###\\n    @singledispatchmethod\\n    def __lshift__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n\\n    @__lshift__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\"<<\\\", b) # type: ignore\\n    \\n    ### rshift ###\\n    @singledispatchmethod\\n    def __rshift__(self, _: object, /) -> int|NotImplementedType:\\n        return NotImplemented\\n\\n    @__rshift__.register\\n    def _(self, b: int, /) -> int:\\n        return __JS_FROM_OPI__(self, \\\">>\\\", b) # type: ignore\\n\\n    ### unary operators ###\\n    def __invert__(self, /) -> int:\\n        return __JS_FROM_OPI__(\\\"~\\\", self) # type: ignore\\n\\n    def __neg__(self, /) -> int:\\n        return __JS_FROM_OPI__(\\\"-\\\", self) # type: ignore\\n    \\n    def __abs__(self, /) -> int:\\n         return __JS_IRUN__(\\\"x => x < 0n ? -x : x\\\", self) # type: ignore\";","import lit from \"../interface/lit\";\n\nexport class type {\n    //TODO...\n    __call__(...args: any[]) {\n\n        // @ts-ignore\n        const factory = this.prototype.__new__;\n        const self = factory !== undefined\n                        ? factory.call(this, ...args)\n                        // @ts-ignore\n                        : new this(...args);\n        // @ts-ignore\n        const init = this.prototype.__init__;\n        if( init !== undefined)\n            init.call(self, ...args);\n        \n        return self\n    }\n    __eq__(b: unknown) {\n        return lit(this == b);\n    }\n}","import { type } from \"../tmp_corelib/type\";\n\nexport function getClass(o: unknown) {\n    const typename = typeof o;\n\n    if( typename === \"function\" ) {\n        //TODO: is class ? is something else ?\n        return type;\n    }\n\n    if( typename === \"object\" ) {\n        // @ts-ignore;\n        return o.constructor;\n    }\n\n    throw new Error(\"JS type not implemented yet\");\n    //return overrided_types[typename];\n}","export default function attr(o: any, attr: string) {\n    if( ! (attr in o) )\n        return o.constructor[attr];\n    return o[attr];\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function singledispatchmethod(f: (...args: any) => any) {\n\n    const registered = {} as Record<string, (...args: any) => any>;\n\n    const dec = function(this: any, ...args: any) {\n        // @ts-ignore\n        const sf = registered[getClass(args[0]).name];\n\n        if( sf !== undefined)\n            return sf.call(this, ...args);\n\n        return f.call(this, ...args);\n    }\n\n    // @ts-ignore\n    dec.register = (f, type: string) => {\n        registered[type] = f;\n    }\n\n    return dec;\n}","import { IVALUE } from \"..\";\nimport { getClass } from \"../helpers/getClass\";\nimport lit from \"./lit\";\n\nexport default function uop(op:string, a: unknown) {\n\n    if( op === \"not\") {\n        // @ts-ignore\n        return lit(! a[IVALUE]);\n    }\n\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n    return fct.call(a);\n}","const mapper = {\n    \"bigint\" : \"int\",\n    \"number\" : \"float\",\n    \"string\" : \"str\",\n    \"boolean\": \"bool\"\n}\n\nfunction getJSType(o: unknown) {\n    return typeof o;\n}\n\nexport default function lit(o: unknown) {\n    \n    // @ts-ignore\n    const type = mapper[getJSType(o)];\n\n    // @ts-ignore\n    const self = Object.create(globalThis[type].prototype);\n    // @ts-ignore\n    __JS_SET_IVALUE__(self, o);\n    return self;\n}","import { getClass } from \"../helpers/getClass\";\nimport isClass from \"../helpers/isClass\";\n\nexport default function call(a: (...args:unknown[]) => unknown, ...args: unknown[]) {\n\n    // @ts-ignore\n    let fct = a.__call__\n\n    if( fct === undefined ) {\n        fct = a;\n\n        // h4cky\n        if( fct.prototype?.__new__ !== undefined ) {\n            const b = getClass(fct).prototype.__call__;\n            if( b !== undefined) {\n                return b.call(fct, ...args);\n            }\n        }\n\n        if( isClass(fct) ) // only for JS classes now...\n            return new fct(...args);\n    }\n\n    return fct(...args);\n}\n","export default function isClass(o: unknown) {\n    // from https://stackoverflow.com/questions/526559/testing-if-something-is-a-class-in-javascript\n    return Object.getOwnPropertyDescriptors(o)?.prototype?.writable === false;\n}\n// + https://github.com/brython-dev/brython/issues/2513","import { IVALUE } from \"..\";\nimport { getClass } from \"../helpers/getClass\";\nimport { NotImplemented } from \"../tmp_corelib/NotImplemented\";\nimport lit from \"./lit\";\n\nexport default function op(a: unknown, op: string, b: unknown) {\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n\n    if( fct === undefined ) {\n        if( op === \"ne\" )\n            return lit( ! ka.prototype[\"__eq__\"].call(a, b)[IVALUE] );\n        if( op[0] === \"i\")\n            fct = ka.prototype[`__${op.slice(1)}__`];\n        if( fct === undefined)\n            fct = defaults[op as keyof typeof defaults];\n    }\n    \n    let result = fct.call(a, b);\n    if( result === NotImplemented) {\n\n        const kb = getClass(b);\n        if( kb === undefined ) {\n            console.warn(b, \"r\" + op);\n            throw new Error(\"?\");\n        }\n\n        let fct = kb.prototype[`__r${op}__`];\n        result = fct.call(b, a);\n    }\n\n    return result;\n}\n\n//TODO: move to corelib ?\nconst defaults = {\n    eq: function(b: unknown) { return this == b }\n}","import { IVALUE } from \"..\";\n\nexport default function assert(cond: {[IVALUE]: boolean}) {\n    if( ! cond[IVALUE] )\n        throw new Error(`Assertion failed`);\n}","import BenchRunner, { BenchResults, BenchStats } from \"./utils/BenchRunner\";\nimport { BryRunner, RBryRunner } from \"./utils/runner\";\nimport printBenchStats from \"./utils/printBenchStats\";\n\nconst brython_tests = [\n    'basic test suite',\n    'numbers',\n//    \"classes\" // ~726\n//    \"strings\",\n//    \"string methods\"\n];\n// strings ~616\n// list    ~345\n// dicts   ~205\n// sets    ~224\n// bytes   ~229\n\n// generators ~972...\n\nconst search = new URLSearchParams( location.search );\nconst test_name = search.get(\"test\");\n//const merge     = __SBRY_MODE__ === \"test\"; // Benchmark\nconst merge     = search.get(\"merge\") === \"true\" ? true : false;\nconst parser    = search.get(\"parser\") === \"false\" ? false : true;\nconst DEFAULT_COMPAT = (search.get(\"compat\") ?? \"NONE\") as typeof __SBRY_COMPAT__;\n\n////////////////////////////////////////////////////////////////:\n\nwindow.onerror = (...args) => {\n\tconsole.log(args);\n\t// msg\n\t// stack\n\t// \n}\n\n// ==================================================================\n\n// benchmark configuration...\nfunction createBench() {\n\n    const bench = new BenchRunner();\n\n    bench.addRunner( \"Brython\",  BryRunner)\n            .addRunner(\"RBrython\", RBryRunner);\n\n    bench.addStep(\"parse\", (runner, ctx) => {\n        ctx.ast = runner.parse(ctx.pycode);\n    })\n            .addStep(\"emit\",  (runner, ctx) => {\n        ctx.jscode = runner.emit(ctx.ast);\n    })\n            .addStep(\"load\",  (runner, ctx) => {\n        ctx.fct = runner.loadAsFunction(ctx.jscode);\n    })\n            .addStep(\"execute\",  (_, ctx) => {\n        ctx.fct();\n    });\n\n    bench.addStat(\"nbTokens\", (ctx) => {\n        return $B.tokenizer(ctx.pycode, '_').length;\n    })\n    bench.addStat(\"nbFiles\", (ctx) => {\n        return 1;\n    })\n\n    bench.resetStats();\n\n    return bench;\n}\n\n// ==================================================================\n\nfunction resetGUI() {\n    sbry_output.classList.remove('error', 'success');\n    sbry_output.textContent = \"\";\n\n    bry_output.classList.remove('error', 'success');\n    bry_output.textContent = \"\";\n\n}\nfunction printResult( target: Element,\n                      result: BenchStats,\n                        base: BenchStats) {\n\n    target.textContent = printBenchStats(result, base);\n    target.classList.add(\"success\");\n    if( result.errors.length > 0) {\n        console.warn(result.errors);\n\n        target.classList.add(\"error\");\n        target.textContent += \"\\n\" + result.errors.map( e => {\n            let msg = e.message;\n            if( msg === \"\")\n                // @ts-ignore\n                msg = e.args[0]; // Brython errors.\n            return msg;\n        }).join('\\n');\n        //TODO: show code...\n    }\n}\n\nfunction run(pycodes: string[]) {\n\n    resetGUI();\n\n    bench.resetStats();\n\n    //TODO: handle errors...\n    for(let i = 0; i < pycodes.length; ++i)\n        bench.bench({pycode: pycodes[i]});\n\n    const results = bench.getStats();\n\n    if( pycodes.length === 1) {\n         bry_js_output.textContent = results. Brython.ctx.jscode;\n        sbry_js_output.textContent = results.RBrython.ctx.jscode;\n    }\n\n    printResult(bry_output , results[ \"Brython\"], results[\"RBrython\"]);\n    printResult(sbry_output, results[\"RBrython\"], results[ \"Brython\"]);  \n}\n\n// ==================================================================\n// Get test suite....\n\nfunction generateTestSuite(test_name: string, merge: boolean): string[] {\n    \n    let tests: string[] = [test_name];\n    if( test_name === \"brython\" )\n        tests = brython_tests;\n\n    let fullcode = \"\";\n    const pycodes = new Array<string>();\n    let id = -1;\n\n    const configs = [\"NONE\"];\n    /*\n    const configs: typeof __SBRY_COMPAT__[] = __SBRY_COMPAT__ === \"NONE\"\n        ? [\"NONE\"]\n        : [\"NONE\", \"PERF\"]; //, \"FULL\"];\n    */\n\n    //TODO: split merge & execute...\n\n    // build merged code\n    tests: for(let i = 0; i < tests.length; ++i) {\n\n        const subtests = test_suites[tests[i]];\n        const substats = subTestsStats[tests[i]];\n\n        for(let j = 0; j < subtests.length; ++j) {\n\n            ++id;\n\n            //const stats = substats[j];\n            //results.total_lines       += stats.total;\n            //results.nb_excluded_lines += stats.excluded;\n\n            for(const config of configs) {\n\n                globalThis.__SBRY_COMPAT__ = config as any;\n\n                //TODO: second exclude...\n\n                let code = subtests[j];\n\n                if( code === \"\")\n                    continue;\n\n                code = filterCode(code);\n        \n                if( merge ) {\n                    const indented_code = code.split('\\n').map(e => `    ${e}`).join('\\n');\n                    fullcode += `def _${id}():\\n${indented_code + \"pass\"}\\n_${id}()\\n`;\n                } else {\n                    pycodes.push(code);\n                }\n            }\n        }\n    }\n\n    if(merge)\n        return [fullcode];\n\n    return pycodes;\n}\n\nasync function loadExcludeList() {\n    const exclude_list = await (await fetch('/assets/exclude_list.txt')).text();\n    return Object.fromEntries( exclude_list.split('#').slice(0).map(e => {\n\n        let lines = e.split('\\n');\n        let name = lines[0].slice(1);\n\n        let exclude = lines.slice(1).filter(e => e[0] !== '/' && e.length !== 0).map( x => {\n            const e = x.split('-');\n            if( e.length === 1) {\n                if( e[0] === '*')\n                    return e[0];\n                return parseInt(e[0]);\n            }\n            return [parseInt(e[0]), parseInt(e[1])]\n        });\n\n        return [name, exclude];\n    }) );\n}\n\nasync function loadTests(...names: string[]) {\n\n    const tests: Record<string, string[]> = {};\n\n    for(let i = 0; i < names.length; ++i)\n        tests[names[i]] = await loadSubTests(names[i]);\n\n    return tests;\n}\n\nasync function loadSubTests(test_name: string, exclude = exclude_list) {\n\n    const code = await (await fetch(`/assets/unittests/${test_name}.py`)).text();\n\n    subTestsStats[test_name] = [];\n\n    const parts = code.split('\\n#');\n\n    parts[0] = parts[0].slice(1);\n\n    return parts.map( (t,idx) => {\n\n        let   lines = t.split('\\n');\n        const name  = lines[0].trim();\n        lines[0] = \"# \" + test_name + \".\" + name + \" (\" + (idx+1) + \"/\" + parts.length + \")\";\n        const fullname = `${test_name}.${name}`;\n\n        let excl = exclude[fullname];\n        if( excl === undefined)\n            excl = exclude[`${test_name}.*`];\n\n        lines = filter(lines, excl);\n\n        let nbEmptyLines = 0;\n        for(let i = 1; i < lines.length; ++i)\n            if(lines[i].trim() === '')\n                ++nbEmptyLines;\n        \n        let nbExcluded = 0;\n        for(let i = 1; i < lines.length; ++i) {\n            if( lines[i][0] === '#' ) {\n                if( lines[i].slice(1).trim() === '' ) // commented empty line\n                    ++nbEmptyLines;\n                else\n                    ++nbExcluded\n            }\n        }\n\n        let code_len = lines.length - 1 - nbEmptyLines;\n\n        subTestsStats[test_name].push({\n            excluded: nbExcluded,\n            total   : code_len\n        });\n    \n        if(code_len === nbExcluded)\n            return \"\";\n\n        return lines.join('\\n') + '\\n';\n    });\n}\n\nfunction filter(lines: string[], list: (number|\"*\"|number[])[]) {\n\n    list ??= [];\n    \n    let result = lines.map( (l, idx) => {\n        idx = idx + 1;\n        let excluded = list.find( (v) => {\n            if( v === '*')\n                return true;\n            if( idx === v)\n                return true;\n            if( Array.isArray(v) && v[0] <= idx && v[1] >= idx)\n                return true;\n            return false;\n        }) !== undefined;\n        \n        if( excluded )\n            return `# ${l}`;\n        return l;\n    });\n\n    return result;\n}\n\n// ===============================================================\n\nconst subTestsStats: Record<string, {total: number, excluded: number}[]> = {};\nconst exclude_list = await loadExcludeList();\nconst test_suites  = await loadTests(...brython_tests); // cf end of file for available tests\n\n// ===============================================================\n\nconst  bry_output  = document.querySelector ( '.brython_output')!;\nconst sbry_output  = document.querySelector('.sbrython_output')!;\nconst python_input = document.querySelector<HTMLInputElement>('#python')!;\n\nconst python_output = document.querySelector(\".python_ouput\")!;\nconst ast_output    = document.querySelector(\"#ast\")!;\nconst sbry_js_output= document.querySelector(\"#rbry_js\")!;\nconst  bry_js_output= document.querySelector(\"#bry_js\")!;\n\nconst sbry_print = (...args: any[]) => {\n    console.log(\"[SBRY]\", ...args);\n}\n\npython_input.addEventListener(\"input\",\n    () => {\n        const code = python_input.value;\n        localStorage.setItem('sbrython_code', code);\n        run([code]);\n    });\n\npython_input.addEventListener('keydown', (ev) => {\n\n    if(ev.code === \"Tab\") {\n            ev.preventDefault();\n    \n            let beg = python_input.selectionStart!;\n            let end = python_input.selectionEnd!;\n    \n            const txt = python_input.value;\n            const preText  = txt.slice(0  , beg);\n            const postText = txt.slice(end, txt.length);\n    \n            python_input.value = preText + \"    \" + postText; // input tab key\n            \n            const pos = beg+4;\n            python_input.setSelectionRange(pos, pos);\n        }\n    });\n\nconst select = document.querySelector<HTMLSelectElement>('#tests')!;\n\nconst defaultOpt = new Option(\"----\", undefined, true, true);\ndefaultOpt.toggleAttribute('disabled');\nselect.append( defaultOpt );\n\nfunction filterCode(code: string) {\n\n    const codes = code.split(\"\\n\");\n    for(let l = 1; l < codes.length; ++l) {\n        const idx = codes[l].indexOf('#');\n        if( idx <= 0)\n            continue;\n        const config = JSON.parse( codes[l].slice(idx+1).trim());\n        if( config.COMPAT !== DEFAULT_COMPAT )\n            codes[l] = \"#\" + codes[l];\n        else\n            codes[l] = codes[l].slice(0, idx).trimEnd();\n    }\n\n    return codes.join('\\n');\n}\n\nselect.addEventListener('change', () => {\n\n    const code = filterCode(select.value);\n\n    python_input.value = code;\n    localStorage.setItem('sbrython_code', code);\n    run([code]);\n    \n});\n\nfor(let i = 0; i < brython_tests.length; ++i) {\n\n    const subtests = test_suites[ brython_tests[i] ];\n\n    for(let j = 0; j < subtests.length; ++j) {\n\n        const code = subtests[j];\n\n        if( code === \"\")\n            continue;\n\n        const name = code.slice(2 , code.indexOf(\"\\n\") );\n\n        const opts = new Option(name, code);\n        select!.append( opts );\n    }\n}\n\n// =====================================================================\n\nconst bench = createBench();\nlet initialRun: string[];\n\nif( test_name !== null )\n    initialRun = generateTestSuite(test_name, merge);\nelse\n    initialRun = [python_input.value = localStorage.getItem('sbrython_code') ?? \"\"];\n\nrun( initialRun );","// initial data\n// add steps\n// get result\n// get metrics...\n\nimport Runner from \"@SBrython/rbry/runners/interface\";\n\nexport type BenchStats   = {\n    steps : {name: string, time: number}[];\n    ctx   : Record<string, any>\n    errors: Error[],\n    stats : Record<string, number>\n}\nexport type BenchResults = Record<string, BenchStats>;\n\nexport default class BenchRunner {\n\n    readonly steps  : {name: string, fct: (runner: Runner, context: Record<string, any>) => void}[] = [];\n    readonly runners: {name: string, runner: Runner}[] = [];\n    readonly   stats: {name: string, fct: (ctx: Record<string, any>) => number}[] = [];\n\n    addStat(name: string, fct: (ctx: Record<string, any>) => number) {\n        this.stats.push({name, fct});\n    }\n\n    addRunner(name: string, runner: Runner) {\n        this.runners.push({name, runner});\n        return this;\n    }\n    addStep(name: string, fct: (runner: Runner, context: Record<string, any>) => void) {\n        this.steps.push({name, fct});\n        return this;\n    }\n\n    #results: BenchResults | null = null;\n    resetStats() {\n        this.#results = {};\n        for(let r = 0; r < this.runners.length; ++r) {\n            this.#results[this.runners[r].name] = {\n                steps : new Array(this.steps.length),\n                ctx   : {},\n                errors: [],\n                stats : {}\n            };\n            for(let i = 0; i < this.steps.length; ++i)\n                this.#results[this.runners[r].name].steps[i] = {\n                    name: this.steps[i].name,\n                    time: 0\n                }\n            for(let i = 0; i < this.stats.length; ++i)\n                this.#results[this.runners[r].name].stats[this.stats[i].name]\n                    = 0;\n        }\n    }\n    getStats() {\n        return this.#results!;\n    }\n\n    bench(ctx: Record<string, any>) {\n\n        if( this.#results === null ) {\n            this.resetStats();\n        }\n        //TODO tokenize (stats).\n        //TODO print\n\n        const results = this.#results!;\n\n        for(let r = 0; r < this.runners.length; ++r) {\n            const runner = this.runners[r].runner;\n            const result = results[this.runners[r].name];\n            const context = result.ctx = {...ctx};\n\n            try {\n\n                for(let i = 0; i < this.steps.length; ++i) {\n\n                    const f = this.steps[i].fct;\n\n                    const beg = performance.now();\n                    f(runner, context);\n                    const end = performance.now();\n                    \n                    result.steps[i].time += end - beg;\n                }\n\n                for(let i = 0; i < this.stats.length; ++i) {\n                    result.stats[this.stats[i].name] += this.stats[i].fct(context);\n                }\n\n            } catch(e: unknown) {\n                result.errors.push( e as Error );\n            }\n        }\n    }\n}","import { ParsedCode } from \"../ast/types\";\n\nexport default function parse(pycode: string, filename: string): ParsedCode {\n    \n    const parser = new $B.Parser(pycode, filename, 'file');\n\n    const ast   = $B._PyPegen.run_parser(parser);\n    const future = $B.future_features(ast, filename)\n    var symtable = $B._PySymtable_Build(ast, filename, future);\n\n    return {\n        filename,\n        pycode,\n        ast,\n        symtable,\n    }\n}","import { ParsedCode } from \"../ast/types\";\n\nexport default abstract class Runner {\n    abstract run(pycode: string): void;\n\n    // low level\n    abstract parse(pycode: string ): ParsedCode;\n    abstract emit (ast: ParsedCode): string;\n    abstract loadAsFunction(jscode: string): () => void;\n}","import { ParsedCode } from \"../../ast/types\";\nimport parse from \"../../parser\";\nimport Runner from \"../interface\";\n\nexport default class BrythonRunner extends Runner {\n\n    constructor() {\n        super();\n        this.initialize(); // by default initialize immediately.\n    }\n\n    run(pycode: string) {\n        this.loadAsFunction(this.emit(this.parse(pycode)))();\n    }\n    // builtins\n\n    // initialize\n    #initialized = false;\n    initialize() {\n        this.#initialized = true;\n    }\n\n    // low level\n    parse(pycode: string): ParsedCode {\n        return parse(pycode, \"_\");\n    }\n    emit(ast: ParsedCode) {\n        let imported:any;\n        return $B.js_from_root({ast: ast.ast,\n                                symtable: ast.symtable,\n                                filename: ast.filename,\n                                src     : ast.pycode,\n                                imported}).js\n\n    }\n    loadAsFunction(jscode: string) {\n        $B.imported[\"_\"] = {};\n        return new Function(jscode) as () => void;\n    }\n}\n\n/*\n - config: macros, symbols\n - ??Builtin(name, code, cfg)\n - registerBuiltin(name, symb)\n - initialize()\n */","// list is filled in list.ts in order to prevent circular dependency.\n\nimport { ASTNode } from \"@SBrython/rbry/ast/types\";\n\nexport type Handler = (node: ASTNode) => string;\n\nconst Handlers: Record<string, Handler> = {};\n\nexport default Handlers;","import { ASTNode, OperatorNode } from \"./types\";\n\nexport function nodeType(node: ASTNode): string {\n    // @ts-ignore\n    return node.constructor.$name;\n}\n\nexport function getOp(op: OperatorNode): string {\n    // @ts-ignore\n    return op.constructor.$name\n}","import { nodeType } from \"../ast\";\nimport { ASTNode } from \"../ast/types\";\nimport Handlers from \"./handlers\";\n\nexport function node2js(node: ASTNode): string {\n\n    const handler = Handlers[nodeType(node) as keyof typeof Handlers];\n\n    if( handler === undefined) {\n        console.warn(node);\n        throw new Error(`Node type ${nodeType(node)} is unknown`);\n    }\n\n    return handler(node);\n}\n","import { BodyNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../node2js\";\n\nexport default function(body: BodyNode, _inClass = false) {\n\n    //@ts-ignore\n    const prev = globalThis.inClass;\n    //@ts-ignore\n    globalThis.inClass = _inClass; //TODO: h4ck\n\n    let res = \"\";\n    for(let i = 0; i < body.length; ++i)\n        res += node2js(body[i]) + \";\\n\";\n\n    //@ts-ignore\n    globalThis.inClass = prev;\n\n    return res;\n}","import { ClassDefNode } from \"@SBrython/rbry/ast/types\";\nimport { nodeType } from \"@SBrython/rbry/ast\";\nimport { node2js } from \"../../node2js\";\n\n// @ts-ignore\nglobalThis.inCstrFct = false;\n\nexport default function ClassDef(node: ClassDefNode) {\n    const name = node.name;\n    const body = node.body;\n\n    // dirty dirty h4ck... (we need a runner)\n    let str = `globalThis.${name} = (() =>{\n        function ${name}() {\n            return Object.create(${name}.prototype);\n        }\n        const classname = ${name};\n    `;\n\n    for(let i = 0; i < body.length; ++i) {\n        const type = nodeType(body[i]);\n        if( type === \"FunctionDef\") {\n            // @ts-ignore\n            globalThis.inCstrFct = true;\n            // @ts-ignore\n            let prefix = body[i].name === \"_\"\n                            ? \"\"\n                            // @ts-ignore\n                            : `${name}.prototype.${body[i].name} = `;\n            \n            str += `${prefix}${node2js(body[i])}\n            `;\n            // @ts-ignore\n            globalThis.inCstrFct = false;\n        }\n    }\n\n    str += `\n        return ${name};\n    })();\n    `;\n\n    return str;\n\n    /*return `class ${name} {\n        ${Body(body, true)}\n    }`;*/\n}","import { getOp } from \"@SBrython/rbry/ast\";\nimport { BinaryOpNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function(node: BinaryOpNode) {\n    const a = node.left;\n    const b = node.right;\n    const op = getOp(node.op) as keyof typeof binops;\n\n    const opname = binops[op];\n    if( opname === undefined) \n        throw new Error(`BinOp ${op} not impl`);\n\n    return `$RB.op(${node2js(a)}, \"${opname}\", ${node2js(b)})`;\n}\n\nexport const binops = {\n    Add : \"add\",\n    Sub : \"sub\",\n    Mult: \"mul\",\n    Div : \"div\",\n    Pow : \"pow\",\n    Mod : \"mod\",\n    // bits\n    BitOr: \"or\",\n    BitAnd: \"and\",\n    LShift: \"lshift\",\n    RShift: \"rshift\"\n}","import { CompareNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { getOp } from \"@SBrython/rbry/ast\";\n\nexport default function Compare(node: CompareNode) {\n\n    const a = node.left;\n    const op = getOp(node.ops[0]) as keyof typeof cmpops | \"Is\";\n    const b  = node.comparators[0];\n\n    if( op === 'Is' ) return `__JS_FROM_OPI__(${node2js(a)}, \"===\", ${node2js(b)})`;\n    \n    const opname = cmpops[op];\n    if( opname === undefined) {\n        console.warn(op);\n        throw new Error(`CmpOp ${op} not impl`);\n    }\n\n    return `$RB.op(${node2js(a)}, \"${opname}\", ${node2js(b)})`;\n}\n\nconst cmpops = {\n    Eq   : \"eq\",\n    NotEq: \"ne\"\n}\n","import { UnaryOpNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { getOp } from \"@SBrython/rbry/ast\";\n\nexport default function(node: UnaryOpNode) {\n\n    const a = node.operand;\n    const op = getOp(node.op) as keyof typeof uops;\n\n    const opname = uops[op];\n    if( opname === undefined) \n        throw new Error(`UnaryOp ${op} not impl`);\n\n    return `$RB.uop(\"${opname}\", ${node2js(a)})`;\n}\n\nconst uops = {\n    Invert: \"invert\",\n    USub: \"neg\",\n    // pos\n\n    // special:\n    Not: \"not\", // use __len__ or __bool__\n}","import Handlers, { Handler } from \".\";\n\nimport {default as ClassDef} from \"./definitions/ClassDef\";\nHandlers[\"ClassDef\"] = ClassDef as Handler;\n\nimport {default as FunctionDef} from \"./definitions/FunctionDef\";\nHandlers[\"FunctionDef\"] = FunctionDef as Handler;\n\nimport {default as Assert} from \"./keywords/Assert\";\nHandlers[\"Assert\"] = Assert as Handler;\n\nimport {default as Pass} from \"./keywords/Pass\";\nHandlers[\"Pass\"] = Pass as Handler;\n\nimport {default as Return} from \"./keywords/Return\";\nHandlers[\"Return\"] = Return as Handler;\n\n\nimport {default as Assign} from \"./operators/Assign\";\nHandlers[\"Assign\"] = Assign as Handler;\n\nimport {default as Attribute} from \"./operators/Attribute\";\nHandlers[\"Attribute\"] = Attribute as Handler;\n\nimport {default as AugAssign} from \"./operators/AugAssign\";\nHandlers[\"AugAssign\"] = AugAssign as Handler;\n\nimport {default as BinOp} from \"./operators/BinOp\";\nHandlers[\"BinOp\"] = BinOp as Handler;\n\nimport {default as Call} from \"./operators/Call\";\nHandlers[\"Call\"] = Call as Handler;\n\nimport {default as Compare} from \"./operators/Compare\";\nHandlers[\"Compare\"] = Compare as Handler;\n\nimport {default as UnaryOp} from \"./operators/UnaryOp\";\nHandlers[\"UnaryOp\"] = UnaryOp as Handler;\n\nimport {default as Constant} from \"./vars/Constant\";\nHandlers[\"Constant\"] = Constant as Handler;\n\nimport {default as Expr} from \"./vars/Expr\";\nHandlers[\"Expr\"] = Expr as Handler;\n\nimport {default as Name} from \"./vars/Name\";\nHandlers[\"Name\"] = Name as Handler;\n\nimport {default as JoinedStr} from \"./vars/JoinedStr\";\nHandlers[\"JoinedStr\"] = JoinedStr as Handler;\n\nimport {default as If} from \"./controlflows/If\";\nHandlers[\"If\"] = If as Handler;\n\nimport {default as While} from \"./controlflows/While\";\nHandlers[\"While\"] = While as Handler;\n\nimport {default as For} from \"./controlflows/For\";\nHandlers[\"For\"] = For as Handler;\n\nimport {default as Try} from \"./controlflows/Try\";\nHandlers[\"Try\"] = Try as Handler;\n\n\nimport {default as Continue} from \"./keywords/Continue\";\nHandlers[\"Continue\"] = Continue as Handler;\n\nimport {default as Break} from \"./keywords/Break\";\nHandlers[\"Break\"] = Break as Handler;\n\nimport {default as Raise} from \"./keywords/Raise\";\nHandlers[\"Raise\"] = Raise as Handler;\n\nimport {default as ImportFrom} from \"./imports/ImportFrom\";\nHandlers[\"ImportFrom\"] = ImportFrom as Handler;","import { FunctionDefNode } from \"@SBrython/rbry/ast/types\";\nimport Body from \"../Body\";\nimport { node2js } from \"../../node2js\";\nimport { nodeType } from \"@SBrython/rbry/ast\";\n\nexport default function FunctionDef(node: FunctionDefNode) {\n    const name = node.name;\n    //const args = node.args;\n    const body = node.body;\n\n    // @ts-ignore\n    let prefix = globalThis.inClass ? \"\" : \"function \";\n\n    let args = \"\";\n\n    let i = 0;\n    let self = \"\";\n    // @ts-ignore\n    if( globalThis.inClass || globalThis.inCstrFct ) {\n        // @ts-ignore\n        self = `const ${node.args.posonlyargs[i].arg} = this;`;\n        ++i;\n    }\n\n    for( ; i < node.args.posonlyargs.length; ++i) {\n        //console.warn( node.args.posonlyargs[i] );\n        //TODO:\n        //args += node2js(node.args.posonlyargs[i]) + \", \";\n        // @ts-ignore\n        args += `${node.args.posonlyargs[i].arg}, `;\n    }\n\n    let fct_str = `${prefix}${name}(${args}) {\n        ${self}\n        ${Body(body)}\n    }`;\n\n    if( node.decorator_list.length === 0 )\n        return fct_str;\n\n    const dnode = node.decorator_list[0];\n    const type = nodeType(dnode);\n    // hardcoded\n    if( type === \"Attribute\") {\n        // @ts-ignore\n        const typehint = node.args.posonlyargs[1].annotation.id;\n\n        let str = \"\";\n        let prefix = \"\";\n        let pprefix = \"classname\";\n\n        // @ts-ignore\n        if( globalThis.inClass ) {\n            str += \"static {\\n\";\n            prefix = \"function \";\n            pprefix = \"this\";\n        }\n\n        str += `${pprefix}.prototype.${\n                // @ts-ignore\n                dnode.value.id\n            }.register(\n                ${prefix}${fct_str},\n                \"${typehint}\"\n            );\n        `;\n\n        // @ts-ignore\n        if( globalThis.inClass )\n            str += \"}\\n\";\n\n        return str;\n    }\n\n    // @ts-ignore\n    if( globalThis.inClass ) {\n        return `static {\n            this.prototype.${name} = ${node2js(dnode)}(function ${fct_str});\n        }`;\n    }\n\n    return `${node2js(dnode)}(${fct_str})`;\n}","import { AssertNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Assert(node: AssertNode) {\n    return `$RB.assert(${node2js(node.test)})`;\n}","import { PassNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function Pass(node: PassNode) {\n    return \"\";\n}","import { ReturnNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Return(node: ReturnNode) {\n    return `return ${ node2js(node.value) }`;\n}","import { AssignNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Assign(node: AssignNode) {\n    //@ts-ignore\n    let res = globalThis.inClass ? \"static \" : \"\";\n    for(let i = 0; i < node.targets.length; ++i)\n        res += node2js(node.targets[i]) + \" = \";\n\n    return res + node2js(node.value);\n}","import { AttributeNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function (node: AttributeNode) {\n    return `$RB.attr(${node2js(node.value)}, \"${node.attr}\")`;\n}","import { AugAssignNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { binops } from \"./BinOp\";\nimport { getOp } from \"@SBrython/rbry/ast\";\n\nexport default function AugAssign(node: AugAssignNode) {\n \n    const a  = node.target;\n    const op = getOp(node.op) as keyof typeof binops;\n    const b  = node.value;\n\n    const opname = binops[op];\n    if( opname === undefined) \n        throw new Error(`BinOp ${op} not impl`);\n\n    return `${node2js(a)} = $RB.op(${node2js(a)}, \"i${opname}\", ${node2js(b)})`;   \n}","import { AttributeNode, CallNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { nodeType } from \"@SBrython/rbry/ast\";\n\nexport default function Call(node: CallNode) {\n    const f        = node.func;\n    const args     = node.args;\n    //const keywords = node.keywords;\n\n    // @ts-ignore\n    if( f.id === \"__JS_WRITE__\")\n        // @ts-ignore\n        return node.args[0].value;\n\n    //TODO: args parsing...\n    let str = \"\";\n    for(let i = 0; i < args.length; ++i)\n        str += node2js(args[i]) + \", \";\n\n    if( nodeType(f) === \"Attribute\") {\n        const m = f as AttributeNode;\n        return `$RB.mcall(${node2js(m.value)}, \"${m.attr}\", ${str} )`;\n    }\n\n    return `$RB.call(${node2js(f)}, ${str})`;\n}","import { ConstantNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function Constant(node: ConstantNode) {\n\n        const type = typeof node.value;\n\n        if( type === \"object\") {\n            // @ts-ignore\n            const qname = node.value.__class__.__qualname__\n            // @ts-ignore\n            const value: float|bigint = node.value.value;\n\n            if( qname === \"float\"   ) return `$RB.lit(${value})`;\n            if( qname === \"int\"     ) return `$RB.lit(${value}n)`;\n            if( qname === \"NoneType\") return \"$RB.lit(null)\";\n            //if( qname === \"ellipsis\") return \"$RB.ellipsis\";\n        }\n        if( type === \"string\" ) return `$RB.lit(\"${node.value}\")`;\n        if( type === \"number\" ) return `$RB.lit(${node.value}n)`; // bigint\n        if( type === \"boolean\") return `$RB.lit(${node.value})`;\n\n        console.warn(node, type);\n        throw new Error(`Unknown Cste ${type}`);\n}","import { ExprNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Expr(node: ExprNode) {\n    return node2js(node.value);\n}","import { NameNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function Name(node: NameNode) {\n    return node.id;\n}","import { nodeType } from \"@SBrython/rbry/ast\";\nimport { node2js } from \"../../node2js\";\nimport { JoinedStrNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function JoinedStr(node: JoinedStrNode) {\n\n    console.warn(node);\n\n    let res = \"`\";\n    for(let i = 0; i < node.values.length; ++i) {\n        const value = node.values[i];\n        const type  = nodeType(value);\n\n        if( type === \"Constant\")\n            // @ts-ignore\n            res += value.value;\n        else {\n            // @ts-ignore\n            res += `\\${${node2js(value.value)}}`;\n        }\n    }\n    res += \"`\";\n    return res;\n}","import { IfNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\nimport { nodeType } from \"@SBrython/rbry/ast\";\n\nexport default function If(node: IfNode) {\n\n    let str = `if( __JS_GET_IVALUE__(${node2js(node.test)}) ) {\n        ${ Body(node.body) }\n    }`;\n\n    for(let i = 0; i < node.orelse.length; ++i) {\n        const snode = node.orelse[i];\n        const type = nodeType(snode);\n\n        if( type === \"If\")\n            str += \"else \" + node2js(snode);\n        else\n            str += `else { ${node2js(snode)} }`;\n    }\n\n    return str;\n}","import { WhileNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function While(node: WhileNode) {\n\n    return `while( __JS_GET_IVALUE__(${node2js(node.test)}) ) {\n        ${Body(node.body)}\n    }`;\n\n}","import { ForNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function For(node: ForNode) {\n    return `for(${node2js(node.target)} of ${node2js(node.iter)}){\n        ${Body(node.body)}\n    }`;\n}","import { TryNode } from \"@SBrython/rbry/ast/types\";\nimport Body from \"../Body\";\n\nexport default function Try(node: TryNode) {\n    //TODO...\n    return `try {\n        ${Body(node.body)}\n    } catch {\n        ${  // @ts-ignore\n            Body(node.handlers[0].body)\n        }\n    }`;\n}","import { ASTNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function Continue(node: ASTNode) {\n    return \"continue;\"\n}","import { ASTNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function Break(node: ASTNode) {\n    return \"break;\"\n}","import { RaiseNode } from \"@SBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Raise(node: RaiseNode) {\n    return `throw ${node2js(node.exc)};`;\n}","import { ASTNode } from \"@SBrython/rbry/ast/types\";\n\nexport default function ImportFrom(node: ASTNode) {\n    console.warn(\"Import not implemented yet\");\n    return \"\";\n}","import { ParsedCode } from \"../../ast/types\";\nimport emit from \"../../emitter\";\nimport parse from \"../../parser\";\nimport Runner from \"../interface\";\n\nconst builtin_pycode = {\n    int  : require(\"!!raw-loader!../../corelib/int.py\").default,\n    float: require(\"!!raw-loader!../../corelib/float.py\").default,\n    bool : require(\"!!raw-loader!../../corelib/bool.py\").default,\n    str  : require(\"!!raw-loader!../../corelib/str.py\").default\n}\n\nexport default class RBrythonRunner extends Runner {\n\n    constructor() {\n        super();\n        this.initialize(); // by default initialize immediately.\n    }\n\n    run(pycode: string) {\n        this.loadAsFunction(this.emit(this.parse(pycode)))();\n    }\n    // builtins\n\n    // initialize\n    #initialized = false;\n    initialize() {\n        for(let name in builtin_pycode)\n            this.run(builtin_pycode[name as keyof typeof builtin_pycode]);\n\n        this.#initialized = true;\n    }\n\n    // low level\n    parse(pycode: string): ParsedCode {\n        return parse(pycode, \"_\");\n    }\n    emit(ast: ParsedCode) {\n        return emit(ast);\n    }\n    loadAsFunction(jscode: string) {\n        return new Function(jscode) as () => void;\n    }\n}\n\n/*\n - config: macros, symbols\n - ??Builtin(name, code, cfg)\n - registerBuiltin(name, symb)\n - initialize()\n */","// quick h4ck (should move it).\nimport \"../runlib\";\n\nimport \"./handlers/list\"; // ensure Handlers are loaded.\n\nimport { ParsedCode } from \"../ast/types\";\nimport Body from \"./handlers/Body\";\n\nexport default function emit(ast: ParsedCode) {\n    return Body(ast.ast.body);\n}\n","import  BrythonRunner from \"./Brython\";\nimport RBrythonRunner from \"./RBrython\";\n\nexport default class Runners {\n    static getBrythonRunner() {\n        return new BrythonRunner();\n    }\n    static getRBrythonRunner() {\n        return new RBrythonRunner();\n    }\n}","import Runner from \"@SBrython/rbry/runners\";\n\nexport const  BryRunner = Runner.getBrythonRunner();\nexport const RBryRunner = Runner.getRBrythonRunner();","// interface\nimport op     from \"./interface/op\";\nimport uop    from \"./interface/uop\";\nimport call   from \"./interface/call\";\nimport mcall  from \"./interface/mcall\";\nimport assert from \"./interface/assert\";\nimport attr   from \"./interface/attr\";\n\n// @ts-ignore\nglobalThis.$RB = {\n    // interface\n    lit,\n    op,\n    uop,\n    call,\n    mcall,\n    assert,\n    attr,\n}\n\n\n//TODO: corelib\nimport { getClass } from \"./helpers/getClass\";\nimport {NotImplemented} from \"./tmp_corelib/NotImplemented\";\nimport singledispatchmethod from \"./tmp_corelib/singledispatchmethod\";\nimport lit from \"./interface/lit\";\n\n// @ts-ignore\nglobalThis.__JS_LOG__ = (...args) => console.log(...args);\n\nexport const IVALUE = Symbol();\n\n// @ts-ignore\nglobalThis.__JS_SET_IVALUE__ = (self, v) => self[IVALUE] = v;\n// @ts-ignore\nglobalThis.__JS_GET_IVALUE__ = (self) => self[IVALUE];\n\nconst ops = { /* @ts-ignore */\n    \"==\" : (a, b) => a ==  b,/* @ts-ignore */\n    \"===\": (a, b) => a === b,/* @ts-ignore */\n    \"+\"  : (a, b) => a +  b,/* @ts-ignore */\n    \"-\"  : (a, b) => a -  b,/* @ts-ignore */\n    \"*\"  : (a, b) => a *  b,/* @ts-ignore */\n    \"**\" : (a, b) => a ** b,/* @ts-ignore */\n    \"/\"  : (a, b) => a /  b,/* @ts-ignore */\n    \"%\"  : (a, b) => a %  b,/* @ts-ignore */\n    \"|\"  : (a, b) => a |  b,/* @ts-ignore */\n    \"&\"  : (a, b) => a &  b,/* @ts-ignore */\n    \">>\" : (a, b) => a >> b,/* @ts-ignore */\n    \"<<\" : (a, b) => a << b,/* @ts-ignore */\n}\n\nconst uops = { /* @ts-ignore */\n    \"-\": (a) => -a, /* @ts-ignore */\n    \"~\": (a) => ~a, /* @ts-ignore */\n    \"!\": (a) => !a,\n}\n\nfunction getStr(o: unknown): string {\n    if( typeof o === \"string\")\n        return o;\n\n    // @ts-ignore\n    return o[IVALUE];\n}\n\n\n// @ts-ignore\nglobalThis.__JS_IRUN__ = function (code: string, ...args: any[]) {\n    // @ts-ignore\n    return __JS_FROM__( eval(code[IVALUE])(...args.map( e => e?.[IVALUE])) );\n}\n\n// @ts-ignore\nglobalThis.__JS_OP__ = function (...args: any[]) {\n    if(args.length === 2) { // unary op\n        // @ts-ignore\n        return uops[getStr(args[0])](args[1]);\n    } // else binary op\n    // @ts-ignore\n    return ops[getStr(args[1])](args[0], args[2]);\n}\n\n// @ts-ignore\nglobalThis.__JS_OPI__ = (...args: any[]) => {\n    // @ts-ignore\n    return __JS_OP__(...args.map(e => getStr(e)) )\n};\n\n// @ts-ignore\nglobalThis.__JS_FROM__ = lit;\n\n\n// @ts-ignore\nglobalThis.__JS_AS_NUMBER__ = (o: unknown) => {\n    // @ts-ignore\n    o = o[IVALUE]\n    if( o === \"infinity\" || o === \"inf\")\n        return Number.POSITIVE_INFINITY\n    if( o === \"-infinity\" || o === \"-inf\")\n        return Number.NEGATIVE_INFINITY\n    return Number( o );\n}\n\n// @ts-ignore\nglobalThis.__JS_AS_STRING__ = (o: unknown) => `${o[IVALUE]}`;\n\n// @ts-ignore\nglobalThis.__JS_FROM_OP__ = (...args: any[]) => {\n    // @ts-ignore\n    return __JS_FROM__( __JS_OP__(...args) )\n};\n\n// @ts-ignore\nglobalThis.__JS_FROM_OPI__ = (...args: any[]) => {\n    // @ts-ignore\n    return __JS_FROM__( __JS_OPI__(...args) )\n};\n\n// @ts-ignore\nglobalThis.singledispatchmethod = singledispatchmethod;\n\n// @ts-ignore\nglobalThis.abs = function( a: unknown) {\n    const ka = getClass(a);\n    return ka.prototype[`__abs__`].call(a);\n}\n\n// @ts-ignore\nglobalThis.type = function(a: unknown) {\n    return getClass(a); //TODO...\n}\n\n// @ts-ignore\nglobalThis.NotImplemented = NotImplemented;\n\n// @ts-ignore\nglobalThis.range = function*(a: number) {\n    for(let i = 0; i < a; ++i)\n        yield i;\n}\n\n// @ts-ignore\nglobalThis.Exception = function(msg: string) {\n    throw new Error(msg);\n}\n\n","//TODO...\nexport const NotImplemented = Symbol();","export default \"from functools import singledispatchmethod\\nfrom types     import NotImplementedType\\n\\nclass float:\\n    def __new__(cls, o: object, /) -> int:\\n        if type(o) is str:\\n            return __JS_FROM__( __JS_AS_NUMBER__(o) ) # type: ignore\\n        return type(o).__float__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_FROM_OPI__(self, \\\"==\\\", o) # type: ignore\\n    \\n\\n    ### add ###\\n    @singledispatchmethod\\n    def __add__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__add__.register\\n    def _(self, b: float, /) -> float:\\n        return __JS_FROM_OPI__(self, \\\"+\\\", b) # type: ignore\\n    \\n    @__add__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_GET_IVALUE__(self), # type: ignore\\n                                \\\"+\\\",\\n                                __JS_AS_NUMBER__(b)) # type: ignore\\n\\n    @singledispatchmethod\\n    def __radd__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__radd__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_AS_NUMBER__(b), # type: ignore\\n                                \\\"+\\\",\\n                                __JS_GET_IVALUE__(self)) # type: ignore\\n    \\n\\n    ### sub ###\\n    @singledispatchmethod\\n    def __sub__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__sub__.register\\n    def _(self, b: float, /) -> float:\\n        return __JS_FROM_OPI__(self, \\\"-\\\", b) # type: ignore\\n    \\n    @__sub__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_GET_IVALUE__(self), # type: ignore\\n                                \\\"-\\\",\\n                                __JS_AS_NUMBER__(b)) # type: ignore\\n\\n    @singledispatchmethod\\n    def __rsub__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__rsub__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_AS_NUMBER__(b), # type: ignore\\n                                \\\"-\\\",\\n                                __JS_GET_IVALUE__(self)) # type: ignore\\n    \\n    ### mul ###\\n    @singledispatchmethod\\n    def __mul__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__mul__.register\\n    def _(self, b: float, /) -> float:\\n        return __JS_FROM_OPI__(self, \\\"*\\\", b) # type: ignore\\n    \\n    @__mul__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_GET_IVALUE__(self), # type: ignore\\n                                \\\"*\\\",\\n                                __JS_AS_NUMBER__(b)) # type: ignore\\n\\n    @singledispatchmethod\\n    def __rmul__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__rmul__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_AS_NUMBER__(b), # type: ignore\\n                                \\\"*\\\",\\n                                __JS_GET_IVALUE__(self)) # type: ignore\\n\\n    ### div ###\\n    @singledispatchmethod\\n    def __div__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__div__.register\\n    def _(self, b: float, /) -> float:\\n        return __JS_FROM_OPI__(self, \\\"/\\\", b) # type: ignore\\n    \\n    @__div__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_GET_IVALUE__(self), # type: ignore\\n                                \\\"/\\\",\\n                                __JS_AS_NUMBER__(b)) # type: ignore\\n\\n    @singledispatchmethod\\n    def __rdiv__(self, _: object, /) -> float|NotImplementedType:\\n        return NotImplemented\\n    \\n    @__rdiv__.register\\n    def _(self, b: int, /) -> float:\\n        return __JS_FROM_OP__(  __JS_AS_NUMBER__(b), # type: ignore\\n                                \\\"/\\\",\\n                                __JS_GET_IVALUE__(self)) # type: ignore\\n    \\n    ### unary operators ###\\n\\n    def __neg__(self, /) -> float:\\n        return __JS_FROM_OPI__(\\\"-\\\", self) # type: ignore\\n    \\n    def __int__(self, /) -> int:\\n        return __JS_IRUN__('(x) => Math.trunc(x)', self) # type: ignore\\n    \\n    def __abs__(self, /) -> int:\\n         return __JS_IRUN__('(x) => Math.abs(x)', self) # type: ignore\";","import { BenchStats } from \"./BenchRunner\";\n\nfunction tformat(time: number, unit: string) {\n    return time.toFixed(3).padStart(7) + unit;\n}\n\nfunction tdiff(a: number, b: number) {\n\n    const c = a/b;\n\n    if( c === 1)\n        return \"   =   \";\n\n    if( c > 1 )\n        return \"x\" + c.toFixed(2).padStart(6);\n\n    return \"-\" + (-(100*a/b - 100)).toFixed(2).padStart(5) + \"%\";\n}\n\nexport default function printBenchStats(stats: BenchStats, base: BenchStats) {\n\n    //const nb_tokens = results.nb_tokens;\n    //const A = results[a];\n    //const B = results[b];\n    \n    let report = \"\";\n\n    /*\n    const nb_lines    = results.total_lines;\n    const nb_excluded = results.nb_excluded_lines;\n    const nb_done     = nb_lines - nb_excluded;\n\n//    report += \"Status         : SUCCESS\\n\";\n    report += `Tested         : ${nb_done}/${nb_lines} (${(nb_done/nb_lines*100).toFixed(2)}%)\\n`;*/\n\n    const nb_tokens = stats.stats.nbTokens;\n    report += `Py code: ${nb_tokens} tokens (${stats.stats.nbFiles} file)\\n`;\n    \n    report += \"JS code: \" + tdiff(stats.ctx.jscode?.length,\n                                  base.ctx.jscode?.length) + \"\\n\";\n    report += \"\\nTimes:\\n\"\n\n\n    const tcoef = 100_000 / nb_tokens / 1000;\n\n    for(let i = 0; i < stats.steps.length; ++i) {\n\n        const name = stats.steps[i].name;\n        const time = stats.steps[i].time;\n        const cmp  =  base.steps[i].time;\n\n        report += `- ${name.padEnd(7)}\\t`\n                    + tformat(time * tcoef, \"s\")\n                    + \" [\"\n                    + tdiff(time, cmp)\n                    + \"] \"\n                    + tformat(time, \"ms\")\n                    + \"\\n\";\n    }\n\n    return report;\n}","export default \"from functools import singledispatchmethod\\nfrom types     import NotImplementedType\\n\\nclass bool:\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_FROM_OPI__(self, \\\"==\\\", o) # type: ignore\\n\";","export default function mcall(o: unknown, name: string, ...args: unknown[]) {\n    // @ts-ignore\n    let fct = o[name];\n    if( fct === undefined)\n        // @ts-ignore\n        return o.prototype[name].call(...args);\n\n    // @ts-ignore\n    return o[name](...args);\n}"],"names":["type","__call__","args","factory","this","prototype","__new__","self","undefined","call","init","__init__","__eq__","b","lit","getClass","o","typename","constructor","Error","attr","singledispatchmethod","f","registered","dec","sf","name","register","uop","op","a","IVALUE","ka","console","warn","mapper","getJSType","Object","create","globalThis","__JS_SET_IVALUE__","fct","getOwnPropertyDescriptors","writable","slice","defaults","result","NotImplemented","kb","eq","assert","cond","brython_tests","search","URLSearchParams","location","test_name","get","merge","DEFAULT_COMPAT","createBench","bench","BenchRunner","addRunner","BryRunner","RBryRunner","addStep","runner","ctx","ast","parse","pycode","jscode","emit","loadAsFunction","_","addStat","$B","tokenizer","length","resetStats","printResult","target","base","textContent","printBenchStats","classList","add","errors","map","e","msg","message","join","run","pycodes","sbry_output","remove","bry_output","i","results","getStats","bry_js_output","Brython","sbry_js_output","RBrython","generateTestSuite","tests","fullcode","Array","id","configs","subtests","test_suites","subTestsStats","j","config","__SBRY_COMPAT__","code","filterCode","split","push","async","loadExcludeList","exclude_list","fetch","text","fromEntries","lines","exclude","filter","x","parseInt","loadTests","names","loadSubTests","parts","t","idx","trim","excl","nbEmptyLines","nbExcluded","code_len","excluded","total","list","l","find","v","isArray","window","onerror","log","document","querySelector","python_input","addEventListener","value","localStorage","setItem","ev","preventDefault","beg","selectionStart","end","selectionEnd","txt","preText","postText","pos","setSelectionRange","select","defaultOpt","Option","codes","indexOf","JSON","COMPAT","trimEnd","toggleAttribute","append","opts","initialRun","getItem","steps","runners","stats","r","time","context","performance","now","filename","parser","Parser","_PyPegen","run_parser","future","future_features","symtable","_PySymtable_Build","Runner","BrythonRunner","super","initialize","js_from_root","src","imported","js","Function","nodeType","node","$name","getOp","node2js","handler","Handlers","body","_inClass","prev","inClass","res","inCstrFct","binops","Add","Sub","Mult","Div","Pow","Mod","BitOr","BitAnd","LShift","RShift","cmpops","Eq","NotEq","uops","Invert","USub","Not","str","prefix","posonlyargs","arg","fct_str","Body","decorator_list","dnode","typehint","annotation","pprefix","test","targets","opname","left","right","func","m","ops","comparators","operand","qname","__class__","__qualname__","values","orelse","snode","iter","handlers","exc","builtin_pycode","int","require","float","bool","RBrythonRunner","Runners","getBrythonRunner","getRBrythonRunner","$RB","mcall","__JS_LOG__","Symbol","__JS_GET_IVALUE__","getStr","__JS_IRUN__","__JS_FROM__","eval","__JS_OP__","__JS_OPI__","__JS_AS_NUMBER__","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","__JS_AS_STRING__","__JS_FROM_OP__","__JS_FROM_OPI__","abs","range","Exception","tformat","unit","toFixed","padStart","tdiff","c","report","nb_tokens","nbTokens","nbFiles","tcoef","cmp","padEnd"],"sourceRoot":""}