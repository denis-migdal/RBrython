{"version":3,"file":"Benchmark/index.js","mappings":"iPAAA,wxB,iCCAA,6D,iCCAA,yL,iCCAA,+R,2BCAe,G,gFCMf,MAAMA,EAAY,EAEZC,EAAgB,CAClB,mBACA,UACA,WAYEC,EAAS,IAAIC,gBAAiBC,SAASF,QACvCG,EAAYH,EAAOI,IAAI,QAEvBC,EAAoC,SAAxBL,EAAOI,IAAI,SAEvBE,GADYN,EAAOI,IAAI,UACLJ,EAAOI,IAAI,WAAa,QAchD,SAASG,IAEL,MAAMC,EAAQ,IAAIC,EAAAA,EAElBD,EAAME,UAAW,UAAgBC,EAAAA,GACxBD,UAAU,WAAYE,EAAAA,GAE/BJ,EAAMK,QAAQ,SAAS,CAACC,EAAQC,KAC5BA,EAAIC,IAAMF,EAAOG,MAAMF,EAAIG,OAAO,IAE7BL,QAAQ,QAAS,CAACC,EAAQC,KAC/BA,EAAII,OAASL,EAAOM,KAAKL,EAAIC,IAAI,IAE5BH,QAAQ,QAAS,CAACC,EAAQC,KAC/BA,EAAIM,IAAMP,EAAOQ,eAAeP,EAAII,OAAO,IAG/C,IAAI,IAAII,EAAI,EAAGA,EAAIzB,IAAayB,EAC5Bf,EAAMK,QAAQ,UAAUU,KAAM,CAACC,EAAGT,KAAUA,EAAIM,KAAK,IAEzDb,EAAMiB,QAAQ,YAAaV,GAChBW,GAAGC,UAAUZ,EAAIG,OAAQ,KAAKU,SAEzCpB,EAAMiB,QAAQ,WAAYV,GACf,IAEXP,EAAMiB,QAAQ,iBAAkBV,IAC5B,MAAMc,EAAIC,EAAehC,EAEzB,OADAgC,EAAe,EACRD,CAAC,IAEZrB,EAAMiB,QAAQ,gBAAiBV,IAC3B,MAAMc,EAAIE,EAAcjC,EAExB,OADAiC,EAAc,EACPF,CAAC,IAGZ,IAAIC,EAAe,EACfC,EAAe,EAWnB,OARAC,IAAIC,OAAS,SAASC,KAChBJ,EACII,KACAH,CACV,EAEAvB,EAAM2B,aAEC3B,CACX,CAYA,SAAS4B,EAAaC,EACAC,EACEC,GAEpBF,EAAOG,aAAcC,EAAAA,EAAAA,GAAgBH,EAAQC,GAC7CF,EAAOK,UAAUC,IAAI,WACjBL,EAAOM,OAAOhB,OAAS,IACvBiB,QAAQC,KAAKR,EAAOM,QAEpBP,EAAOK,UAAUC,IAAI,SACrBN,EAAOG,aAAe,KAAOF,EAAOM,OAAOG,KAAKC,IAC5C,IAAIC,EAAMD,EAAEE,QAIZ,MAHY,KAARD,IAEAA,EAAMD,EAAEG,KAAK,IACVF,CAAG,IACXG,KAAK,MAGhB,CAEA,SAASC,EAAIC,GA5BTC,EAAYb,UAAUc,OAAO,QAAS,WACtCD,EAAYf,YAAc,GAE1BiB,EAAWf,UAAUc,OAAO,QAAS,WACrCC,EAAWjB,YAAc,GA4BzBhC,EAAM2B,aAGN,IAAI,IAAIZ,EAAI,EAAGA,EAAI+B,EAAQ1B,SAAUL,EACjCf,EAAMA,MAAM,CAACU,OAAQoC,EAAQ/B,KAEjC,MAAMmC,EAAUlD,EAAMmD,WAEC,IAAnBL,EAAQ1B,SACNgC,EAAapB,YAAckB,EAAQG,QAAQ9C,IAAIG,OAChD4C,EAActB,YAAckB,EAASG,QAAQ9C,IAAII,OAClD4C,EAAevB,YAAckB,EAAQM,SAASjD,IAAII,QAGtDiB,EAAYqB,EAAaC,EAAkB,QAAGA,EAAkB,UAChEtB,EAAYmB,EAAaG,EAAkB,SAAGA,EAAkB,QACpE,CAKA,SAASO,EAAkB9D,EAAmBE,GAE1C,IAAI6D,EAAkB,CAAC/D,GACL,YAAdA,IACA+D,EAAQnE,GAEZ,IAAIoE,EAAW,GACf,MAAMb,EAAU,IAAIc,MACpB,IAAIC,GAAM,EAEV,MAAMC,EAAU,CAAC,QAUV,IAAI,IAAI/C,EAAI,EAAGA,EAAI2C,EAAMtC,SAAUL,EAAG,CAEzC,MAAMgD,EAAWC,EAAYN,EAAM3C,IAClBkD,EAAcP,EAAM3C,IAErC,IAAI,IAAImD,EAAI,EAAGA,EAAIH,EAAS3C,SAAU8C,EAAG,GAEnCL,EAMF,IAAI,MAAMM,KAAUL,EAAS,CAEzBM,WAAWC,gBAAkBF,EAI7B,IAAIG,EAAOP,EAASG,GAEP,KAATI,IAGJA,EAAOC,EAAWD,GAEdzE,EAEA8D,GAAY,QAAQE,SADES,EAAKE,MAAM,MAAMjC,KAAIC,GAAK,OAAOA,MAAKI,KAAK,MACnB,YAAYiB,QAE1Df,EAAQ2B,KAAKH,GAErB,CACJ,CACJ,CAEA,OAAGzE,EACQ,CAAC8D,GAELb,CACX,CAEA4B,eAAeC,IACX,MAAMC,cAA4BC,MAAM,6BAA6BC,OACrE,OAAOC,OAAOC,YAAaJ,EAAaJ,MAAM,KAAKS,MAAM,GAAG1C,KAAIC,IAE5D,IAAI0C,EAAQ1C,EAAEgC,MAAM,MAChBW,EAAOD,EAAM,GAAGD,MAAM,GAEtBG,EAAUF,EAAMD,MAAM,GAAGI,QAAO7C,GAAc,MAATA,EAAE,IAA2B,IAAbA,EAAEpB,SAAcmB,KAAK+C,IAC1E,MAAM9C,EAAI8C,EAAEd,MAAM,KAClB,OAAiB,IAAbhC,EAAEpB,OACW,MAAToB,EAAE,GACKA,EAAE,GACN+C,SAAS/C,EAAE,IAEf,CAAC+C,SAAS/C,EAAE,IAAK+C,SAAS/C,EAAE,IAAI,IAG3C,MAAO,CAAC2C,EAAMC,EAAQ,IAE9B,CAEAV,eAAec,KAAaC,GAExB,MAAM/B,EAAkC,CAAC,EAEzC,IAAI,IAAI3C,EAAI,EAAGA,EAAI0E,EAAMrE,SAAUL,EAC/B2C,EAAM+B,EAAM1E,UAAY2E,EAAaD,EAAM1E,IAE/C,OAAO2C,CACX,CAEAgB,eAAegB,EAAa/F,EAAmByF,EAAUR,GAErD,MAAMN,cAAoBO,MAAM,qBAAqBlF,SAAiBmF,OAEtEb,EAActE,GAAa,GAE3B,MAAMgG,EAAQrB,EAAKE,MAAM,OAIzB,OAFAmB,EAAM,GAAKA,EAAM,GAAGV,MAAM,GAEnBU,EAAMpD,KAAK,CAACqD,EAAEC,KAEjB,IAAMX,EAAQU,EAAEpB,MAAM,MACtB,MAAMW,EAAQD,EAAM,GAAGY,OACvBZ,EAAM,GAAK,KAAOvF,EAAY,IAAMwF,EAAO,MAAQU,EAAI,GAAK,IAAMF,EAAMvE,OAAS,IAGjF,IAAI2E,EAAOX,EAFM,GAAGzF,KAAawF,UAGpBa,IAATD,IACAA,EAAOX,EAAQ,GAAGzF,QAEtBuF,EAAQG,EAAOH,EAAOa,GAEtB,IAAIE,EAAe,EACnB,IAAI,IAAIlF,EAAI,EAAGA,EAAImE,EAAM9D,SAAUL,EACR,KAApBmE,EAAMnE,GAAG+E,UACNG,EAEV,IAAIC,EAAa,EACjB,IAAI,IAAInF,EAAI,EAAGA,EAAImE,EAAM9D,SAAUL,EACX,MAAhBmE,EAAMnE,GAAG,KACwB,KAA7BmE,EAAMnE,GAAGkE,MAAM,GAAGa,SAChBG,IAEAC,GAId,IAAIC,EAAWjB,EAAM9D,OAAS,EAAI6E,EAOlC,OALAhC,EAActE,GAAW8E,KAAK,CAC1B2B,SAAUF,EACVG,MAAUF,IAGXA,IAAaD,EACL,GAEJhB,EAAMtC,KAAK,MAAQ,IAAI,GAEtC,CAEA,SAASyC,EAAOH,EAAiBoB,GAqB7B,OAnBAA,IAAS,GAEIpB,EAAM3C,KAAK,CAACgE,EAAGV,KACxBA,GAAY,OASLG,IARQM,EAAKE,MAAOC,GACb,MAANA,GAEAZ,IAAQY,MAER7C,MAAM8C,QAAQD,IAAMA,EAAE,IAAMZ,GAAOY,EAAE,IAAMZ,KAMxC,KAAKU,IACTA,IAIf,CA7RAI,OAAOC,QAAU,IAAIjE,KACpBN,QAAQwE,IAAIlE,EAAK,EAgSlB,MAAMsB,EAAqE,CAAC,EACtEW,QAAqBD,IACrBX,QAAqBwB,KAAajG,GAIjC0D,EAAc6D,SAASC,cAAgB,mBACxChE,EAAe+D,SAASC,cAAc,oBACtC3D,EAAe0D,SAASC,cAAgC,WAIxDxD,GAFgBuD,SAASC,cAAc,iBACvBD,SAASC,cAAc,QACvBD,SAASC,cAAc,aACtCzD,EAAewD,SAASC,cAAc,WAM7C3D,EAAa4D,iBAAiB,SAC1B,KACI,MAAM1C,EAAOlB,EAAa6D,MAC1BC,aAAaC,QAAQ,gBAAiB7C,GACtCzB,EAAI,CAACyB,GAAM,IAGnBlB,EAAa4D,iBAAiB,WAAYI,IAEtC,GAAe,QAAZA,EAAG9C,KAAgB,CACd8C,EAAGC,iBAEH,IAAIC,EAAMlE,EAAamE,eACnBC,EAAMpE,EAAaqE,aAEvB,MAAMC,EAAMtE,EAAa6D,MACnBU,EAAWD,EAAIzC,MAAM,EAAKqC,GAC1BM,EAAWF,EAAIzC,MAAMuC,EAAKE,EAAItG,QAEpCgC,EAAa6D,MAAQU,EAAU,OAASC,EAExC,MAAMC,EAAMP,EAAI,EAChBlE,EAAa0E,kBAAkBD,EAAKA,EACxC,KAGR,MAAME,EAASjB,SAASC,cAAiC,UAEnDiB,EAAa,IAAIC,OAAO,YAAQjC,GAAW,GAAM,GACvDgC,EAAWE,gBAAgB,YAC3BH,EAAOI,OAAQH,GAEf,IAAI,IAAI7C,KAAQiD,EAAAA,EACZL,EAAOI,OAAQ,IAAIF,OAAO9C,EAAMiD,EAAAA,EAAWjD,KAG/C,SAASZ,EAAWD,GAEhB,MAAM+D,EAAQ/D,EAAKE,MAAM,MACzB,IAAI,IAAI+B,EAAI,EAAGA,EAAI8B,EAAMjH,SAAUmF,EAAG,CAClC,MAAMV,EAAMwC,EAAM9B,GAAG+B,QAAQ,KACzBzC,GAAO,IAEI0C,KAAK9H,MAAO4H,EAAM9B,GAAGtB,MAAMY,EAAI,GAAGC,QACtC0C,SAAW1I,EAClBuI,EAAM9B,GAAK,IAAM8B,EAAM9B,GAEvB8B,EAAM9B,GAAK8B,EAAM9B,GAAGtB,MAAM,EAAGY,GAAK4C,UAC1C,CAEA,OAAOJ,EAAMzF,KAAK,KACtB,CAEAmF,EAAOf,iBAAiB,UAAU,KAE9B,MAAM1C,EAAOC,EAAWwD,EAAOd,OAE/B7D,EAAa6D,MAAQ3C,EACrB4C,aAAaC,QAAQ,gBAAiB7C,GACtCzB,EAAI,CAACyB,GAAM,IAIf,IAAI,IAAIvD,EAAI,EAAGA,EAAIxB,EAAc6B,SAAUL,EAAG,CAE1C,MAAMgD,EAAWC,EAAazE,EAAcwB,IAE5C,IAAI,IAAImD,EAAI,EAAGA,EAAIH,EAAS3C,SAAU8C,EAAG,CAErC,MAAMI,EAAOP,EAASG,GAEtB,GAAa,KAATI,EACA,SAEJ,MAAMa,EAAOb,EAAKW,MAAM,EAAIX,EAAKgE,QAAQ,OAEnCI,EAAO,IAAIT,OAAO9C,EAAMb,GAC9ByD,EAAQI,OAAQO,EACpB,CACJ,CAIA,MAAM1I,EAAQD,IACd,IAAI4I,EAGAA,EADc,aAAdhJ,EACaoF,OAAO6D,OAAOR,EAAAA,GACN,OAAdzI,EACM8D,EAAkB9D,EAAWE,GAE7B,CAACuD,EAAa6D,MAAQC,aAAa2B,QAAQ,kBAAoB,IAEhFhG,EAAK8F,G,wDCjbL,4H,iCCAA,MAMA,EANmB,CACf,uBAAwBG,EAAAA,KAAAA,EACxB,cAAmBA,EAAAA,KAAAA,EACnB,gBAAiBA,EAAAA,KAAAA,E,iCCHrB,k4F,gBCEe,SAASrI,EAAMC,EAAgBqI,GAE1C,MAAMC,EAAS,IAAI9H,GAAG+H,OAAOvI,EAAQqI,EAAU,QAEzCvI,EAAQU,GAAGgI,SAASC,WAAWH,GAC/BI,EAASlI,GAAGmI,gBAAgB7I,EAAKuI,GAGvC,MAAO,CACHA,WACArI,SACAF,MACA8I,SANWpI,GAAGqI,kBAAkB/I,EAAKuI,EAAUK,GAQvD,C,yBCde,MAAeI,GCEf,MAAMC,UAAsBD,EAEvCE,WAAAA,GACIC,QACAC,KAAKC,YACT,CAEAhH,GAAAA,CAAInC,GACAkJ,KAAK9I,eAAe8I,KAAKhJ,KAAKgJ,KAAKnJ,MAAMC,IAAzCkJ,EACJ,CAIA,IAAe,EACfC,UAAAA,GACI3I,GAAG4I,SAAa,GAAI5I,GAAG6I,YAAa3F,YAEpCwF,MAAK,GAAe,CACxB,CAGAnJ,KAAAA,CAAMC,GACF,OAAOD,EAAMC,EAAQ,IACzB,CACAE,IAAAA,CAAKJ,GAED,OAAOU,GAAG8I,aAAa,CAACxJ,IAAKA,EAAIA,IACT8I,SAAU9I,EAAI8I,SACdP,SAAUvI,EAAIuI,SACdkB,IAAUzJ,EAAIE,OACdoJ,cALpBA,IAK+BI,EAEvC,CACApJ,cAAAA,CAAeH,GAEX,OADAO,GAAG4I,SAAY,EAAI,CAAC,EACbK,SAAS,gBAAkBxJ,EACtC,ECxCG,MAAMyJ,EAETC,QAAAA,IAAY1H,GAGR,MAAM2H,EAAUV,KAAKW,UAAUC,QACzBC,OAAmBzE,IAAZsE,EACKA,EAAQI,KAAKd,QAASjH,GAEtB,IAAIiH,QAAQjH,GAExBgI,EAAOf,KAAKW,UAAUK,SAI5B,YAHa5E,IAAT2E,GACAA,EAAKD,KAAKD,KAAS9H,GAEhB8H,CACX,CACAI,MAAAA,CAAOC,GACH,OAAOlB,MAAQkB,CACnB,ECjBJ,MAAMC,EAAS,CACX,OAAW,MACX,OAAW,QACX,OAAW,MACX,QAAW,QAGR,SAASC,EAASC,GAErB,MAAMC,SAAkBD,EAExB,GAAiB,aAAbC,EAEA,OAAOd,EAGX,GAAiB,WAAbc,EAEA,OAAOD,EAAEvB,YAIb,MAAMyB,EAAY/G,WAAW2G,EAAOG,IACpC,QAAkBlF,IAAdmF,EACA,OAAOA,EAEX,MAAM,IAAIC,MAAM,WAAWF,wBAC/B,CC5BO,MAAMG,EAAiBC,SCuCxBC,EAAW,CACbC,GAAI,SAASV,GAAc,OAAOlB,MAAQkB,CAAE,GCzCzC,IAAIW,EAA+B,KAEnC,MAAMC,EAAaJ,SCQ1BlH,WAAW5C,IAAM,CAEbmK,GFTW,SAAYC,EAAYD,EAAYb,GAC/C,MAAMe,EAAKb,EAASY,GAEpB,QAAW5F,IAAP6F,EAEA,MADAxJ,QAAQC,KAAKsJ,EAAGD,GACV,IAAIP,MAAM,KAGpB,IAAIvK,EAAMgL,EAAGtB,UAAU,KAAKoB,OAE5B,QAAY3F,IAARnF,EAAoB,CACpB,GAAW,OAAP8K,EACA,OAASE,EAAGtB,UAAkB,OAAEG,KAAKkB,EAAGd,GAC9B,MAAVa,EAAG,KACH9K,EAAMgL,EAAGtB,UAAU,KAAKoB,EAAG1G,MAAM,cACzBe,IAARnF,IACAA,EAAM0K,EAASI,GACvB,CAEA,IAAI7J,EAASjB,EAAI6J,KAAKkB,EAAGd,GAEzB,GAAIhJ,IAAWuJ,EAAgB,CAE3B,MAAMS,EAAKd,EAASF,GACpB,QAAW9E,IAAP8F,EAEA,MADAzJ,QAAQC,KAAKwI,EAAG,IAAMa,GAChB,IAAIP,MAAM,KAIpBtJ,EADUgK,EAAGvB,UAAU,MAAMoB,OAChBjB,KAAKI,EAAGc,EACzB,CAEA,OAAO9J,CACX,EExBIiK,ICXW,SAAaJ,EAAWC,GAEnC,GAAW,QAAPD,EAEA,OAASC,EAGb,MAAMC,EAAKb,EAASY,GAEpB,QAAW5F,IAAP6F,EAEA,MADAxJ,QAAQC,KAAKsJ,EAAGD,GACV,IAAIP,MAAM,KAIpB,OADUS,EAAGtB,UAAU,KAAKoB,OACjBjB,KAAKkB,EACpB,EDJIlB,KEVW,SAAckB,KAAsCjJ,GAE3DA,EAAKA,EAAKvB,OAAO,KAAOsK,IACxB/I,EAAOA,EAAKsC,MAAM,GAAG,IAGzB,IAAIpE,EAAM+K,EAAEvB,SAEZ,QAAYrE,IAARnF,EAAoB,CAIpB,GAHAA,EAAM+K,OAGyB5F,IAA3BnF,EAAI0J,WAAWC,QAAwB,CACvC,MAAMM,EAAIE,EAASnK,GAAK0J,UAAUF,SAClC,QAAUrE,IAAN8E,EACA,OAAOA,EAAEJ,KAAK7J,KAAQ8B,EAE9B,CAEA,GCvBwBsI,EDuBZpK,GCrBoD,IAA7DkE,OAAOiH,0BAA0Bf,IAAIV,WAAW0B,SDsB/C,OAAO,IAAIpL,KAAO8B,EAC1B,CCzBW,IAAiBsI,ED2B5B,OAAOpK,KAAO8B,EAClB,EFbIuJ,MIbW,SAAejB,EAAY9F,KAAiBxC,GAOvD,OALIA,EAAKA,EAAKvB,OAAO,KAAOsK,IACxB/I,EAAOA,EAAKsC,MAAM,GAAG,SAIbe,IADFiF,EAAE9F,GAGD8F,EAAEV,UAAUpF,GAAMuF,QAAQ/H,GAG9BsI,EAAE9F,MAASxC,EACtB,EJCIlB,OKhBW,SAAgBC,GAC3B,IAAMA,EACF,MAAM,IAAI0J,MAAM,mBACxB,ELcIe,KMjBW,SAAclB,EAAQkB,GACjC,OAAOA,KAAQlB,EAERA,EAAEkB,GADElB,EAAEvB,YAAYyC,EAE7B,ENcIC,MDTG,WACH,GAAW,OAAPX,EACA,MAAO,CAAC,EACZ,MAAM9I,EAAO8I,EAEb,OADAA,EAAK,KACE9I,CACX,ECII0J,MDfG,SAAe1J,GAElB,OADA8I,EAAK9I,EACE+I,CACX,ECaIY,UOpBW,SAAmBnH,GAC9B,GAAa,OAATA,EACA,OAAOf,WAEX,MAAM,IAAIgH,MAAM,UAAUjG,cAC9B,GPsBAf,WAAWmI,IAAM,SAAUX,GAEvB,OADWZ,EAASY,GACVrB,UAAmB,QAAEG,KAAKkB,EACxC,EAGAxH,WAAWgG,KAAO,SAASwB,GACvB,OAAOZ,EAASY,EACpB,EAGAxH,WAAWiH,eAAiBA,EAG5BjH,WAAWoI,MAAQ,UAAUZ,GACzB,IAAI,IAAI7K,EAAI,EAAGA,EAAI6K,IAAK7K,QACdA,CACd,EAGAqD,WAAWqI,UAAY,SAAShK,GAC5B,MAAM,IAAI2I,MAAM3I,EACpB,EAUA2B,WAAWsI,WAAa,IAAI/J,IAASN,QAAQwE,OAAOlE,GAE7C,MAAMgK,EAASrB,SAGtBlH,WAAWwI,kBAAoB,CAACnC,EAAMhE,IAAMgE,EAAKkC,GAAUlG,EAE3DrC,WAAWyI,kBAAqBpC,GAASA,EAAKkC,GAG9CvI,WAAW0I,iBAAoB7B,GACjB,aAANA,GAA0B,QAANA,EACb8B,OAAOC,kBACR,cAAN/B,GAA2B,SAANA,EACd8B,OAAOE,kBACXF,OAAQ9B,GAInB7G,WAAW8I,iBAAoBjC,GAAe,GAAGA,IQxEjD,MAEA,EAF0C,CAAC,ECJpC,SAASkC,EAASC,GAErB,OAAOA,EAAK1D,YAAY2D,KAC5B,CAEO,SAASC,EAAM3B,GAElB,OAAOA,EAAGjC,YAAY2D,KAC1B,CCNO,SAASE,EAAQH,GAEpB,MAAMI,EAAUC,EAASN,EAASC,IAElC,QAAgBpH,IAAZwH,EAEA,MADAnL,QAAQC,KAAK8K,GACP,IAAIhC,MAAM,aAAa+B,EAASC,iBAG1C,OAAOI,EAAQJ,EACnB,CCXe,WAASM,EAAgBC,GAAW,GAG/C,MAAMC,EAAOxJ,WAAWyJ,QAExBzJ,WAAWyJ,QAAUF,EAErB,IAAIG,EAAM,GACV,IAAI,IAAI/M,EAAI,EAAGA,EAAI2M,EAAKtM,SAAUL,EAC9B+M,GAAOP,EAAQG,EAAK3M,IAAM,MAK9B,OAFAqD,WAAWyJ,QAAUD,EAEdE,CACX,CCbA1J,WAAW2J,WAAY,ECWhB,MAAMC,EAAS,CAClBC,IAAM,MACNC,IAAM,MACNC,KAAM,MACNC,IAAM,MACNC,IAAM,MACNC,IAAM,MAENC,MAAO,KACPC,OAAQ,MACRC,OAAQ,SACRC,OAAQ,UCvBCC,EAAyD,CAAC,ECiBjEC,EAAS,CACXC,GAAO,KACPC,MAAO,MCPLC,EAAO,CACTC,OAAQ,SACRC,KAAM,MAINC,IAAK,OCnBTzB,EAAmB,SLIJ,SAAkBL,GAC7B,MAAMjI,EAAOiI,EAAKjI,KACZuI,EAAON,EAAKM,KAGlB,IAAIyB,EAAM,cAAchK,iCACTA,2CACgBA,uDAEPA,WAMxB,IAFqC,IAAtBiI,EAAKgC,MAAMhO,SAAgB,CAAC,SAAU,SAAU,UAAW,UAAUiO,SAASjC,EAAKgC,MAAM,GAAGvL,MAE5FuJ,EAAKgC,MAAMhO,QAAU,EAAG,CACnC+N,GAAO,GAAGhK,+BAAkCoI,EAAQH,EAAKgC,MAAM,oBAE/D,IAAI,IAAIrO,EAAI,EAAGA,EAAIqM,EAAKgC,MAAMhO,SAAUL,EAEpCoO,GAAO,iBAAiBhK,gBAAmBoI,EAAQH,EAAKgC,MAAMrO,kBAGlEoO,GAAO,GAAGhK,6BAAgCA,MAC9C,CAEA,IAAI,IAAIpE,EAAI,EAAGA,EAAI2M,EAAKtM,SAAUL,EAEjB,gBADAoM,EAASO,EAAK3M,MAGvBqD,WAAW2J,WAAY,EAOvBoB,GAAO,GALuB,MAAjBzB,EAAK3M,GAAGoE,KACH,GAEA,GAAGA,eAAkBuI,EAAK3M,GAAGoE,YAE5BoI,EAAQG,EAAK3M,oBAGhCqD,WAAW2J,WAAY,GAS/B,OALAoB,GAAO,oBACMhK,sBAINgK,CACX,EKnDA1B,EAAsB,YCDP,SAAqBL,GAChC,MAAMjI,EAAOiI,EAAKjI,KAEZuI,EAAON,EAAKM,KAGlB,IAAI4B,EAASlL,WAAWyJ,QAAU,GAAK,YAEnClL,EAAO,GAEP5B,EAAI,EACJwO,EAAa,EACb9E,EAAO,GAEX,GAAIrG,WAAWyJ,SAAWzJ,WAAW2J,UAAY,CAE7C,IAAIyB,EAAW,GACXpC,EAAKzK,KAAK8M,YAAYrO,OAEtBoO,EAAWpC,EAAKzK,KAAK8M,YAAY,GAAGC,KAGpCF,EAAWpC,EAAKzK,KAAKA,KAAK,GAAG+M,MAC3BH,GAIN9E,EAAO,SAAS+E,cACdzO,CACN,CAEA,KAAOA,EAAIqM,EAAKzK,KAAK8M,YAAYrO,SAAUL,EAKvC4B,GAAQ,GAAGyK,EAAKzK,KAAK8M,YAAY1O,GAAG2O,QAGxC,IADA3O,EAAIwO,EACGxO,EAAIqM,EAAKzK,KAAKA,KAAKvB,SAAUL,EAKhC4B,GAAQ,IAAIyK,EAAKzK,KAAKA,KAAK5B,GAAG2O,QAElC,GAAItC,EAAKzK,KAAKA,KAAKvB,OAAS,CAExBuB,GAAQ,IACR,IAAK,IAAI5B,EAAIwO,EAAaxO,EAAIqM,EAAKzK,KAAKA,KAAKvB,SAAUL,EAEnD4B,GAAQ,GAAGyK,EAAKzK,KAAKA,KAAK5B,GAAG2O,UAAUtC,EAAKzK,KAAKA,KAAK5B,GAAG2O,QAE7D/M,GAAQ,iBACZ,CAQA,IAAIgN,EAAU,GAAGL,IAASnK,KAAQxC,iBAC5B8H,cACAmF,EAAKlC,YAGX,GAAmC,IAA/BN,EAAKyC,eAAezO,OACpB,OAAOuO,EAEX,MAAMG,EAAQ1C,EAAKyC,eAAe,GAGlC,OAAIzL,WAAWyJ,QAEJ,wCACc1I,OAAUoI,EAAQuC,eAAmBH,iBAIvD,GAAGpC,EAAQuC,MAAUH,IAChC,ED7EAlC,EAAiB,OENF,SAAgBL,GAC3B,IAAIzK,EAAO,GAGX,IAAI,IAAI5B,EAAI,EAAGA,EAAIqM,EAAKzK,KAAK8M,YAAYrO,SAAUL,EAE/C4B,GAAQyK,EAAKzK,KAAK8M,YAAY1O,GAAG2O,IAAM,KAG3C,MAAO,IAAI/M,kBAAqB4K,EAAQH,EAAKM,QACjD,EFDAD,EAAiB,OGTF,SAAgBL,GAC3B,MAAO,cAAcG,EAAQH,EAAK2C,QACtC,EHUAtC,EAAe,KIbA,SAAcL,GACzB,MAAO,EACX,EJcAK,EAAiB,OKfF,SAAgBL,GAC3B,MAAO,UAAWG,EAAQH,EAAKnG,QACnC,ELiBAwG,EAAiB,OMnBF,SAAgBL,GAE3B,IAAIU,EAAM,GAGV,MAAMwB,EAASlL,WAAWyJ,QAAU,UAAY,OAEhD,IAAI,IAAI9M,EAAI,EAAGA,EAAIqM,EAAK4C,QAAQ5O,SAAUL,EACtC+M,GAAO,GAAGwB,IAAS/B,EAAQH,EAAK4C,QAAQjP,OAE5C+M,GAAOwB,EAAS/B,EAAQH,EAAK4C,QAAQ,IAAM,MAC3C,IAAI,IAAIjP,EAAI,EAAGA,EAAIqM,EAAK4C,QAAQ5O,SAAUL,EACtC+M,GAAOP,EAAQH,EAAK4C,QAAQjP,IAAM,MAEtC,OAAO+M,EAAMP,EAAQH,EAAKnG,MAC9B,ENOAwG,EAAoB,UOtBL,SAAUL,GACrB,MAAO,YAAYG,EAAQH,EAAKnG,YAAYmG,EAAKjB,QACrD,EPuBAsB,EAAoB,UQvBL,SAAmBL,GAE9B,MAAMxB,EAAKwB,EAAKvL,OACV8J,EAAK2B,EAAMF,EAAKzB,IAChBb,EAAKsC,EAAKnG,MAEVgJ,EAASjC,EAAOrC,GACtB,QAAe3F,IAAXiK,EACA,MAAM,IAAI7E,MAAM,SAASO,cAE7B,MAAO,GAAG4B,EAAQ3B,eAAe2B,EAAQ3B,SAASqE,OAAY1C,EAAQzC,KAC1E,EReA2C,EAAgB,MJ3BD,SAASL,GACpB,MAAMxB,EAAIwB,EAAK8C,KACTpF,EAAIsC,EAAK+C,MACTxE,EAAK2B,EAAMF,EAAKzB,IAEhBsE,EAASjC,EAAOrC,GACtB,QAAe3F,IAAXiK,EACA,MAAM,IAAI7E,MAAM,SAASO,cAE7B,MAAO,UAAU4B,EAAQ3B,QAAQqE,OAAY1C,EAAQzC,KACzD,EIoBA2C,EAAe,KH5BA,SAAcL,GACzB,MAAMgD,EAAWhD,EAAKiD,KAChB1N,EAAWyK,EAAKzK,KAChB2N,EAAWlD,EAAKkD,SAGtB,GAAIF,EAAEvM,MAAM8K,EAER,OAAOA,EAAOyB,EAAEvM,OAAQuJ,EAAKzK,MAGjC,IAAIwM,EAAM,GACV,IAAI,IAAIpO,EAAI,EAAGA,EAAI4B,EAAKvB,SAAUL,EAC9BoO,GAAO5B,EAAQ5K,EAAK5B,IAAM,KAE9B,GAAIuP,EAASlP,OAAS,CAClB+N,GAAO,cACH,IAAK,IAAIpO,EAAI,EAAGA,EAAIuP,EAASlP,SAAUL,EAEnCoO,GAAO,GAAGmB,EAASvP,GAAG2O,QAAQnC,EAAQ+C,EAASvP,GAAGkG,UAC1DkI,GAAO,IACX,CAEA,GAAoB,cAAhBhC,EAASiD,GAAoB,CAC7B,MAAMG,EAAIH,EACV,MAAO,aAAa7C,EAAQgD,EAAEtJ,YAAYsJ,EAAEpE,UAAUgD,KAC1D,CAEA,MAAO,YAAY5B,EAAQ6C,OAAOjB,IACtC,EGEA1B,EAAkB,QFjCH,SAAiBL,GAE5B,MAAMxB,EAAIwB,EAAK8C,KACTvE,EAAK2B,EAAMF,EAAKoD,IAAI,IACpB1F,EAAKsC,EAAKqD,YAAY,GAE5B,GAAW,OAAP9E,EAAc,MAAO,GAAG4B,EAAQ3B,UAAU2B,EAAQzC,KAEtD,MAAMmF,EAASrB,EAAOjD,GACtB,QAAe3F,IAAXiK,EAEA,MADA5N,QAAQC,KAAKqJ,GACP,IAAIP,MAAM,SAASO,cAG7B,MAAO,UAAU4B,EAAQ3B,QAAQqE,OAAY1C,EAAQzC,KACzD,EEqBA2C,EAAkB,QDpCH,SAASL,GAEpB,MAAMxB,EAAIwB,EAAKsD,QACT/E,EAAK2B,EAAMF,EAAKzB,IAEhBsE,EAASlB,EAAKpD,GACpB,QAAe3F,IAAXiK,EACA,MAAM,IAAI7E,MAAM,WAAWO,cAE/B,MAAO,YAAYsE,OAAY1C,EAAQ3B,KAC3C,EC6BA6B,EAAmB,SSzCJ,SAAkBL,GAEzB,MAAMhD,SAAcgD,EAAKnG,MAEzB,GAAa,WAATmD,EAAmB,CAEnB,MAAMuG,EAAQvD,EAAKnG,MAAM2J,UAAUC,aAE7B5J,EAAsBmG,EAAKnG,MAAMA,MAEvC,GAAc,UAAV0J,EAAsB,MAAO,GAAG1J,IACpC,GAAc,QAAV0J,EAAsB,MAAO,GAAG1J,KACpC,GAAc,aAAV0J,EAAsB,MAAO,MAErC,CACA,GAAa,WAATvG,EAAoB,MAAO,IAAIgD,EAAKnG,SACxC,GAAa,WAATmD,EAAoB,MAAO,GAAGgD,EAAKnG,SACvC,GAAa,YAATmD,EAAoB,MAAO,GAAGgD,EAAKnG,QAGvC,MADA5E,QAAQC,KAAK8K,EAAMhD,GACb,IAAIgB,MAAM,gBAAgBhB,IACxC,ETuBAqD,EAAe,KU3CA,SAAcL,GACzB,OAAOG,EAAQH,EAAKnG,MACxB,EV4CAwG,EAAe,KW/CA,SAAcL,GACzB,OAAOA,EAAKvJ,EAChB,EXgDA4J,EAAoB,UYhDL,SAAmBL,GAE9B/K,QAAQC,KAAK8K,GAEb,IAAIU,EAAM,IACV,IAAI,IAAI/M,EAAI,EAAGA,EAAIqM,EAAKxE,OAAOxH,SAAUL,EAAG,CACxC,MAAMkG,EAAQmG,EAAKxE,OAAO7H,GAKtB+M,GAFS,aAFCX,EAASlG,GAIZA,EAAMA,MAGN,MAAMsG,EAAQtG,EAAMA,SAEnC,CAEA,OADA6G,GAAO,IACAA,CACX,EZgCAL,EAAa,GalDE,SAAYL,GAEvB,IAAI+B,EAAM,OAAO5B,EAAQH,EAAK2C,sBACvBH,EAAKxC,EAAKM,eAGjB,IAAI,IAAI3M,EAAI,EAAGA,EAAIqM,EAAK0D,OAAO1P,SAAUL,EAAG,CACxC,MAAMgQ,EAAQ3D,EAAK0D,OAAO/P,GAItBoO,GADS,OAFAhC,EAAS4D,GAGX,QAAUxD,EAAQwD,GAElB,UAAUxD,EAAQwD,MACjC,CAEA,OAAO5B,CACX,EboCA1B,EAAgB,MctDD,SAAeL,GAE1B,MAAO,UAAUG,EAAQH,EAAK2C,sBACxBH,EAAKxC,EAAKM,cAGpB,EdmDAD,EAAc,IezDC,SAAaL,GACxB,MAAO,OAAOG,EAAQH,EAAKvL,cAAc0L,EAAQH,EAAK4D,oBAChDpB,EAAKxC,EAAKM,cAEpB,EfwDAD,EAAc,IgB7DC,SAAaL,GAExB,MAAO,kBACDwC,EAAKxC,EAAKM,iCAGRkC,EAAKxC,EAAK6D,SAAS,GAAGvD,cAGlC,EhBuDAD,EAAgB,MiB/DD,SAAeL,GAE1B,IAAItL,EAAS,IAGbA,GAAU,sBAAsByL,EAAQH,EAAK8D,kBAG7C,IAAI,IAAInQ,EAAI,EAAGA,EAAIqM,EAAK+D,MAAM/P,OAAQ,IAAKL,EAC7B,IAANA,IACAe,GAAU,SAEdA,GAAU,kBAAkBsL,EAAK+D,MAAMpQ,GAAGqQ,QAAQC,IAAIxN,uBAE9C+L,EAAKxC,EAAK+D,MAAMpQ,GAAG2M,mBAU/B,OAPA5L,GAAU,uBAEE8N,EAAKxC,EAAK+D,MAAM/D,EAAK+D,MAAM/P,OAAO,GAAGsM,eAGjD5L,GAAU,IAEHA,CACX,EjByCA2L,EAAmB,SkBpEJ,SAAkBL,GAC7B,MAAO,WACX,ElBqEAK,EAAgB,MmBvED,SAAeL,GAC1B,MAAO,QACX,EnBwEAK,EAAgB,MoBzED,SAAeL,GAC1B,MAAO,SAASG,EAAQH,EAAKkE,OACjC,EpB0EA7D,EAAqB,WqB5EN,SAAoBL,GAG/B,MAAMmE,EAASnE,EAAKmE,OAEpB,GAAe,QAAXA,EACA,MAAO,GAEX,GAAe,UAAXA,GAAiC,WAAXA,EACtB,MAAO,GACX,GAAe,cAAXA,EAEA,OADAlP,QAAQC,KAAK,8BACN,GAEX,IAAIwL,EAAM,UAGV,IAAI,IAAI/M,EAAI,EAAGA,EAAIqM,EAAK3H,MAAMrE,SAAUL,EAEpC+M,GAAO,GAAGV,EAAK3H,MAAM1E,GAAGoE,QAE5B,OAAO2I,EAAM,sBAAsByD,KACvC,ErByDA9D,EAAiB,OsBhFF,SAAgBL,GAG3B,MAAMmE,EAASnE,EAAK3H,MAAM,GAAGN,KAE7B,MAAe,QAAXoM,EACO,GAEJ,SAASA,sBAA2BA,KAC/C,ECPA5C,EAAO6C,aAAe,IAAI7O,KAEtB,IAAIb,EAAS,8CAKb,IAAI,IAAIf,EAAI,EAAGA,EAAI4B,EAAK,GAAG8O,KAAKrQ,SAAUL,EAEtCe,GAAU,GAAGyL,EAAQ5K,EAAK,GAAG8O,KAAK1Q,QAAQwM,EAAQ5K,EAAK,GAAGiG,OAAO7H,OAiBrE,OAdAe,GAAU,yTAcHA,CAAM,EAGjB6M,EAAO+C,aAAgBpN,GAEZA,EAAK2C,MAEhB0H,EAAOgD,UAAe,IAAIhP,IAEH,IAAhBA,EAAKvB,OAEG,GAAGuB,EAAK,GAAGsE,QAAQsG,EAAQ5K,EAAK,MAIpC,GAAG4K,EAAQ5K,EAAK,OAAOA,EAAK,GAAGsE,SAASsG,EAAQ5K,EAAK,MAQhEgM,EAAOiD,WAAgB,IAAIjP,KAEvB,MAAO,IAPOwM,EAOMxM,EAAK,GAAGsE,MANtBkI,EAAI0C,WAAW,QAAS,UAMSlP,EAAKsC,MAAM,GAAG1C,KAAIC,GAAG+K,EAAQ/K,KAAII,KAAK,QAPjF,IAAkBuM,CAOsE,ECvDxF,SACI2C,IAAOhJ,EAAAA,KAAAA,EACPiJ,MAAOjJ,EAAAA,KAAAA,EACPkJ,KAAOlJ,EAAAA,KAAAA,EACPqG,IAAOrG,EAAAA,IAAAA,GCKI,MAAMmJ,UAAuBzI,EAExCE,WAAAA,GACIC,QACAC,KAAKC,YACT,CAEAhH,GAAAA,CAAInC,GACAkJ,KAAK9I,eAAe8I,KAAKhJ,KAAKgJ,KAAKnJ,MAAMC,IAAzCkJ,EACJ,CAIA,IAAe,EACfC,UAAAA,GACI,IAAI,IAAI1E,KAAQ+M,EACZtI,KAAK/G,IAAIqP,EAAS/M,IAEtByE,MAAK,GAAe,CACxB,CAGAnJ,KAAAA,CAAMC,GACF,OAAOD,EAAMC,EAAQ,IACzB,CACAE,IAAAA,CAAKJ,GACD,OC3BO,SAAcA,GACzB,OAAOoP,EAAKpP,EAAIA,IAAIkN,KACxB,CDyBe9M,CAAKJ,EAChB,CACAM,cAAAA,CAAeH,GACX,OAAOwJ,SAAS,gBAAkBxJ,EACtC,EEpCW,MAAMwR,EACjB,uBAAOC,GACH,OAAO,IAAI3I,CACf,CACA,wBAAO4I,GACH,OAAO,IAAIJ,CACf,ECPG,MAAO9R,EAAYgS,EAASC,mBACtBhS,EAAa+R,EAAQE,mB,iCCYnB,MAAMpS,EAERqS,MAAyF,GACzFC,QAA4C,GAC1CC,MAAqE,GAEhFvR,OAAAA,CAAQkE,EAActE,GAClB+I,KAAK4I,MAAM/N,KAAK,CAACU,OAAMtE,OAC3B,CAEAX,SAAAA,CAAUiF,EAAc7E,GAEpB,OADAsJ,KAAK2I,QAAQ9N,KAAK,CAACU,OAAM7E,WAClBsJ,IACX,CACAvJ,OAAAA,CAAQ8E,EAActE,GAElB,OADA+I,KAAK0I,MAAM7N,KAAK,CAACU,OAAMtE,QAChB+I,IACX,CAEA,GAAgC,KAChCjI,UAAAA,GACIiI,MAAK,EAAW,CAAC,EACjB,IAAI,IAAI6I,EAAI,EAAGA,EAAI7I,KAAK2I,QAAQnR,SAAUqR,EAAG,CACzC7I,MAAK,EAASA,KAAK2I,QAAQE,GAAGtN,MAAQ,CAClCmN,MAAQ,IAAI1O,MAAMgG,KAAK0I,MAAMlR,QAC7Bb,IAAQ,CAAC,EACT6B,OAAQ,GACRoQ,MAAQ,CAAC,GAEb,IAAI,IAAIzR,EAAI,EAAGA,EAAI6I,KAAK0I,MAAMlR,SAAUL,EACpC6I,MAAK,EAASA,KAAK2I,QAAQE,GAAGtN,MAAMmN,MAAMvR,GAAK,CAC3CoE,KAAMyE,KAAK0I,MAAMvR,GAAGoE,KACpBuN,KAAM,GAEd,IAAI,IAAI3R,EAAI,EAAGA,EAAI6I,KAAK4I,MAAMpR,SAAUL,EACpC6I,MAAK,EAASA,KAAK2I,QAAQE,GAAGtN,MAAMqN,MAAM5I,KAAK4I,MAAMzR,GAAGoE,MAClD,CACd,CACJ,CACAhC,QAAAA,GACI,OAAOyG,MAAK,CAChB,CAEA5J,KAAAA,CAAMO,GAEoB,OAAlBqJ,MAAK,GACLA,KAAKjI,aAKT,MAAMuB,EAAU0G,MAAK,EAErB,IAAI,IAAI6I,EAAI,EAAGA,EAAI7I,KAAK2I,QAAQnR,SAAUqR,EAAG,CACzC,MAAMnS,EAASsJ,KAAK2I,QAAQE,GAAGnS,OACzBwB,EAASoB,EAAQ0G,KAAK2I,QAAQE,GAAGtN,MACjCwN,EAAU7Q,EAAOvB,IAAM,IAAIA,GAEjC,IAEI,IAAI,IAAIQ,EAAI,EAAGA,EAAI6I,KAAK0I,MAAMlR,SAAUL,EAAG,CAEvC,MAAMqP,EAAIxG,KAAK0I,MAAMvR,GAAGF,IAElByG,EAAMsL,YAAYC,MACxBzC,EAAE9P,EAAQqS,GACV,MAAMnL,EAAMoL,YAAYC,MAExB/Q,EAAOwQ,MAAMvR,GAAG2R,MAAQlL,EAAMF,CAClC,CAEA,IAAI,IAAIvG,EAAI,EAAGA,EAAI6I,KAAK4I,MAAMpR,SAAUL,EACpCe,EAAO0Q,MAAM5I,KAAK4I,MAAMzR,GAAGoE,OAASyE,KAAK4I,MAAMzR,GAAGF,IAAI8R,EAG9D,CAAE,MAAMnQ,GACJV,EAAOM,OAAOqC,KAAMjC,EACxB,CACJ,CACJ,E,gBC5FJ,SAASsQ,EAAQJ,EAAcK,GAC3B,OAAOL,EAAKM,QAAQ,GAAGC,SAAS,GAAKF,CACzC,CAEA,SAASG,EAAMtH,EAAWd,GAEtB,MAAMqI,EAAIvH,EAAEd,EAEZ,OAAU,IAANqI,EACO,UAEPA,EAAI,EACG,IAAMA,EAAEH,QAAQ,GAAGC,SAAS,GAEhC,OAAS,IAAIrH,EAAEd,EAAI,MAAMkI,QAAQ,GAAGC,SAAS,GAAK,GAC7D,CAEe,SAAShR,EAAgBuQ,EAAmBzQ,GAEvD,IAAIqR,EAAS,GAUb,MAAMC,EAASb,EAAMA,MAAMc,cAAgBd,EAAMA,MAAMe,aACvD,IAAIC,EAAcH,EAASb,EAAMA,MAAMc,cACL,IAA9Bd,EAAMA,MAAMc,gBACZE,EAAc,GAElB,MAAMC,EAAYjB,EAAMA,MAAMkB,SAC9BN,GAAU,YAAYC,KAAUb,EAAMA,MAAMc,kBAAgC,IAAZE,QAChEJ,GAAU,YAAYK,aAAqBjB,EAAMA,MAAMmB,kBAEvDP,GAAU,YAAcF,EAAMV,EAAMjS,IAAII,QAAQS,OAClBW,EAAKxB,IAAII,QAAQS,QAAU,KACzDgS,GAAU,aAGV,MAAMQ,EAAQ,IAAUH,EAAY,IAEpC,IAAI,IAAI1S,EAAI,EAAGA,EAAIyR,EAAMF,MAAMlR,SAAUL,EAAG,CAExC,MAAMoE,EAAOqN,EAAMF,MAAMvR,GAAGoE,KACtBuN,EAAOF,EAAMF,MAAMvR,GAAG2R,KACtBmB,EAAQ9R,EAAKuQ,MAAMvR,GAAG2R,KAE5BU,GAAU,KAAKjO,EAAK2O,OAAO,OACbhB,EAAQJ,EAAOkB,EAAO,KACtB,KACAV,EAAMR,EAAMmB,GACZ,KACAf,EAAQJ,EAAM,MACd,IAClB,CAEA,OAAOU,CACX,C,iDC/DA,+oL","sources":["webpack://sbrython/./src/rbry/corelib/str.py?c666","webpack://sbrython/./src/tests/py/core/float/op.py?823d","webpack://sbrython/./src/rbry/corelib/bool.py?6bfe","webpack://sbrython/./src/tests/py/kernel/match/classes.py?9c02","webpack://sbrython/./src/pages/Benchmark/index.html","webpack://sbrython/./src/pages/Editor/index.ts","webpack://sbrython/./src/tests/py/core/int/op.py?1c5a","webpack://sbrython/./src/tests/index.ts","webpack://sbrython/./src/rbry/corelib/float.py?73a7","webpack://sbrython/./src/rbry/parser/index.ts","webpack://sbrython/./src/rbry/engines/interface.ts","webpack://sbrython/./src/rbry/engines/Brython/index.ts","webpack://sbrython/./src/rbry/runlib/tmp_corelib/type.ts","webpack://sbrython/./src/rbry/runlib/helpers/getClass.ts","webpack://sbrython/./src/rbry/runlib/tmp_corelib/NotImplemented.ts","webpack://sbrython/./src/rbry/runlib/interface/op.ts","webpack://sbrython/./src/rbry/runlib/interface/KW.ts","webpack://sbrython/./src/rbry/runlib/index.ts","webpack://sbrython/./src/rbry/runlib/interface/uop.ts","webpack://sbrython/./src/rbry/runlib/interface/call.ts","webpack://sbrython/./src/rbry/runlib/helpers/isClass.ts","webpack://sbrython/./src/rbry/runlib/interface/mcall.ts","webpack://sbrython/./src/rbry/runlib/interface/assert.ts","webpack://sbrython/./src/rbry/runlib/interface/attr.ts","webpack://sbrython/./src/rbry/runlib/interface/getModule.ts","webpack://sbrython/./src/rbry/emitter/handlers/index.ts","webpack://sbrython/./src/rbry/ast/index.ts","webpack://sbrython/./src/rbry/emitter/node2js.ts","webpack://sbrython/./src/rbry/emitter/handlers/Body.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/ClassDef.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/BinOp.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Call.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Compare.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/UnaryOp.ts","webpack://sbrython/./src/rbry/emitter/handlers/list.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/FunctionDef.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/Lambda.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Assert.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Pass.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Return.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Assign.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Attribute.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/AugAssign.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Constant.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Expr.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Name.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/JoinedStr.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/If.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/While.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/For.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/Try.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/Match.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Continue.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Break.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Raise.ts","webpack://sbrython/./src/rbry/emitter/handlers/imports/ImportFrom.ts","webpack://sbrython/./src/rbry/emitter/handlers/imports/Import.ts","webpack://sbrython/./src/rbry/engines/RBrython/macros.ts","webpack://sbrython/./src/rbry/engines/RBrython/builtins.ts","webpack://sbrython/./src/rbry/engines/RBrython/index.ts","webpack://sbrython/./src/rbry/emitter/index.ts","webpack://sbrython/./src/rbry/engines/index.ts","webpack://sbrython/./src/pages/Editor/utils/engine.ts","webpack://sbrython/./src/pages/Editor/utils/BenchRunner.ts","webpack://sbrython/./src/pages/Editor/utils/printBenchStats.ts","webpack://sbrython/./src/rbry/corelib/int.py?263f"],"sourcesContent":["export default \"from types     import NotImplementedType\\nfrom RBM import __JS_OP__, string\\n\\nclass str(string):\\n    def __new__(cls, o: object, /) -> str:\\n        return __JS_AS_STRING__(o) # type: ignore\\n        #return type(o).__str__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)\\n\\n    def __mul__(self, o: object, /) -> NotImplementedType|str:\\n        match o:\\n            case int  (): return __JS_WRITE__(\\\"self.repeat(Number(b))\\\") # type: ignore\\n            case _      : return NotImplemented\\n    \\n    def __rmul__(self, o: object, /) -> NotImplementedType|str:\\n        match o:\\n            case int  (): return __JS_WRITE__(\\\"self.repeat(Number(b))\\\") # type: ignore\\n            case _      : return NotImplemented\";","export default \"assert 3 * 3.75 / 1.5 == 7.5\\nassert 7.0 / 2 == 3.5\";","export default \"from RBM import __JS_OP__, boolean\\n\\nclass bool(boolean): # type: ignore (bool is Final)\\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)\";","export default \"def test(o: object, /):\\n    match o:\\n        case bool (): return \\\"bool\\\"\\n        case int  (): return \\\"int\\\"\\n        case float(): return \\\"float\\\"\\n        case _      : return \\\"unknown\\\"\\n\\nassert test(1)    == \\\"int\\\"\\nassert test(1.)   == \\\"float\\\"\\nassert test(True) == \\\"bool\\\"\";","export default __webpack_public_path__ + \"Benchmark/index.html\";","import BenchRunner, { BenchStats } from \"./utils/BenchRunner\";\nimport { BryEngine, RBryEngine } from \"./utils/engine\";\nimport printBenchStats from \"./utils/printBenchStats\";\n\nimport test_suite from \"../../tests\";\n\nconst NB_REPEAT = 3;\n\nconst brython_tests = [\n    'basic test suite',\n    'numbers',\n    \"classes\" // ~726\n//    \"strings\",\n//    \"string methods\"\n];\n// strings ~616\n// list    ~345\n// dicts   ~205\n// sets    ~224\n// bytes   ~229\n\n// generators ~972...\n\nconst search = new URLSearchParams( location.search );\nconst test_name = search.get(\"test\");\n//const merge     = __SBRY_MODE__ === \"test\"; // Benchmark\nconst merge     = search.get(\"merge\") === \"true\" ? true : false;\nconst parser    = search.get(\"parser\") === \"false\" ? false : true;\nconst DEFAULT_COMPAT = (search.get(\"compat\") ?? \"NONE\") as typeof __SBRY_COMPAT__;\n\n////////////////////////////////////////////////////////////////:\n\nwindow.onerror = (...args) => {\n\tconsole.log(args);\n\t// msg\n\t// stack\n\t// \n}\n\n// ==================================================================\n\n// benchmark configuration...\nfunction createBench() {\n\n    const bench = new BenchRunner();\n\n    bench.addEngine( \"Brython\"    ,  BryEngine)\n            .addEngine(\"RBrython\", RBryEngine);\n\n    bench.addStep(\"parse\", (engine, ctx) => {\n        ctx.ast = engine.parse(ctx.pycode);\n    })\n            .addStep(\"emit\",  (engine, ctx) => {\n        ctx.jscode = engine.emit(ctx.ast);\n    })\n            .addStep(\"load\",  (engine, ctx) => {\n        ctx.fct = engine.loadAsFunction(ctx.jscode);\n    });\n\n    for(let i = 0; i < NB_REPEAT; ++i)\n        bench.addStep(`execute${i}`,  (_, ctx) => { ctx.fct(); });\n    \n    bench.addStat(\"nbTokens\", (ctx) => {\n        return $B.tokenizer(ctx.pycode, '_').length;\n    })\n    bench.addStat(\"nbFiles\", (ctx) => {\n        return 1;\n    })\n    bench.addStat(\"asserts_count\", (ctx) => {\n        const n = assert_count / NB_REPEAT;\n        assert_count = 0;\n        return n;\n    })\n    bench.addStat(\"asserts_fail\", (ctx) => {\n        const n = assert_fail / NB_REPEAT;\n        assert_fail = 0;\n        return n;\n    })\n\n    let assert_count = 0;\n    let assert_fail  = 0;\n\n    // @ts-ignore\n    $RB.assert = function(cond) {\n        ++assert_count;\n        if( ! cond )\n            ++assert_fail;\n    }\n\n    bench.resetStats();\n\n    return bench;\n}\n\n// ==================================================================\n\nfunction resetGUI() {\n    sbry_output.classList.remove('error', 'success');\n    sbry_output.textContent = \"\";\n\n    bry_output.classList.remove('error', 'success');\n    bry_output.textContent = \"\";\n\n}\nfunction printResult( target: Element,\n                      result: BenchStats,\n                        base: BenchStats) {\n\n    target.textContent = printBenchStats(result, base);\n    target.classList.add(\"success\");\n    if( result.errors.length > 0) {\n        console.warn(result.errors);\n\n        target.classList.add(\"error\");\n        target.textContent += \"\\n\" + result.errors.map( e => {\n            let msg = e.message;\n            if( msg === \"\")\n                // @ts-ignore\n                msg = e.args[0]; // Brython errors.\n            return msg;\n        }).join('\\n');\n        //TODO: show code...\n    }\n}\n\nfunction run(pycodes: string[]) {\n\n    resetGUI();\n\n    bench.resetStats();\n\n    //TODO: handle errors...\n    for(let i = 0; i < pycodes.length; ++i)\n        bench.bench({pycode: pycodes[i]});\n\n    const results = bench.getStats();\n\n    if( pycodes.length === 1) {\n          python_input.textContent = results.Brython.ctx.pycode;\n         bry_js_output.textContent = results. Brython.ctx.jscode;\n        sbry_js_output.textContent = results.RBrython.ctx.jscode;\n    }\n\n    printResult(bry_output , results[ \"Brython\"], results[\"RBrython\"]);\n    printResult(sbry_output, results[\"RBrython\"], results[ \"Brython\"]);  \n}\n\n// ==================================================================\n// Get test suite....\n\nfunction generateTestSuite(test_name: string, merge: boolean): string[] {\n    \n    let tests: string[] = [test_name];\n    if( test_name === \"brython\" )\n        tests = brython_tests;\n\n    let fullcode = \"\";\n    const pycodes = new Array<string>();\n    let id = -1;\n\n    const configs = [\"NONE\"];\n    /*\n    const configs: typeof __SBRY_COMPAT__[] = __SBRY_COMPAT__ === \"NONE\"\n        ? [\"NONE\"]\n        : [\"NONE\", \"PERF\"]; //, \"FULL\"];\n    */\n\n    //TODO: split merge & execute...\n\n    // build merged code\n    tests: for(let i = 0; i < tests.length; ++i) {\n\n        const subtests = test_suites[tests[i]];\n        const substats = subTestsStats[tests[i]];\n\n        for(let j = 0; j < subtests.length; ++j) {\n\n            ++id;\n\n            //const stats = substats[j];\n            //results.total_lines       += stats.total;\n            //results.nb_excluded_lines += stats.excluded;\n\n            for(const config of configs) {\n\n                globalThis.__SBRY_COMPAT__ = config as any;\n\n                //TODO: second exclude...\n\n                let code = subtests[j];\n\n                if( code === \"\")\n                    continue;\n\n                code = filterCode(code);\n        \n                if( merge ) {\n                    const indented_code = code.split('\\n').map(e => `    ${e}`).join('\\n');\n                    fullcode += `def _${id}():\\n${indented_code + \"pass\"}\\n_${id}()\\n`;\n                } else {\n                    pycodes.push(code);\n                }\n            }\n        }\n    }\n\n    if(merge)\n        return [fullcode];\n\n    return pycodes;\n}\n\nasync function loadExcludeList() {\n    const exclude_list = await (await fetch('/assets/exclude_list.txt')).text();\n    return Object.fromEntries( exclude_list.split('#').slice(0).map(e => {\n\n        let lines = e.split('\\n');\n        let name = lines[0].slice(1);\n\n        let exclude = lines.slice(1).filter(e => e[0] !== '/' && e.length !== 0).map( x => {\n            const e = x.split('-');\n            if( e.length === 1) {\n                if( e[0] === '*')\n                    return e[0];\n                return parseInt(e[0]);\n            }\n            return [parseInt(e[0]), parseInt(e[1])]\n        });\n\n        return [name, exclude];\n    }) );\n}\n\nasync function loadTests(...names: string[]) {\n\n    const tests: Record<string, string[]> = {};\n\n    for(let i = 0; i < names.length; ++i)\n        tests[names[i]] = await loadSubTests(names[i]);\n\n    return tests;\n}\n\nasync function loadSubTests(test_name: string, exclude = exclude_list) {\n\n    const code = await (await fetch(`/assets/unittests/${test_name}.py`)).text();\n\n    subTestsStats[test_name] = [];\n\n    const parts = code.split('\\n#');\n\n    parts[0] = parts[0].slice(1);\n\n    return parts.map( (t,idx) => {\n\n        let   lines = t.split('\\n');\n        const name  = lines[0].trim();\n        lines[0] = \"# \" + test_name + \".\" + name + \" (\" + (idx+1) + \"/\" + parts.length + \")\";\n        const fullname = `${test_name}.${name}`;\n\n        let excl = exclude[fullname];\n        if( excl === undefined)\n            excl = exclude[`${test_name}.*`];\n\n        lines = filter(lines, excl);\n\n        let nbEmptyLines = 0;\n        for(let i = 1; i < lines.length; ++i)\n            if(lines[i].trim() === '')\n                ++nbEmptyLines;\n        \n        let nbExcluded = 0;\n        for(let i = 1; i < lines.length; ++i) {\n            if( lines[i][0] === '#' ) {\n                if( lines[i].slice(1).trim() === '' ) // commented empty line\n                    ++nbEmptyLines;\n                else\n                    ++nbExcluded\n            }\n        }\n\n        let code_len = lines.length - 1 - nbEmptyLines;\n\n        subTestsStats[test_name].push({\n            excluded: nbExcluded,\n            total   : code_len\n        });\n    \n        if(code_len === nbExcluded)\n            return \"\";\n\n        return lines.join('\\n') + '\\n';\n    });\n}\n\nfunction filter(lines: string[], list: (number|\"*\"|number[])[]) {\n\n    list ??= [];\n    \n    let result = lines.map( (l, idx) => {\n        idx = idx + 1;\n        let excluded = list.find( (v) => {\n            if( v === '*')\n                return true;\n            if( idx === v)\n                return true;\n            if( Array.isArray(v) && v[0] <= idx && v[1] >= idx)\n                return true;\n            return false;\n        }) !== undefined;\n        \n        if( excluded )\n            return `# ${l}`;\n        return l;\n    });\n\n    return result;\n}\n\n// ===============================================================\n\nconst subTestsStats: Record<string, {total: number, excluded: number}[]> = {};\nconst exclude_list = await loadExcludeList();\nconst test_suites  = await loadTests(...brython_tests); // cf end of file for available tests\n\n// ===============================================================\n\nconst  bry_output  = document.querySelector ( '.brython_output')!;\nconst sbry_output  = document.querySelector('.sbrython_output')!;\nconst python_input = document.querySelector<HTMLInputElement>('#python')!;\n\nconst python_output = document.querySelector(\".python_ouput\")!;\nconst ast_output    = document.querySelector(\"#ast\")!;\nconst sbry_js_output= document.querySelector(\"#rbry_js\")!;\nconst  bry_js_output= document.querySelector(\"#bry_js\")!;\n\nconst sbry_print = (...args: any[]) => {\n    console.log(\"[SBRY]\", ...args);\n}\n\npython_input.addEventListener(\"input\",\n    () => {\n        const code = python_input.value;\n        localStorage.setItem('sbrython_code', code);\n        run([code]);\n    });\n\npython_input.addEventListener('keydown', (ev) => {\n\n    if(ev.code === \"Tab\") {\n            ev.preventDefault();\n    \n            let beg = python_input.selectionStart!;\n            let end = python_input.selectionEnd!;\n    \n            const txt = python_input.value;\n            const preText  = txt.slice(0  , beg);\n            const postText = txt.slice(end, txt.length);\n    \n            python_input.value = preText + \"    \" + postText; // input tab key\n            \n            const pos = beg+4;\n            python_input.setSelectionRange(pos, pos);\n        }\n    });\n\nconst select = document.querySelector<HTMLSelectElement>('#tests')!;\n\nconst defaultOpt = new Option(\"----\", undefined, true, true);\ndefaultOpt.toggleAttribute('disabled');\nselect.append( defaultOpt );\n\nfor(let name in test_suite)\n    select.append( new Option(name, test_suite[name as keyof typeof test_suite]) );\n\n\nfunction filterCode(code: string) {\n\n    const codes = code.split(\"\\n\");\n    for(let l = 1; l < codes.length; ++l) {\n        const idx = codes[l].indexOf('#');\n        if( idx <= 0)\n            continue;\n        const config = JSON.parse( codes[l].slice(idx+1).trim());\n        if( config.COMPAT !== DEFAULT_COMPAT )\n            codes[l] = \"#\" + codes[l];\n        else\n            codes[l] = codes[l].slice(0, idx).trimEnd();\n    }\n\n    return codes.join('\\n');\n}\n\nselect.addEventListener('change', () => {\n\n    const code = filterCode(select.value);\n\n    python_input.value = code;\n    localStorage.setItem('sbrython_code', code);\n    run([code]);\n    \n});\n\nfor(let i = 0; i < brython_tests.length; ++i) {\n\n    const subtests = test_suites[ brython_tests[i] ];\n\n    for(let j = 0; j < subtests.length; ++j) {\n\n        const code = subtests[j];\n\n        if( code === \"\")\n            continue;\n\n        const name = code.slice(2 , code.indexOf(\"\\n\") );\n\n        const opts = new Option(name, code);\n        select!.append( opts );\n    }\n}\n\n// =====================================================================\n\nconst bench = createBench();\nlet initialRun: string[];\n\nif( test_name === \"rbrython\" ) {\n    initialRun = Object.values(test_suite);\n} else if( test_name !== null )\n    initialRun = generateTestSuite(test_name, merge);\nelse\n    initialRun = [python_input.value = localStorage.getItem('sbrython_code') ?? \"\"];\n\nrun( initialRun );","export default \"assert 2 + 2 == 4\\nassert (50 - 5 * 6) / 4 == 5.0\\nassert 8 / 5 == 1.6\\n#assert 7 // 3 == 2\\n#assert 7 // -3 == -3\";","const test_suite = {\n    \"kernel/match/classes\": require(\"!!raw-loader!./py/kernel/match/classes.py\").default,\n    \"core/int/op\"    : require(\"!!raw-loader!./py/core/int/op.py\").default,\n    \"core/float/op\": require(\"!!raw-loader!./py/core/float/op.py\").default,\n}\n\nexport default test_suite;","export default \"from types import NotImplementedType\\nfrom RBM import __JS_OP__, __JS_AS_NUMBER__, number\\n\\nclass float(number):\\n    def __new__(cls, o: object, /) -> float:\\n        if type(o) is str:\\n            return __JS_AS_NUMBER__(o)\\n        return type(o).__float__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)    \\n\\n    def __add__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"+\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"+\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __radd__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"+\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"+\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __sub__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"-\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"-\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __rsub__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"-\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"-\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __mul__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"*\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"*\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __rmul__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"*\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"*\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __div__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"/\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"/\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __rdiv__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"/\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"/\\\", self)\\n            case _      : return NotImplemented\\n\\n    ### unary operators ###\\n\\n    def __neg__(self, /) -> float:\\n        return __JS_OP__(\\\"-\\\", self)\\n    \\n    def __int__(self, /) -> int:\\n        return __JS_RUN__('(x) => Math.trunc(x)', self) # type: ignore\\n    \\n    def __abs__(self, /) -> int:\\n         return __JS_RUN__('(x) => Math.abs(x)', self) # type: ignore\";","import { ParsedCode } from \"../ast/types\";\n\nexport default function parse(pycode: string, filename: string): ParsedCode {\n    \n    const parser = new $B.Parser(pycode, filename, 'file');\n\n    const ast   = $B._PyPegen.run_parser(parser);\n    const future = $B.future_features(ast, filename)\n    var symtable = $B._PySymtable_Build(ast, filename, future);\n\n    return {\n        filename,\n        pycode,\n        ast,\n        symtable,\n    }\n}","import { ParsedCode } from \"../ast/types\";\n\nexport default abstract class Engine {\n    abstract run(pycode: string): void;\n\n    // low level\n    abstract parse(pycode: string ): ParsedCode;\n    abstract emit (ast: ParsedCode): string;\n    abstract loadAsFunction(jscode: string): () => void;\n}","import { ParsedCode } from \"../../ast/types\";\nimport parse from \"../../parser\";\nimport Engine from \"../interface\";\n\nexport default class BrythonEngine extends Engine {\n\n    constructor() {\n        super();\n        this.initialize(); // by default initialize immediately.\n    }\n\n    run(pycode: string) {\n        this.loadAsFunction(this.emit(this.parse(pycode)))();\n    }\n    // builtins\n\n    // initialize\n    #initialized = false;\n    initialize() {\n        $B.imported[\"JS\"] = $B.jsobj2pyobj( globalThis );\n\n        this.#initialized = true;\n    }\n\n    // low level\n    parse(pycode: string): ParsedCode {\n        return parse(pycode, \"_\");\n    }\n    emit(ast: ParsedCode) {\n        let imported:any;\n        return $B.js_from_root({ast: ast.ast,\n                                symtable: ast.symtable,\n                                filename: ast.filename,\n                                src     : ast.pycode,\n                                imported}).js\n\n    }\n    loadAsFunction(jscode: string) {\n        $B.imported[\"_\"] = {};\n        return Function(\"'use strict';\" + jscode) as () => void;\n    }\n}","export class type {\n    //TODO...\n    __call__(...args: any[]) {\n\n        // @ts-ignore\n        const factory = this.prototype.__new__;\n        const self = factory !== undefined\n                        ? factory.call(this, ...args)\n                        // @ts-ignore\n                        : new this(...args);\n        // @ts-ignore\n        const init = this.prototype.__init__;\n        if( init !== undefined)\n            init.call(self, ...args);\n        \n        return self\n    }\n    __eq__(b: unknown) {\n        return this == b;\n    }\n}","import { type } from \"../tmp_corelib/type\";\n\nconst mapper = {\n    \"bigint\" : \"int\",\n    \"number\" : \"float\",\n    \"string\" : \"str\",\n    \"boolean\": \"bool\"\n}\n\nexport function getClass(o: unknown) {\n\n    const typename = typeof o;\n\n    if( typename === \"function\" ) {\n        //TODO: is class ? is something else ?\n        return type;\n    }\n\n    if( typename === \"object\" ) {\n        // @ts-ignore;\n        return o.constructor;\n    }\n\n    // @ts-ignore\n    const lit_class = globalThis[mapper[typename]];\n    if( lit_class !== undefined)\n        return lit_class;\n\n    throw new Error(`JS type ${typename} not implemented yet`);\n}","//TODO...\nexport const NotImplemented = Symbol();","import { getClass } from \"../helpers/getClass\";\nimport { NotImplemented } from \"../tmp_corelib/NotImplemented\";\n\nexport default function op(a: unknown, op: string, b: unknown) {\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n\n    if( fct === undefined ) {\n        if( op === \"ne\" )\n            return ! ka.prototype[\"__eq__\"].call(a, b);\n        if( op[0] === \"i\")\n            fct = ka.prototype[`__${op.slice(1)}__`];\n        if( fct === undefined)\n            fct = defaults[op as keyof typeof defaults];\n    }\n    \n    let result = fct.call(a, b);\n\n    if( result === NotImplemented) {\n\n        const kb = getClass(b);\n        if( kb === undefined ) {\n            console.warn(b, \"r\" + op);\n            throw new Error(\"?\");\n        }\n\n        let fct = kb.prototype[`__r${op}__`];\n        result = fct.call(b, a);\n    }\n\n    return result;\n}\n\n//TODO: move to corelib ?\nconst defaults = {\n    eq: function(b: unknown) { return this == b }\n}","export let KW: Record<string, any>|null = null;\n\nexport const IGNORE_ARG = Symbol();\n\nexport function setKW(args: Record<string, any>) {\n    KW = args;\n    return IGNORE_ARG;\n}\n\nexport function getKW() {\n    if( KW === null )\n        return {};\n    const args = KW;\n    KW = null;\n    return args;\n}","// interface\nimport op     from \"./interface/op\";\nimport uop    from \"./interface/uop\";\nimport call   from \"./interface/call\";\nimport mcall  from \"./interface/mcall\";\nimport assert from \"./interface/assert\";\nimport attr   from \"./interface/attr\";\nimport { getKW, setKW } from \"./interface/KW\";\n\n// @ts-ignore\nglobalThis.$RB = {\n    // interface\n    op,\n    uop,\n    call,\n    mcall,\n    assert,\n    attr,\n    getKW,\n    setKW,\n    getModule\n}\n\n//TODO: corelib\nimport {NotImplemented} from \"./tmp_corelib/NotImplemented\";\n\n// @ts-ignore\nglobalThis.abs = function( a: unknown) {\n    const ka = getClass(a);\n    return ka.prototype[`__abs__`].call(a);\n}\n\n// @ts-ignore\nglobalThis.type = function(a: unknown) {\n    return getClass(a); //TODO...\n}\n\n// @ts-ignore\nglobalThis.NotImplemented = NotImplemented;\n\n// @ts-ignore\nglobalThis.range = function*(a: number) {\n    for(let i = 0; i < a; ++i)\n        yield i;\n}\n\n// @ts-ignore\nglobalThis.Exception = function(msg: string) {\n    throw new Error(msg);\n}\n\n// =====================================================\n\n//TODO: as macro...\n\nimport { getClass } from \"./helpers/getClass\";\nimport getModule from \"./interface/getModule\";\n\n// @ts-ignore\nglobalThis.__JS_LOG__ = (...args) => console.log(...args);\n\nexport const IVALUE = Symbol();\n\n// @ts-ignore\nglobalThis.__JS_SET_IVALUE__ = (self, v) => self[IVALUE] = v;\n// @ts-ignore\nglobalThis.__JS_GET_IVALUE__ = (self) => self[IVALUE];\n\n// @ts-ignore\nglobalThis.__JS_AS_NUMBER__ = (o: unknown) => {\n    if( o === \"infinity\" || o === \"inf\")\n        return Number.POSITIVE_INFINITY\n    if( o === \"-infinity\" || o === \"-inf\")\n        return Number.NEGATIVE_INFINITY\n    return Number( o );\n}\n\n// @ts-ignore\nglobalThis.__JS_AS_STRING__ = (o: unknown) => `${o}`;\n\n","import { getClass } from \"../helpers/getClass\";\n\nexport default function uop(op:string, a: unknown) {\n\n    if( op === \"not\") {\n        // @ts-ignore\n        return ! a;\n    }\n\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n    return fct.call(a);\n}","import { getClass } from \"../helpers/getClass\";\nimport isClass from \"../helpers/isClass\";\nimport { IGNORE_ARG } from \"./KW\";\n\nexport default function call(a: (...args:unknown[]) => unknown, ...args: unknown[]) {\n\n    if( args[args.length-1] === IGNORE_ARG)\n        args = args.slice(0,-1);\n\n    // @ts-ignore\n    let fct = a.__call__\n\n    if( fct === undefined ) {\n        fct = a;\n\n        // h4cky\n        if( fct.prototype?.__new__ !== undefined ) {\n            const b = getClass(fct).prototype.__call__;\n            if( b !== undefined) {\n                return b.call(fct, ...args);\n            }\n        }\n\n        if( isClass(fct) ) // only for JS classes now...\n            return new fct(...args);\n    }\n\n    return fct(...args);\n}\n","export default function isClass(o: unknown) {\n    // from https://stackoverflow.com/questions/526559/testing-if-something-is-a-class-in-javascript\n    return Object.getOwnPropertyDescriptors(o)?.prototype?.writable === false;\n}\n// + https://github.com/brython-dev/brython/issues/2513","import { IGNORE_ARG } from \"./KW\";\n\nexport default function mcall(o: unknown, name: string, ...args: unknown[]) {\n    \n    if( args[args.length-1] === IGNORE_ARG)\n        args = args.slice(0,-1);\n    \n    // @ts-ignore\n    let fct = o[name];\n    if( fct === undefined)\n        // @ts-ignore\n        return o.prototype[name].call(...args);\n\n    // @ts-ignore\n    return o[name](...args);\n}","export default function assert(cond: boolean) {\n    if( ! cond )\n        throw new Error(`Assertion failed`);\n}","export default function attr(o: any, attr: string) {\n    if( ! (attr in o) )\n        return o.constructor[attr];\n    return o[attr];\n}","export default function getModule(name: string) {\n    if( name === \"JS\")\n        return globalThis; //TODO...\n\n    throw new Error(`module ${name} not found`);\n}","// list is filled in list.ts in order to prevent circular dependency.\n\nimport { ASTNode } from \"../../ast/types\";\n\nexport type Handler = (node: ASTNode) => string;\n\nconst Handlers: Record<string, Handler> = {};\n\nexport default Handlers;","import { ASTNode, OperatorNode } from \"./types\";\n\nexport function nodeType(node: ASTNode): string {\n    // @ts-ignore\n    return node.constructor.$name;\n}\n\nexport function getOp(op: OperatorNode): string {\n    // @ts-ignore\n    return op.constructor.$name\n}","import { nodeType } from \"../ast\";\nimport { ASTNode } from \"../ast/types\";\nimport Handlers from \"./handlers\";\n\nexport function node2js(node: ASTNode): string {\n\n    const handler = Handlers[nodeType(node) as keyof typeof Handlers];\n\n    if( handler === undefined) {\n        console.warn(node);\n        throw new Error(`Node type ${nodeType(node)} is unknown`);\n    }\n\n    return handler(node);\n}\n","import { BodyNode } from \"../../ast/types\";\nimport { node2js } from \"../node2js\";\n\nexport default function(body: BodyNode, _inClass = false) {\n\n    //@ts-ignore\n    const prev = globalThis.inClass;\n    //@ts-ignore\n    globalThis.inClass = _inClass; //TODO: h4ck\n\n    let res = \"\";\n    for(let i = 0; i < body.length; ++i)\n        res += node2js(body[i]) + \";\\n\";\n\n    //@ts-ignore\n    globalThis.inClass = prev;\n\n    return res;\n}","import { node2js } from \"../../node2js\";\nimport { nodeType } from \"../../../ast\";\nimport { ClassDefNode } from \"../../../ast/types\";\n\n// @ts-ignore\nglobalThis.inCstrFct = false;\n\nexport default function ClassDef(node: ClassDefNode) {\n    const name = node.name;\n    const body = node.body;\n\n    // dirty dirty h4ck... (we need a runner)\n    let str = `globalThis.${name} = (() =>{\n        function ${name}() {\n            return Object.create(${name}.prototype);\n        }\n        const classname = ${name};\n    `;\n\n    // @ts-ignore\n    const isH4ck = node.bases.length === 1 && [\"number\", \"bigint\", \"boolean\", \"string\"].includes(node.bases[0].id);\n\n    if( !isH4ck && node.bases.length >= 1) {\n        str += `${name}.prototype = Object.create(${node2js(node.bases[0])}.prototype);\\n`;\n    \n        for(let i = 1; i < node.bases.length; ++i) {\n\n            str += `Object.assign(${name}.prototype, ${node2js(node.bases[i])}.prototype);`;\n        }\n\n        str += `${name}.prototype.constructor = ${name};\\n`;\n    }\n\n    for(let i = 0; i < body.length; ++i) {\n        const type = nodeType(body[i]);\n        if( type === \"FunctionDef\") {\n            // @ts-ignore\n            globalThis.inCstrFct = true;\n            // @ts-ignore\n            let prefix = body[i].name === \"_\"\n                            ? \"\"\n                            // @ts-ignore\n                            : `${name}.prototype.${body[i].name} = `;\n            \n            str += `${prefix}${node2js(body[i])}\n            `;\n            // @ts-ignore\n            globalThis.inCstrFct = false;\n        }\n    }\n\n    str += `\n        return ${name};\n    })();\n    `;\n\n    return str;\n}","import { getOp } from \"../../../ast/\";\nimport { BinaryOpNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function(node: BinaryOpNode) {\n    const a = node.left;\n    const b = node.right;\n    const op = getOp(node.op) as keyof typeof binops;\n\n    const opname = binops[op];\n    if( opname === undefined) \n        throw new Error(`BinOp ${op} not impl`);\n\n    return `$RB.op(${node2js(a)}, \"${opname}\", ${node2js(b)})`;\n}\n\nexport const binops = {\n    Add : \"add\",\n    Sub : \"sub\",\n    Mult: \"mul\",\n    Div : \"div\",\n    Pow : \"pow\",\n    Mod : \"mod\",\n    // bits\n    BitOr: \"or\",\n    BitAnd: \"and\",\n    LShift: \"lshift\",\n    RShift: \"rshift\"\n}","import { node2js } from \"../../node2js\";\nimport { nodeType } from \"../../../ast\";\nimport { ASTNode, AttributeNode, CallNode } from \"../../../ast/types\";\n\nexport const macros: Record<string, (...args: ASTNode[]) => string> = {};\n\nexport default function Call(node: CallNode) {\n    const f        = node.func;\n    const args     = node.args;\n    const keywords = node.keywords;\n\n    // @ts-ignore\n    if( f.id in macros)\n        // @ts-ignore\n        return macros[f.id]( ...node.args );\n\n    //TODO: args parsing...\n    let str = \"\";\n    for(let i = 0; i < args.length; ++i)\n        str += node2js(args[i]) + \", \";\n\n    if( keywords.length ) {\n        str += \"$RB.setKW({\";\n            for( let i = 0; i < keywords.length; ++i)\n                // @ts-ignore\n                str += `${keywords[i].arg}: ${node2js(keywords[i].value)},`;\n        str += \"})\";\n    }    \n\n    if( nodeType(f) === \"Attribute\") {\n        const m = f as AttributeNode;\n        return `$RB.mcall(${node2js(m.value)}, \"${m.attr}\", ${str} )`;\n    }\n\n    return `$RB.call(${node2js(f)}, ${str})`;\n}","import { CompareNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { getOp } from \"../../../ast/\";\n\nexport default function Compare(node: CompareNode) {\n\n    const a = node.left;\n    const op = getOp(node.ops[0]) as keyof typeof cmpops | \"Is\";\n    const b  = node.comparators[0];\n\n    if( op === 'Is' ) return `${node2js(a)} === ${node2js(b)}`;\n    \n    const opname = cmpops[op];\n    if( opname === undefined) {\n        console.warn(op);\n        throw new Error(`CmpOp ${op} not impl`);\n    }\n\n    return `$RB.op(${node2js(a)}, \"${opname}\", ${node2js(b)})`;\n}\n\nconst cmpops = {\n    Eq   : \"eq\",\n    NotEq: \"ne\"\n}\n","import { UnaryOpNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { getOp } from \"../../../ast/\";\n\nexport default function(node: UnaryOpNode) {\n\n    const a = node.operand;\n    const op = getOp(node.op) as keyof typeof uops;\n\n    const opname = uops[op];\n    if( opname === undefined) \n        throw new Error(`UnaryOp ${op} not impl`);\n\n    return `$RB.uop(\"${opname}\", ${node2js(a)})`;\n}\n\nconst uops = {\n    Invert: \"invert\",\n    USub: \"neg\",\n    // pos\n\n    // special:\n    Not: \"not\", // use __len__ or __bool__\n}","import Handlers, { Handler } from \"./index\";\n\nimport {default as ClassDef} from \"./definitions/ClassDef\";\nHandlers[\"ClassDef\"] = ClassDef as Handler;\n\nimport {default as FunctionDef} from \"./definitions/FunctionDef\";\nHandlers[\"FunctionDef\"] = FunctionDef as Handler;\n\nimport {default as Lambda} from \"./definitions/Lambda\";\nHandlers[\"Lambda\"] = Lambda as Handler;\n\nimport {default as Assert} from \"./keywords/Assert\";\nHandlers[\"Assert\"] = Assert as Handler;\n\nimport {default as Pass} from \"./keywords/Pass\";\nHandlers[\"Pass\"] = Pass as Handler;\n\nimport {default as Return} from \"./keywords/Return\";\nHandlers[\"Return\"] = Return as Handler;\n\n\nimport {default as Assign} from \"./operators/Assign\";\nHandlers[\"Assign\"] = Assign as Handler;\n\nimport {default as Attribute} from \"./operators/Attribute\";\nHandlers[\"Attribute\"] = Attribute as Handler;\n\nimport {default as AugAssign} from \"./operators/AugAssign\";\nHandlers[\"AugAssign\"] = AugAssign as Handler;\n\nimport {default as BinOp} from \"./operators/BinOp\";\nHandlers[\"BinOp\"] = BinOp as Handler;\n\nimport {default as Call} from \"./operators/Call\";\nHandlers[\"Call\"] = Call as Handler;\n\nimport {default as Compare} from \"./operators/Compare\";\nHandlers[\"Compare\"] = Compare as Handler;\n\nimport {default as UnaryOp} from \"./operators/UnaryOp\";\nHandlers[\"UnaryOp\"] = UnaryOp as Handler;\n\nimport {default as Constant} from \"./vars/Constant\";\nHandlers[\"Constant\"] = Constant as Handler;\n\nimport {default as Expr} from \"./vars/Expr\";\nHandlers[\"Expr\"] = Expr as Handler;\n\nimport {default as Name} from \"./vars/Name\";\nHandlers[\"Name\"] = Name as Handler;\n\nimport {default as JoinedStr} from \"./vars/JoinedStr\";\nHandlers[\"JoinedStr\"] = JoinedStr as Handler;\n\nimport {default as If} from \"./controlflows/If\";\nHandlers[\"If\"] = If as Handler;\n\nimport {default as While} from \"./controlflows/While\";\nHandlers[\"While\"] = While as Handler;\n\nimport {default as For} from \"./controlflows/For\";\nHandlers[\"For\"] = For as Handler;\n\nimport {default as Try} from \"./controlflows/Try\";\nHandlers[\"Try\"] = Try as Handler;\n\nimport {default as Match} from \"./controlflows/Match\";\nHandlers[\"Match\"] = Match as Handler;\n\nimport {default as Continue} from \"./keywords/Continue\";\nHandlers[\"Continue\"] = Continue as Handler;\n\nimport {default as Break} from \"./keywords/Break\";\nHandlers[\"Break\"] = Break as Handler;\n\nimport {default as Raise} from \"./keywords/Raise\";\nHandlers[\"Raise\"] = Raise as Handler;\n\nimport {default as ImportFrom} from \"./imports/ImportFrom\";\nHandlers[\"ImportFrom\"] = ImportFrom as Handler;\n\nimport {default as Import} from \"./imports/Import\";\nHandlers[\"Import\"] = Import as Handler;","import Body from \"../Body\";\nimport { node2js } from \"../../node2js\";\nimport { nodeType } from \"../../../ast\";\nimport { FunctionDefNode } from \"../../../ast/types\";\n\nexport default function FunctionDef(node: FunctionDefNode) {\n    const name = node.name;\n    //const args = node.args;\n    const body = node.body;\n\n    // @ts-ignore\n    let prefix = globalThis.inClass ? \"\" : \"function \";\n\n    let args = \"\";\n\n    let i = 0;\n    let arg_offset = 0;\n    let self = \"\";\n    // @ts-ignore\n    if( globalThis.inClass || globalThis.inCstrFct ) {\n\n        let selfname = \"\";\n        if( node.args.posonlyargs.length)\n            // @ts-ignore\n            selfname = node.args.posonlyargs[0].arg;\n        else {\n            // @ts-ignore\n            selfname = node.args.args[0].arg\n            ++arg_offset;\n        }\n\n        // @ts-ignore'\n        self = `const ${selfname} = this;`;\n        ++i;\n    }\n\n    for( ; i < node.args.posonlyargs.length; ++i) {\n        //console.warn( node.args.posonlyargs[i] );\n        //TODO:\n        //args += node2js(node.args.posonlyargs[i]) + \", \";\n        // @ts-ignore\n        args += `${node.args.posonlyargs[i].arg}, `;\n    }\n    i = arg_offset;\n    for( ; i < node.args.args.length; ++i) {\n        //console.warn( node.args.posonlyargs[i] );\n        //TODO:\n        //args += node2js(node.args.posonlyargs[i]) + \", \";\n        // @ts-ignore\n        args += `_${node.args.args[i].arg}, `;\n    }\n    if( node.args.args.length ) {\n        // kw...\n        args += \"{\";\n        for( let i = arg_offset ; i < node.args.args.length; ++i) {\n            // @ts-ignore\n            args += `${node.args.args[i].arg} = _${node.args.args[i].arg}, `;\n        }\n        args += \"} = $RB.getKW()\";\n    }\n\n    // vararg\n    // kwonlyargs\n    // kwarg\n    //console.warn(node.args);\n\n\n    let fct_str = `${prefix}${name}(${args}) {\n        ${self}\n        ${Body(body)}\n    }`;\n\n    if( node.decorator_list.length === 0 )\n        return fct_str;\n\n    const dnode = node.decorator_list[0];\n\n    // @ts-ignore\n    if( globalThis.inClass ) {\n\n        return `static {\n            this.prototype.${name} = ${node2js(dnode)}(function ${fct_str});\n        }`;\n    }\n\n    return `${node2js(dnode)}(${fct_str})`;\n}","import { ASTNode } from \"@RBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Lambda(node: ASTNode): string {\n    let args = \"\";\n\n    // @ts-ignore\n    for(let i = 0; i < node.args.posonlyargs.length; ++i)\n        // @ts-ignore\n        args += node.args.posonlyargs[i].arg + \", \";\n\n    // @ts-ignore\n    return `(${args}) => { return ${node2js(node.body)}}`\n}","import { AssertNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Assert(node: AssertNode) {\n    return `$RB.assert(${node2js(node.test)})`;\n}","import { PassNode } from \"../../../ast/types\";\n\nexport default function Pass(node: PassNode) {\n    return \"\";\n}","import { ReturnNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Return(node: ReturnNode) {\n    return `return ${ node2js(node.value) }`;\n}","import { AssignNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Assign(node: AssignNode) {\n\n    let res = \"\";\n\n    //@ts-ignore\n    const prefix = globalThis.inClass ? \"static \" : \"var \";\n\n    for(let i = 1; i < node.targets.length; ++i)\n        res += `${prefix}${node2js(node.targets[i])};`;\n\n    res += prefix + node2js(node.targets[0]) + \" = \";\n    for(let i = 1; i < node.targets.length; ++i)\n        res += node2js(node.targets[i]) + \" = \";\n\n    return res + node2js(node.value);\n}","import { AttributeNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function (node: AttributeNode) {\n    return `$RB.attr(${node2js(node.value)}, \"${node.attr}\")`;\n}","import { AugAssignNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { binops } from \"./BinOp\";\nimport { getOp } from \"../../../ast/\";\n\nexport default function AugAssign(node: AugAssignNode) {\n \n    const a  = node.target;\n    const op = getOp(node.op) as keyof typeof binops;\n    const b  = node.value;\n\n    const opname = binops[op];\n    if( opname === undefined) \n        throw new Error(`BinOp ${op} not impl`);\n\n    return `${node2js(a)} = $RB.op(${node2js(a)}, \"i${opname}\", ${node2js(b)})`;   \n}","import { ConstantNode } from \"../../../ast/types\";\n\nexport default function Constant(node: ConstantNode) {\n\n        const type = typeof node.value;\n\n        if( type === \"object\") {\n            // @ts-ignore\n            const qname = node.value.__class__.__qualname__\n            // @ts-ignore\n            const value: float|bigint = node.value.value;\n\n            if( qname === \"float\"   ) return `${value}`;\n            if( qname === \"int\"     ) return `${value}n`;\n            if( qname === \"NoneType\") return \"null\";\n            //if( qname === \"ellipsis\") return \"$RB.ellipsis\";\n        }\n        if( type === \"string\" ) return `\"${node.value}\"`;\n        if( type === \"number\" ) return `${node.value}n`; // bigint\n        if( type === \"boolean\") return `${node.value}`;\n\n        console.warn(node, type);\n        throw new Error(`Unknown Cste ${type}`);\n}","import { ExprNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Expr(node: ExprNode) {\n    return node2js(node.value);\n}","import { NameNode } from \"../../../ast/types\";\n\nexport default function Name(node: NameNode) {\n    return node.id;\n}","import { nodeType } from \"../../../ast/\";\nimport { node2js } from \"../../node2js\";\nimport { JoinedStrNode } from \"../../../ast/types\";\n\nexport default function JoinedStr(node: JoinedStrNode) {\n\n    console.warn(node);\n\n    let res = \"`\";\n    for(let i = 0; i < node.values.length; ++i) {\n        const value = node.values[i];\n        const type  = nodeType(value);\n\n        if( type === \"Constant\")\n            // @ts-ignore\n            res += value.value;\n        else {\n            // @ts-ignore\n            res += `\\${${node2js(value.value)}}`;\n        }\n    }\n    res += \"`\";\n    return res;\n}","import { IfNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\nimport { nodeType } from \"../../../ast/\";\n\nexport default function If(node: IfNode) {\n\n    let str = `if( ${node2js(node.test)} ) {\n        ${ Body(node.body) }\n    }`;\n\n    for(let i = 0; i < node.orelse.length; ++i) {\n        const snode = node.orelse[i];\n        const type = nodeType(snode);\n\n        if( type === \"If\")\n            str += \"else \" + node2js(snode);\n        else\n            str += `else { ${node2js(snode)} }`;\n    }\n\n    return str;\n}","import { WhileNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function While(node: WhileNode) {\n\n    return `while( ${node2js(node.test)} ) {\n        ${Body(node.body)}\n    }`;\n\n}","import { ForNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function For(node: ForNode) {\n    return `for(${node2js(node.target)} of ${node2js(node.iter)}){\n        ${Body(node.body)}\n    }`;\n}","import { TryNode } from \"../../../ast/types\";\nimport Body from \"../Body\";\n\nexport default function Try(node: TryNode) {\n    //TODO...\n    return `try {\n        ${Body(node.body)}\n    } catch {\n        ${  // @ts-ignore\n            Body(node.handlers[0].body)\n        }\n    }`;\n}","import { ASTNode } from \"@RBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function Match(node: ASTNode) {\n\n    let result = \"{\";\n\n    // @ts-ignore\n    result += `const tname = type(${node2js(node.subject)}).name;`\n\n    // @ts-ignore\n    for(let i = 0; i < node.cases.length -1; ++i) {\n        if( i !== 0)\n            result += \"else \";\n        // @ts-ignore\n        result += `if( tname === \"${node.cases[i].pattern.cls.id}\") {\n            ${  // @ts-ignore\n                Body(node.cases[i].body)}\n        }`;\n    }\n    result += `else {\n            ${  // @ts-ignore\n                Body(node.cases[node.cases.length-1].body)}\n    }`;\n\n    result += \"}\";\n    \n    return result;\n}","import { ASTNode } from \"../../../ast/types\";\n\nexport default function Continue(node: ASTNode) {\n    return \"continue;\"\n}","import { ASTNode } from \"../../../ast/types\";\n\nexport default function Break(node: ASTNode) {\n    return \"break;\"\n}","import { RaiseNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Raise(node: RaiseNode) {\n    return `throw ${node2js(node.exc)};`;\n}","import { ASTNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function ImportFrom(node: ASTNode) {\n\n    // @ts-ignore\n    const module = node.module;\n\n    if( module === \"RBM\" )\n        return \"\"; // Brython macros...\n\n    if( module === \"types\" || module === \"typing\")\n        return \"\"; // ignore for now\n    if( module === \"functools\") {\n        console.warn(\"Import not implemented yet\");\n        return \"\";\n    }\n    let res = \"const {\";\n\n    // @ts-ignore\n    for(let i = 0; i < node.names.length; ++i)\n        // @ts-ignore\n        res += `${node.names[i].name},`;\n\n    return res + `} = $RB.getModule(\"${module}\")`;\n}","import { ASTNode } from \"../../../ast/types\";\n\nexport default function Import(node: ASTNode) {\n\n    // @ts-ignore\n    const module = node.names[0].name;\n\n    if( module === \"RBM\" )\n        return \"\"; // Brython macros...\n\n    return `const ${module} = $RB.getModule(\"${module}\")`;\n}","import { ASTNode } from \"@RBrython/rbry/ast/types\";\nimport { macros } from \"../../emitter/handlers/operators/Call\";\nimport { node2js } from \"@RBrython/rbry/emitter/node2js\";\n\nmacros.__DISPATCH__ = (...args: ASTNode[]) => {\n\n    let result = `((fct) => {\n\n        const registered = {`;\n\n    // @ts-ignore\n    for(let i = 0; i < args[0].keys.length; ++i) {\n        // @ts-ignore\n        result += `${node2js(args[0].keys[i])}: ${node2js(args[0].values[i])},`;\n    }\n\n    result += `};\n    \n        function _(...args) {\n            let f = registered[type(args[0]).name];\n            if( f === undefined )\n                f = fct;\n            return f.call(null, this, ...args);\n        }\n\n        Object.defineProperty(_, \"name\", {value: fct.name});\n    \n        return _;\n    })`;\n\n    return result;\n}\n\nmacros.__JS_WRITE__ = (code: ASTNode) => {\n    // @ts-ignore\n    return code.value; //TODO: improve\n}\nmacros.__JS_OP__    = (...args: ASTNode[]) => {\n    \n    if(args.length === 2) // unary op\n        // @ts-ignore\n        return `${args[0].value}${node2js(args[1])}`;\n    \n    // binary op\n    // @ts-ignore\n    return `${node2js(args[0])} ${args[1].value} ${node2js(args[2])}`;\n}\n\nfunction unescape(str: string) {\n    str = str.replaceAll(\"\\\\n\\\\\", \"\\n\");\n    return str;\n}\n\nmacros.__JS_RUN__    = (...args: ASTNode[]) => {\n    // @ts-ignore\n    return `(${unescape(args[0].value)})(${args.slice(1).map(e=>node2js(e)).join(\",\")})`;\n}\n","export default {\n    int  : require(\"!!raw-loader!../../corelib/int.py\"  ).default,\n    float: require(\"!!raw-loader!../../corelib/float.py\").default,\n    bool : require(\"!!raw-loader!../../corelib/bool.py\" ).default,\n    str  : require(\"!!raw-loader!../../corelib/str.py\"  ).default\n}","import { ParsedCode } from \"../../ast/types\";\nimport emit from \"../../emitter\";\nimport parse from \"../../parser\";\nimport Engine from \"../interface\";\n\nimport \"./macros\";\nimport builtins from \"./builtins\";\n\n\nexport default class RBrythonEngine extends Engine {\n\n    constructor() {\n        super();\n        this.initialize(); // by default initialize immediately.\n    }\n\n    run(pycode: string) {\n        this.loadAsFunction(this.emit(this.parse(pycode)))();\n    }\n    // builtins\n\n    // initialize\n    #initialized = false;\n    initialize() {\n        for(let name in builtins)\n            this.run(builtins[name as keyof typeof builtins]);\n\n        this.#initialized = true;\n    }\n\n    // low level\n    parse(pycode: string): ParsedCode {\n        return parse(pycode, \"_\");\n    }\n    emit(ast: ParsedCode) {\n        return emit(ast);\n    }\n    loadAsFunction(jscode: string) {\n        return Function(\"'use strict';\" + jscode) as () => void;\n    }\n}","// quick h4ck (should move it).\nimport \"../runlib\";\n\nimport \"./handlers/list\"; // ensure Handlers are loaded.\n\nimport { ParsedCode } from \"../ast/types\";\nimport Body from \"./handlers/Body\";\n\nexport default function emit(ast: ParsedCode) {\n    return Body(ast.ast.body);\n}\n","import  BrythonEngine from \"./Brython\";\nimport RBrythonEngine from \"./RBrython\";\n\nexport default class Engines {\n    static getBrythonEngine() {\n        return new BrythonEngine();\n    }\n    static getRBrythonEngine() {\n        return new RBrythonEngine();\n    }\n}","import Engines from \"@SBrython/rbry/engines\";\n\nexport const  BryEngine = Engines. getBrythonEngine();\nexport const RBryEngine = Engines.getRBrythonEngine();","// initial data\n// add steps\n// get result\n// get metrics...\n\nimport Engine from \"@SBrython/rbry/engines/interface\";\n\nexport type BenchStats   = {\n    steps : {name: string, time: number}[];\n    ctx   : Record<string, any>\n    errors: Error[],\n    stats : Record<string, number>\n}\nexport type BenchResults = Record<string, BenchStats>;\n\nexport default class BenchRunner {\n\n    readonly steps  : {name: string, fct: (engine: Engine, context: Record<string, any>) => void}[] = [];\n    readonly engines: {name: string, engine: Engine}[] = [];\n    readonly   stats: {name: string, fct: (ctx: Record<string, any>) => number}[] = [];\n\n    addStat(name: string, fct: (ctx: Record<string, any>) => number) {\n        this.stats.push({name, fct});\n    }\n\n    addEngine(name: string, engine: Engine) {\n        this.engines.push({name, engine});\n        return this;\n    }\n    addStep(name: string, fct: (engine: Engine, context: Record<string, any>) => void) {\n        this.steps.push({name, fct});\n        return this;\n    }\n\n    #results: BenchResults | null = null;\n    resetStats() {\n        this.#results = {};\n        for(let r = 0; r < this.engines.length; ++r) {\n            this.#results[this.engines[r].name] = {\n                steps : new Array(this.steps.length),\n                ctx   : {},\n                errors: [],\n                stats : {}\n            };\n            for(let i = 0; i < this.steps.length; ++i)\n                this.#results[this.engines[r].name].steps[i] = {\n                    name: this.steps[i].name,\n                    time: 0\n                }\n            for(let i = 0; i < this.stats.length; ++i)\n                this.#results[this.engines[r].name].stats[this.stats[i].name]\n                    = 0;\n        }\n    }\n    getStats() {\n        return this.#results!;\n    }\n\n    bench(ctx: Record<string, any>) {\n\n        if( this.#results === null ) {\n            this.resetStats();\n        }\n        //TODO tokenize (stats).\n        //TODO print\n\n        const results = this.#results!;\n\n        for(let r = 0; r < this.engines.length; ++r) {\n            const engine = this.engines[r].engine;\n            const result = results[this.engines[r].name];\n            const context = result.ctx = {...ctx};\n\n            try {\n\n                for(let i = 0; i < this.steps.length; ++i) {\n\n                    const f = this.steps[i].fct;\n\n                    const beg = performance.now();\n                    f(engine, context);\n                    const end = performance.now();\n                    \n                    result.steps[i].time += end - beg;\n                }\n\n                for(let i = 0; i < this.stats.length; ++i) {\n                    result.stats[this.stats[i].name] += this.stats[i].fct(context);\n                }\n\n            } catch(e: unknown) {\n                result.errors.push( e as Error );\n            }\n        }\n    }\n}","import { BenchStats } from \"./BenchRunner\";\n\nfunction tformat(time: number, unit: string) {\n    return time.toFixed(3).padStart(7) + unit;\n}\n\nfunction tdiff(a: number, b: number) {\n\n    const c = a/b;\n\n    if( c === 1)\n        return \"   =   \";\n\n    if( c > 1 )\n        return \"x\" + c.toFixed(2).padStart(6);\n\n    return \"-\" + (-(100*a/b - 100)).toFixed(2).padStart(5) + \"%\";\n}\n\nexport default function printBenchStats(stats: BenchStats, base: BenchStats) {\n    \n    let report = \"\";\n\n    /*\n    const nb_lines    = results.total_lines;\n    const nb_excluded = results.nb_excluded_lines;\n    const nb_done     = nb_lines - nb_excluded;\n\n//    report += \"Status         : SUCCESS\\n\";\n    report += `Tested         : ${nb_done}/${nb_lines} (${(nb_done/nb_lines*100).toFixed(2)}%)\\n`;*/\n\n    const passed = stats.stats.asserts_count - stats.stats.asserts_fail;\n    let passed_rate = passed / stats.stats.asserts_count;\n    if( stats.stats.asserts_count === 0)\n        passed_rate = 1;\n\n    const nb_tokens = stats.stats.nbTokens;\n    report += `Asserts: ${passed}/${stats.stats.asserts_count} (${+(passed_rate*100)}%)\\n`\n    report += `Py code: ${nb_tokens} tokens (${stats.stats.nbFiles} file)\\n`;\n    \n    report += \"JS code: \" + tdiff(stats.ctx.jscode?.length,\n                                  base.ctx.jscode?.length) + \"\\n\";\n    report += \"\\nTimes:\\n\"\n\n\n    const tcoef = 100_000 / nb_tokens / 1000;\n\n    for(let i = 0; i < stats.steps.length; ++i) {\n\n        const name = stats.steps[i].name;\n        const time = stats.steps[i].time;\n        const cmp  =  base.steps[i].time;\n\n        report += `- ${name.padEnd(7)}\\t`\n                    + tformat(time * tcoef, \"s\")\n                    + \" [\"\n                    + tdiff(time, cmp)\n                    + \"] \"\n                    + tformat(time, \"ms\")\n                    + \"\\n\";\n    }\n\n    return report;\n}","export default \"from types     import NotImplementedType\\n\\nfrom RBM import __JS_AS_NUMBER__, __JS_OP__, bigint\\n\\nclass int(bigint):\\n\\n    def __new__(cls, o: object, base: int, /) -> int:\\n        if type(o) == str:\\n            return __JS_RUN__( # type: ignore\\n                '''\\n                    (x, base) => {\\n                        if( base !== 16)\\n                            return BigInt(x);\\n                        \\n                        let result = 0n;\\n                        for(let i = 2; i < x.length; ++i)\\n                            result = result << 4n + BigInt( parseInt(this.slice(i, i+8), 16) );\\n                        return result;\\n                    }\\n                ''', o, base) # type: ignore\\n        return type(o).__int__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)\\n\\n\\n    def __add__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"+\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __radd__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"+\\\", self)\\n            case _      : return NotImplemented\\n    \\n\\n    def __sub__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"-\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rsub__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"-\\\", self)\\n            case _      : return NotImplemented\\n    \\n    def __mul__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"*\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rmul__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"*\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __pow__(self, o: object, mod: int|None = None, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"**\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rpow__(self, o: object, mod: int|None = None, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"**\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __div__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(self),\\n                                           \\\"/\\\",\\n                                           __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n    \\n    def __rdiv__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o),\\n                                           \\\"*\\\",\\n                                           __JS_AS_NUMBER__(self) )\\n            case _      : return NotImplemented\\n\\n    def __mod__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"%\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rmod__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"%\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __or__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"|\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __ror__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"|\\\", o)\\n            case _      : return NotImplemented\\n\\n    def __and__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"&\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rand__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"&\\\", o)\\n            case _      : return NotImplemented\\n        \\n    def __xor__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"^\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rxor__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"^\\\", o)\\n            case _      : return NotImplemented\\n\\n    def __lshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"<<\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rlshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"<<\\\", o)\\n            case _      : return NotImplemented\\n\\n    def __rshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\">>\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rrshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\">>\\\", o)\\n            case _      : return NotImplemented\\n    \\n    ### unary operators ###\\n    def __invert__(self, /) -> int:\\n        return __JS_OP__(\\\"~\\\", self)\\n\\n    def __neg__(self, /) -> int:\\n        return __JS_OP__(\\\"-\\\", self)\\n    \\n    def __abs__(self, /) -> int:\\n         return __JS_RUN__(\\\"x => x < 0n ? -x : x\\\", self) # type: ignore\";"],"names":["NB_REPEAT","brython_tests","search","URLSearchParams","location","test_name","get","merge","DEFAULT_COMPAT","createBench","bench","BenchRunner","addEngine","BryEngine","RBryEngine","addStep","engine","ctx","ast","parse","pycode","jscode","emit","fct","loadAsFunction","i","_","addStat","$B","tokenizer","length","n","assert_count","assert_fail","$RB","assert","cond","resetStats","printResult","target","result","base","textContent","printBenchStats","classList","add","errors","console","warn","map","e","msg","message","args","join","run","pycodes","sbry_output","remove","bry_output","results","getStats","python_input","Brython","bry_js_output","sbry_js_output","RBrython","generateTestSuite","tests","fullcode","Array","id","configs","subtests","test_suites","subTestsStats","j","config","globalThis","__SBRY_COMPAT__","code","filterCode","split","push","async","loadExcludeList","exclude_list","fetch","text","Object","fromEntries","slice","lines","name","exclude","filter","x","parseInt","loadTests","names","loadSubTests","parts","t","idx","trim","excl","undefined","nbEmptyLines","nbExcluded","code_len","excluded","total","list","l","find","v","isArray","window","onerror","log","document","querySelector","addEventListener","value","localStorage","setItem","ev","preventDefault","beg","selectionStart","end","selectionEnd","txt","preText","postText","pos","setSelectionRange","select","defaultOpt","Option","toggleAttribute","append","test_suite","codes","indexOf","JSON","COMPAT","trimEnd","opts","initialRun","values","getItem","require","filename","parser","Parser","_PyPegen","run_parser","future","future_features","symtable","_PySymtable_Build","Engine","BrythonEngine","constructor","super","this","initialize","imported","jsobj2pyobj","js_from_root","src","js","Function","type","__call__","factory","prototype","__new__","self","call","init","__init__","__eq__","b","mapper","getClass","o","typename","lit_class","Error","NotImplemented","Symbol","defaults","eq","KW","IGNORE_ARG","op","a","ka","kb","uop","getOwnPropertyDescriptors","writable","mcall","attr","getKW","setKW","getModule","abs","range","Exception","__JS_LOG__","IVALUE","__JS_SET_IVALUE__","__JS_GET_IVALUE__","__JS_AS_NUMBER__","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","__JS_AS_STRING__","nodeType","node","$name","getOp","node2js","handler","Handlers","body","_inClass","prev","inClass","res","inCstrFct","binops","Add","Sub","Mult","Div","Pow","Mod","BitOr","BitAnd","LShift","RShift","macros","cmpops","Eq","NotEq","uops","Invert","USub","Not","str","bases","includes","prefix","arg_offset","selfname","posonlyargs","arg","fct_str","Body","decorator_list","dnode","test","targets","opname","left","right","f","func","keywords","m","ops","comparators","operand","qname","__class__","__qualname__","orelse","snode","iter","handlers","subject","cases","pattern","cls","exc","module","__DISPATCH__","keys","__JS_WRITE__","__JS_OP__","__JS_RUN__","replaceAll","int","float","bool","RBrythonEngine","builtins","Engines","getBrythonEngine","getRBrythonEngine","steps","engines","stats","r","time","context","performance","now","tformat","unit","toFixed","padStart","tdiff","c","report","passed","asserts_count","asserts_fail","passed_rate","nb_tokens","nbTokens","nbFiles","tcoef","cmp","padEnd"],"sourceRoot":""}