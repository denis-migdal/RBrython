{"version":3,"file":"libs/Runner/index.js","mappings":"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","sources":["webpack://rbrython/./src/rbry/corelib-aot/int.js","webpack://rbrython/./src/rbry/runners/interface.ts","webpack://rbrython/./src/rbry/corelib-aot/mfct.js","webpack://rbrython/./src/rbry/corelib-aot/bool.js","webpack://rbrython/./src/rbry/corelib-aot/str.js","webpack://rbrython/./src/rbry/corelib-aot/float.js","webpack://rbrython/./src/rbry/runners/RBrythonGlobalRunner.ts","webpack://rbrython/./src/rbry/runlib/interface/shadowJS.ts","webpack://rbrython/./src/rbry/runlib/helpers/getClass.ts","webpack://rbrython/./src/rbry/runlib/interface/op.ts","webpack://rbrython/./src/rbry/runlib/interface/KW.ts","webpack://rbrython/./src/rbry/runlib/interface/tmp.ts","webpack://rbrython/./src/rbry/runlib/index.ts","webpack://rbrython/./src/rbry/runlib/interface/uop.ts","webpack://rbrython/./src/rbry/runlib/interface/call.ts","webpack://rbrython/./src/rbry/runlib/helpers/isClass.ts","webpack://rbrython/./src/rbry/runlib/interface/mcall.ts","webpack://rbrython/./src/rbry/runlib/interface/assert.ts","webpack://rbrython/./src/rbry/runlib/interface/getitem.ts","webpack://rbrython/./src/rbry/runlib/interface/setitem.ts","webpack://rbrython/./src/rbry/runlib/interface/delitem.ts","webpack://rbrython/./src/rbry/runlib/interface/getattr.ts","webpack://rbrython/./src/rbry/runlib/interface/setattr.ts","webpack://rbrython/./src/rbry/runlib/interface/delattr.ts","webpack://rbrython/./src/rbry/runlib/interface/getModule.ts","webpack://rbrython/./src/rbry/runlib/interface/getModuleSync.ts","webpack://rbrython/./src/rbry/runlib/interface/in.ts","webpack://rbrython/./src/rbry/runlib/interface/ro.ts","webpack://rbrython/webpack/bootstrap","webpack://rbrython/webpack/runtime/define property getters","webpack://rbrython/webpack/runtime/hasOwnProperty shorthand","webpack://rbrython/./src/libs/Runner/index.ts"],"sourcesContent":["export default \";\\n;\\nvar int = (() =>{\\n        function int() {\\n            return Object.create(int.prototype);\\n        }\\n    int.prototype.__new__ = function __new__(o, base, ){const cls = this;\\n        if( $RB.op($RB.call(type, o, ), \\\"eq\\\", str) ) {\\n        return (\\n\\n                    (x, base) => {\\n\\n                        if( base !== 16)\\n\\n                            return BigInt(x);\\n\\n                        \\n\\n                        let result = 0n;\\n\\n                        for(let i = 2; i < x.length; ++i)\\n\\n                            result = result << 4n + BigInt( parseInt(this.slice(i, i+8), 16) );\\n\\n                        return result;\\n\\n                    }\\n\\n                )(o,base);\\n\\n    };\\nreturn $RB.mcall($RB.call(type, o, ), \\\"__int__\\\", o,  );\\n\\n    };\\nint.prototype.__eq__ = function __eq__(o, ){const self = this;\\n        return self == o;\\n\\n    };\\nint.prototype.__add__ = function __add__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self + o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__radd__ = function __radd__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return o + self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__sub__ = function __sub__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self - o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rsub__ = function __rsub__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return o - self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__mul__ = function __mul__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self * o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rmul__ = function __rmul__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return o * self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__pow__ = function __pow__(o, mod, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self ** o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rpow__ = function __rpow__(o, mod, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return o ** self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__div__ = function __div__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return Number(self) / Number(o);\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rdiv__ = function __rdiv__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return Number(o) * Number(self);\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__mod__ = function __mod__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self % o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rmod__ = function __rmod__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self % o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__or__ = function __or__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self | o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__ror__ = function __ror__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self | o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__and__ = function __and__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self & o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rand__ = function __rand__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self & o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__xor__ = function __xor__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self ^ o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rxor__ = function __rxor__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self ^ o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__lshift__ = function __lshift__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self << o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rlshift__ = function __rlshift__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self << o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rshift__ = function __rshift__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self >> o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__rrshift__ = function __rrshift__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self >> o;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nint.prototype.__invert__ = function __invert__(){const self = this;\\n        return ~self;\\n\\n    };\\nint.prototype.__neg__ = function __neg__(){const self = this;\\n        return -self;\\n\\n    };\\nint.prototype.__abs__ = function __abs__(){const self = this;\\n        return (x => x < 0n ? -x : x)(self);\\n\\n    };\\n\\n        return int;\\n    })();\\n    ;\\n\\nconst __exported__ = {int}\";","export type PyModule = Record<string, any>;\n\nexport default abstract class Runner {\n    \n    abstract run(jscode: string): Promise<PyModule>;\n    abstract runSync(jscode: string): PyModule;\n\n    abstract registerBuiltins(symbols: PyModule): void;\n    abstract registerBuiltin(name: string, value: any): void;\n\n    abstract registerModule(name: string, symbols: PyModule): void;\n    abstract      getModule(name: string): PyModule;\n\n    // low level\n    abstract loadAsFunction(jscode: string): (runlib: any) => Promise<PyModule>;\n    abstract runFunction(fct: (runlib: any) => Promise<PyModule>): Promise<PyModule>;\n\n    abstract loadAsSyncFunction(jscode: string): (runlib: any) => PyModule;\n    abstract runSyncFunction(fct: (runlib: any) => PyModule): PyModule;\n}","export default \"function abs(o, ){\\n        return $RB.mcall(o, \\\"__abs__\\\",  );\\n\\n    };\\n\\nconst __exported__ = {abs}\";","export default \";\\nvar bool = (() =>{\\n        function bool() {\\n            return Object.create(bool.prototype);\\n        }\\n    bool.prototype.__eq__ = function __eq__(o, ){const self = this;\\n        return self == o;\\n\\n    };\\n\\n        return bool;\\n    })();\\n    ;\\n\\nconst __exported__ = {bool}\";","export default \";\\n;\\nvar str = (() =>{\\n        function str() {\\n            return Object.create(str.prototype);\\n        }\\n    str.prototype.__new__ = function __new__(o, ){const cls = this;\\n        return `${o}`;\\n\\n    };\\nstr.prototype.__eq__ = function __eq__(o, ){const self = this;\\n        return self == o;\\n\\n    };\\nstr.prototype.__mul__ = function __mul__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self.repeat(Number(b));\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nstr.prototype.__rmul__ = function __rmul__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"int\\\") {\\n            return self.repeat(Number(b));\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\n\\n        return str;\\n    })();\\n    ;\\n\\nconst __exported__ = {str}\";","export default \";\\n;\\nvar float = (() =>{\\n        function float() {\\n            return Object.create(float.prototype);\\n        }\\n    float.prototype.__new__ = function __new__(o, ){const cls = this;\\n        if( $RB.call(type, o, ) === str ) {\\n        if( $RB.op(o, \\\"eq\\\", \\\"infinity\\\")||$RB.op(o, \\\"eq\\\", \\\"inf\\\") ) {\\n        return Number.POSITIVE_INFINITY;\\n\\n    };\\nif( $RB.op(o, \\\"eq\\\", \\\"-infinity\\\")||$RB.op(o, \\\"eq\\\", \\\"-inf\\\") ) {\\n        return Number.NEGATIVE_INFINITY;\\n\\n    };\\nreturn Number(o);\\n\\n    };\\nreturn $RB.mcall($RB.call(type, o, ), \\\"__float__\\\", o,  );\\n\\n    };\\nfloat.prototype.__eq__ = function __eq__(o, ){const self = this;\\n        return self == o;\\n\\n    };\\nfloat.prototype.__add__ = function __add__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return self + o;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return self + Number(o);\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__radd__ = function __radd__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return o + self;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return Number(o) + self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__sub__ = function __sub__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return self - o;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return self - Number(o);\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__rsub__ = function __rsub__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return o - self;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return Number(o) - self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__mul__ = function __mul__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return self * o;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return self * Number(o);\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__rmul__ = function __rmul__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return o * self;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return Number(o) * self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__div__ = function __div__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return self / o;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return self / Number(o);\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__rdiv__ = function __rdiv__(o, ){const self = this;\\n        {const tname = type(o).name;if( tname === \\\"float\\\") {\\n            return o / self;\\n\\n        }else if( tname === \\\"int\\\") {\\n            return Number(o) / self;\\n\\n        }else {\\n            return NotImplemented;\\n\\n    }};\\n\\n    };\\nfloat.prototype.__neg__ = function __neg__(){const self = this;\\n        return -self;\\n\\n    };\\nfloat.prototype.__int__ = function __int__(){const self = this;\\n        return ((x) => Math.trunc(x))(self);\\n\\n    };\\nfloat.prototype.__abs__ = function __abs__(){const self = this;\\n        return ((x) => Math.abs(x))(self);\\n\\n    };\\n\\n        return float;\\n    })();\\n    ;\\n\\nconst __exported__ = {float}\";","import \"@RBrython/rbry/runlib\";\n\nimport Runner, { PyModule } from \"./interface\";\nimport { $RB } from \"@RBrython/rbry/runlib\";\n\nexport const modules: Record<string, any> = {};\n\nexport default class RBrythonGlobalRunner extends Runner {\n\n    #module   = modules; // h4ck\n    #builtins: Record<string, any> = {};\n\n    override async run(jscode: string) {\n        return await this.runFunction( this.loadAsFunction(jscode) );\n    }\n    override runSync(jscode: string) {\n        return this.runSyncFunction( this.loadAsSyncFunction(jscode) );\n    }\n\n    override loadAsFunction(jscode: string): (runlib: any) => Promise<PyModule> {\n        return eval(jscode) as (runlib: any) => Promise<PyModule>;\n    }\n    override async runFunction( fct: (runlib: any) => Promise<PyModule> ) {\n        return await fct($RB);\n    }\n\n    override loadAsSyncFunction(jscode: string): (runlib: any) => PyModule {\n        return eval(jscode) as (runlib: any) => PyModule;\n    }\n    override runSyncFunction( fct: (runlib: any) => PyModule ) {\n        return fct($RB);\n    }\n\n    // modules\n    override registerModule(name: string, symbols: PyModule): void {\n        this.#module[name] = symbols;\n    }\n    override getModule(name: string): PyModule {\n        return this.#module[name];\n    } \n\n    // builtins\n    override registerBuiltins(symbols: PyModule): void {\n        for(let name in symbols)\n            this.registerBuiltin(name, symbols[name]);\n    }\n    override registerBuiltin(name: string, value: any): void {\n        this.#builtins[name] = value;\n\n        // @ts-ignore\n        globalThis[name] = value;\n    }\n}","export const SHADOW_JS: Record<string, any> = {}\n\nexport default function shadowJS(value: string, ro: boolean = false) {\n    const prefix = ro ? \"RO\" : \"\"\n    return (cls: any) => (SHADOW_JS[prefix + value] = cls);\n}","import { SHADOW_JS } from \"../interface/shadowJS\";\n\nexport function getClass(o: unknown) {\n\n    const typename = typeof o;\n\n    if( typename === \"function\" ) {\n        //TODO: is class ? is something else ?\n        // @ts-ignore\n        return type;\n    }\n\n    if( typename === \"object\" ) {\n\n        // @ts-ignore\n        const klassname = o.constructor.name;\n\n        if( klassname in SHADOW_JS)\n            return SHADOW_JS[klassname];\n\n        if( Object.isFrozen(o) && `RO${klassname}` in SHADOW_JS)\n            return SHADOW_JS[`RO${klassname}`];\n\n        // @ts-ignore;\n        if( o.constructor === Error )\n            // @ts-ignore\n            return Exception;\n\n        // @ts-ignore;\n        return o.constructor;\n    }\n\n    // @ts-ignore\n    //TODO: remove globalThis[]\n    const lit_class = SHADOW_JS[typename];\n    if( lit_class !== undefined)\n        return lit_class;\n\n    throw new Error(`JS type ${typename} not implemented yet`);\n}","import { getClass } from \"../helpers/getClass\";\n\n// @ts-ignore\nconst NotImplemented = globalThis.NotImplemented = Symbol();\n\nexport default function op(a: unknown, op: string, b: unknown) {\n\n    const ka = getClass(a);\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let result = NotImplemented;\n\n    let fct = ka.prototype[`__${op}__`];\n    if( fct !== undefined )\n        result = fct.call(a, b);\n\n    if( result !== NotImplemented)\n        return result;\n    \n    // iop\n    if( op[0] === \"i\" ) {\n\n        op = op.slice(1);\n        fct = ka.prototype[`__${op}__`];\n        \n        if( fct !== undefined)\n            result = fct.call(a, b)\n\n        if( result !== NotImplemented)\n            return result;\n    }\n\n    // try to reverse\n    const kb = getClass(b);\n    if( kb === undefined ) {\n        console.warn(b, \"r\" + op);\n        throw new Error(\"?\");\n    }\n\n    let rop;\n    if( op.length == 2 && op !== \"or\" ) // cmp\n        rop = cmp_reversed[op as keyof typeof cmp_reversed];\n    else\n        rop = `r${op}`;\n    \n    fct = kb.prototype[`__${rop}__`];\n    if( fct !== undefined )\n        result = fct.call(b, a);\n\n    if( result !== NotImplemented)\n        return result;\n\n    // fallbacks\n    if( op === \"eq\" ) return a === b;\n    if( op === \"ne\" ) return a !== b;\n    \n    throw new Error(`Operation not implemented ${ka.name} ${op} ${kb.name}`);\n}\n\nconst cmp_reversed = {\n    \"lt\": \"gt\",\n    \"gt\": \"lt\",\n    \"le\": \"ge\",\n    \"ge\": \"le\",\n    \"ne\": \"ne\",\n    \"eq\": \"eq\"\n}","export let KW: Record<string, any>|null = null;\n\nexport const IGNORE_ARG = Symbol();\n\nexport function setKW(args: Record<string, any>) {\n    KW = args;\n    return IGNORE_ARG;\n}\n\nexport function getKW() {\n    if( KW === null )\n        return {};\n    const args = KW;\n    KW = null;\n    return args;\n}","let _tmp: any = null;\n\nexport function saveTmp(v: any): any {\n    return _tmp = v;\n}\n\nexport function tmp(): any { // may reuse many time ?\n    return _tmp;\n}\n\nexport function getTmp(): any {\n    const tmp = _tmp;\n    _tmp = null\n    return tmp;\n}\n\nexport function withTmp(value: any): any {\n    _tmp = null;\n    return value;\n}\n\n/*\nexport function saveTmp(v: any): any {\n    return tmp = v;\n}\nexport function releaseTmp(v: any) {\n    tmp = null;\n    return v;\n}*/\n\n","// interface\nimport op     from \"./interface/op\";\nimport uop    from \"./interface/uop\";\nimport call   from \"./interface/call\";\nimport mcall  from \"./interface/mcall\";\nimport assert from \"./interface/assert\";\nimport getModule from \"./interface/getModule\";\nimport getModuleSync from \"./interface/getModuleSync\";\nimport { getTmp, saveTmp, tmp, withTmp } from \"./interface/tmp\";\nimport { getKW, setKW } from \"./interface/KW\";\nimport { getClass } from \"./helpers/getClass\";\nimport _in from \"./interface/in\";\nimport getitem from \"./interface/getitem\";\nimport setitem from \"./interface/setitem\";\nimport delitem from \"./interface/delitem\";\nimport getattr from \"./interface/getattr\";\nimport delattr from \"./interface/delattr\";\nimport setattr from \"./interface/setattr\";\nimport shadowJS from \"./interface/shadowJS\";\nimport ro from \"./interface/ro\";\n\n// @ts-ignore\nconst $RB = globalThis.$RB = {\n    // interface\n    op,\n    uop,\n    call,\n    mcall,\n    assert,\n    getitem,\n    setitem,\n    delitem,\n    getattr,\n    setattr,\n    delattr,\n    getKW,\n    setKW,\n    tmp,\n    getTmp,\n    saveTmp,\n    withTmp,\n    getModule,\n    getModuleSync,\n    getClass,\n    in: _in,\n    shadowJS,\n    ro\n}\nexport {$RB};\n\n// =====================================================\n\n//TODO: as macro...\nexport const IVALUE = Symbol();\n\n// @ts-ignore\nglobalThis.__JS_SET_IVALUE__ = (self, v) => self[IVALUE] = v;\n// @ts-ignore\nglobalThis.__JS_GET_IVALUE__ = (self) => self[IVALUE];","import { getClass } from \"../helpers/getClass\";\n\nexport default function uop(op:string, a: unknown) {\n\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n    if( fct === undefined) {\n        console.warn(a, ka);\n        throw new Error(`__${op}__ not defined`);\n    }\n    return fct.call(a);\n}","import { getClass } from \"../helpers/getClass\";\nimport isClass from \"../helpers/isClass\";\nimport { IGNORE_ARG } from \"./KW\";\n\nexport default function call(a: (...args:unknown[]) => unknown, ...args: unknown[]) {\n\n    if( args[args.length-1] === IGNORE_ARG)\n        args = args.slice(0,-1);\n\n    // @ts-ignore\n    let fct = a.__call__\n\n    if( fct === undefined ) {\n        fct = a;\n\n        // h4cky\n        if( fct.prototype?.__new__ !== undefined ) {\n            const b = getClass(fct).prototype.__call__;\n            if( b !== undefined) {\n                return b.call(fct, ...args);\n            }\n        }\n\n        if( isClass(fct) ) // only for JS classes now...\n            return new fct(...args);\n    }\n\n    return fct(...args);\n}\n","export default function isClass(o: unknown) {\n\n    if( o === Symbol)\n        return false;\n    \n    // from https://stackoverflow.com/questions/526559/testing-if-something-is-a-class-in-javascript\n    return Object.getOwnPropertyDescriptors(o)?.prototype?.writable === false;\n\n}\n// + https://github.com/brython-dev/brython/issues/2513","import { IGNORE_ARG } from \"./KW\";\n\nexport default function mcall(o: unknown, name: string, ...args: unknown[]) {\n    \n    if( args[args.length-1] === IGNORE_ARG)\n        args = args.slice(0,-1);\n    \n    // @ts-ignore\n    let fct = o[name];\n    if( fct === undefined) {\n        // @ts-ignore\n        if( o.prototype[name] === undefined) {\n            // @ts-ignore\n            console.warn(o, o.name, name);\n        }\n        // @ts-ignore\n        return o.prototype[name].call(...args);\n    }\n\n    // @ts-ignore\n    return o[name](...args);\n}","export default function assert(cond: boolean, msg: string = \"\") {\n    if( ! cond )\n        throw new Error(`Assertion failed: ${msg}`);\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function getitem(o: any, key: any) {\n    return getClass(o).prototype.__getitem__.call(o, key);\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function getitem(o: any, key: any, v: any) {\n    return getClass(o).prototype.__setitem__.call(o, key, v);\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function delitem(o: any, key: any) {\n    return getClass(o).prototype.__delitem__.call(o, key);\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function getattr(o: any, key: any) {\n    /*\n    if( ! (attr in o) )\n        return o.constructor[attr];\n    return o[attr];\n    */\n    return getClass(o).prototype.__getattr__.call(o, key);\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function setattr(o: any, key: any, v: any) {\n    return getClass(o).prototype.__setattr__.call(o, key, v);\n}","import { getClass } from \"../helpers/getClass\";\n\nexport default function delattr(o: any, key: any) {\n    return getClass(o).prototype.__delattr__.call(o, key);\n}","import { modules } from \"@RBrython/rbry/runners/RBrythonGlobalRunner\";\n\nexport default async function getModule(name: string) {\n\n    // h4ck\n    const module = modules[name];\n    if( module !== undefined )\n        return module;\n\n    if( name in globalThis)\n        return modules[name] = globalThis[name as keyof typeof globalThis];\n\n    // TODO...\n    if( \"__BRYTHON__\" in globalThis) {\n        // @ts-ignore\n        if( name in __BRYTHON__.imported)\n            // @ts-ignore\n            return modules[name] = __BRYTHON__.pyobj2jsob(__BRYTHON__.imported[name]);\n    }\n    \n    throw new Error(`module ${name} not found`);\n}\n    ","import { modules } from \"@RBrython/rbry/runners/RBrythonGlobalRunner\";\n\nexport default function getModuleSync(name: string) {\n\n    // h4ck\n    const module = modules[name];\n    if( module !== undefined )\n        return module;\n\n    if( name in globalThis)\n        return modules[name] = globalThis[name as keyof typeof globalThis];\n\n    // TODO...\n    if( \"__BRYTHON__\" in globalThis) {\n        // @ts-ignore\n        if( name in __BRYTHON__.imported)\n            // @ts-ignore\n            return modules[name] = __BRYTHON__.pyobj2jsob(__BRYTHON__.imported[name]);\n    }\n    \n    throw new Error(`module ${name} not found`);\n}\n    ","import { getClass } from \"../helpers/getClass\";\n\nexport default function _in(e: any, c: any) {\n\n    const kc = getClass(c);\n    if( kc === undefined ) {\n        console.warn(c);\n        throw new Error(\"?\")\n    }\n\n    let fct = kc.prototype[\"__contains__\"];\n    if( fct !== undefined )\n        return fct.call(c, e);\n\n    fct = kc.prototype[Symbol.iterator] //kc.prototype[\"__iter__\"];\n    if( fct !== undefined ) {\n        for( let elem of fct.call(c) )\n            // @ts-ignore\n            if( $RB.op(elem, \"eq\", e) )\n                return true;\n        return false;\n    }\n\n    throw new Error(\"Not implemented\");\n    //TODO: getitem...\n\n}","export default function ro(o: any) {\n    return Object.freeze(o);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import Runner from \"@RBrython/rbry/runners/RBrythonGlobalRunner\";\n\nconst runner = new Runner();\n\nrunner.registerModule(\"JS\", globalThis);\n\nconst builtins = [\n    require(\"!!raw-loader!@RBrython/rbry/corelib-aot/bool.js\").default,\n    require(\"!!raw-loader!@RBrython/rbry/corelib-aot/float.js\").default,\n    require(\"!!raw-loader!@RBrython/rbry/corelib-aot/int.js\").default,\n    require(\"!!raw-loader!@RBrython/rbry/corelib-aot/str.js\").default,\n    require(\"!!raw-loader!@RBrython/rbry/corelib-aot/mfct.js\").default\n]\n\nfor(let builtin of builtins)\n    runner.registerBuiltins( runner.loadAsFunction( builtin ) );\n\nexport default runner;"],"names":["Runner","modules","RBrythonGlobalRunner","run","jscode","this","runFunction","loadAsFunction","runSync","runSyncFunction","loadAsSyncFunction","eval","fct","$RB","registerModule","name","symbols","getModule","registerBuiltins","registerBuiltin","value","globalThis","SHADOW_JS","getClass","o","typename","type","klassname","constructor","Object","isFrozen","Error","Exception","lit_class","undefined","NotImplemented","Symbol","cmp_reversed","KW","IGNORE_ARG","_tmp","op","a","b","ka","console","warn","result","prototype","call","slice","kb","rop","length","uop","args","__call__","__new__","getOwnPropertyDescriptors","writable","mcall","assert","cond","msg","getitem","key","__getitem__","setitem","v","__setitem__","delitem","__delitem__","getattr","__getattr__","setattr","__setattr__","delattr","__delattr__","getKW","setKW","tmp","getTmp","saveTmp","withTmp","async","module","__BRYTHON__","imported","pyobj2jsob","getModuleSync","in","e","c","kc","iterator","elem","shadowJS","ro","prefix","cls","freeze","IVALUE","__JS_SET_IVALUE__","self","__JS_GET_IVALUE__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","d","definition","defineProperty","enumerable","get","obj","prop","hasOwnProperty","runner","builtins","require","builtin"],"sourceRoot":""}