var __webpack_modules__={137:(e,t,n)=>{function _(){return function(e){--e.indent_level,e.w_line()}}n.d(t,{A:()=>_})},238:(e,t,n)=>{function _(e,...t){if(2===t.length){const n=t[0].value;return void e.w`${n}${t[1]}`}const n=t[1].value;if("[]"===n)return e.w`${t[0]}[${t[2]}]`;e.w`${t[0]} ${n} ${t[2]}`}n.d(t,{A:()=>_})},382:(e,t,n)=>{n.d(t,{A:()=>_});const _='from types import NotImplementedType\nfrom RBM import __JS_OP__, __JS_SHADOW__, string\n\n@__JS_SHADOW__("string")\nclass str(string):\n    def __new__(cls, o: object, /) -> str:\n        #return __JS_AS_STRING__(o) # type: ignore\n        return type(o).__str__(o) # type: ignore\n    \n    def __eq__(self, o: object, /) -> bool:\n        return __JS_OP__(self, "==", o)\n    \n    def __add__(self, o: object, /) -> NotImplementedType|str:\n        match o:\n            case str  (): return __JS_OP__(self, "+", o) # type: ignore\n            case _      : return NotImplemented\n\n    def __mul__(self, o: object, /) -> NotImplementedType|str:\n        match o:\n            case int  (): return __JS_WRITE__("self.repeat(Number(b))") # type: ignore\n            case _      : return NotImplemented\n    \n    def __rmul__(self, o: object, /) -> NotImplementedType|str:\n        match o:\n            case int  (): return __JS_WRITE__("self.repeat(Number(b))") # type: ignore\n            case _      : return NotImplemented'},723:(e,t,n)=>{function _(){return function(e){e.w`$RB.tmp()`}}n.d(t,{A:()=>_})},1069:(e,t,n)=>{n.d(t,{A:()=>_});const _="def range(a1: int, a2: int|None = None, a3: int|None = None):\n    beg = 0\n    end = a1\n    inc = 1\n\n    if a2 is not None:\n        beg = a1\n        end = a2\n\n        if a3 is not None:\n            inc = a3\n\n    i = beg\n    while i != end:\n        yield i\n        i += inc"},1101:(e,t,n)=>{function _(e,t){t.w`$RB.ro([`;for(let n=0;n<e.elts.length;++n)t.w_node(e.elts[n]),t.w_str(", ");t.w`])`}n.d(t,{A:()=>_})},1264:(e,t,n)=>{function _(e,t,...n){var _;e.w`(${_=t.value,_=_.replaceAll("\\n\\","\n")})(`;for(let t=0;t<n.length;++t)e.w`${n[t]},`;e.w`)`}n.d(t,{A:()=>_})},1269:(e,t,n)=>{n.d(t,{A:()=>_});const _='from RBM import __JS_OP__, __JS_SHADOW__, __JS_WRITE__, ROArray\n\n@__JS_SHADOW__("Array", True)\nclass tuple(ROArray):\n    def __getitem__(self, i: int):\n        return __JS_OP__(self, "[]", i)\n    \n    def __len__(self):\n        return __JS_WRITE__("this.length")'},1328:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(8119);function r(e,t){return(0,_.Qs)(t.result_type,_.dA)?e=>e.w`(${t})`:e(t)}},1336:(e,t,n)=>{function _(e){return null!=e&&"$name"in e.constructor}function r(e){return e.constructor.$name}function o(e){return e.constructor.$name}function s(e){return[...Object.values(e)].filter((e=>"object"==typeof e&&void 0!==e.constructor.$name))}n.d(t,{VJ:()=>_,Vq:()=>r,i0:()=>s,wB:()=>o})},1406:(e,t,n)=>{function _(){return function(e){++e.indent_level,e.w_line()}}n.d(t,{A:()=>_})},1445:(e,t,n)=>{n.d(t,{A:()=>_});const _='\nfrom RBM import __JS_WRITE__\n\nclass Exception():\n\n    def __new__(cls, arg: str|None):\n        return __JS_WRITE__("new Error(arg)")\n\n    def __str__(self):\n        return __JS_WRITE__("this.message")'},1534:(e,t,n)=>{function _(e,t){console.warn(e),t.w`(function(){${t.hm.BB()}`,t.w`const _r_ = [];${t.hm.NL()}`;for(let n=0;n<e.generators.length;++n){const _=e.generators[n];t.w`for(let ${_.target} of ${_.iter}){${t.hm.BB()}`;for(let e=0;e<_.ifs.length;++e)t.w`if(${_.ifs[e]}){${t.hm.BB()}`}t.w`_r_.push([${e.key}, ${e.value}])`;for(let n=0;n<e.generators.length;++n){t.w`${t.hm.BE()}}`;for(let _=0;_<e.generators[n].ifs.length;++_)t.w`${t.hm.BE()}}`}t.w`${t.hm.NL()}return dict(_r_);`,t.w`${t.hm.BE()}})()`}n.d(t,{A:()=>_})},1701:(e,t,n)=>{function _(e,t){t.w`( ${t.hm.bool(e.test)} ? ${e.body} : ${e.orelse} )`}n.d(t,{A:()=>_})},1727:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(6724);function r(e,t){return(0,_.p)(t)?e=>e.w_node(t):e(t)}},1777:(e,t,n)=>{n.d(t,{A:()=>_});const _='from types import NotImplementedType\nfrom RBM import __JS_OP__, __JS_AS_NUMBER__, __JS_SHADOW__, __JS_WRITE__, number\n\n@__JS_SHADOW__("number")\nclass float(number):\n    def __new__(cls, o: object, /) -> float:\n        if type(o) is str:\n            if o == "infinity" or o == "inf":\n                return __JS_WRITE__("Number.POSITIVE_INFINITY") # pyright: ignore[reportReturnType]\n            if o == "-infinity" or o == "-inf":\n                return __JS_WRITE__("Number.NEGATIVE_INFINITY") # pyright: ignore[reportReturnType]\n            return __JS_AS_NUMBER__(o)\n        return type(o).__float__(o) # type: ignore\n    \n    def __str__(self):\n        return __JS_WRITE__("`${this}`")\n    \n    def __eq__(self, o: object, /) -> bool:\n        return __JS_OP__(self, "==", o)    \n\n    def __add__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(self, "+", o)\n            case int  (): return __JS_OP__(self, "+", __JS_AS_NUMBER__(o))\n            case _      : return NotImplemented\n\n    def __radd__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(o                  , "+", self)\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), "+", self)\n            case _      : return NotImplemented\n\n    def __sub__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(self, "-", o)\n            case int  (): return __JS_OP__(self, "-", __JS_AS_NUMBER__(o))\n            case _      : return NotImplemented\n\n    def __rsub__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(o                  , "-", self)\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), "-", self)\n            case _      : return NotImplemented\n\n    def __mul__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(self, "*", o)\n            case int  (): return __JS_OP__(self, "*", __JS_AS_NUMBER__(o))\n            case _      : return NotImplemented\n\n    def __rmul__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(o                  , "*", self)\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), "*", self)\n            case _      : return NotImplemented\n\n    def __truediv__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(self, "/", o)\n            case int  (): return __JS_OP__(self, "/", __JS_AS_NUMBER__(o))\n            case _      : return NotImplemented\n\n    def __rtruediv__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case float(): return __JS_OP__(o                  , "/", self)\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), "/", self)\n            case _      : return NotImplemented\n\n    ### unary operators ###\n\n    def __neg__(self, /) -> float:\n        return __JS_OP__("-", self)\n    \n    def __int__(self, /) -> int:\n        return __JS_RUN__(\'(x) => Math.trunc(x)\', self) # type: ignore\n    \n    def __abs__(self, /) -> int:\n         return __JS_RUN__(\'(x) => Math.abs(x)\', self) # type: ignore'},1846:(e,t,n)=>{n.d(t,{A:()=>_});const _='from RBM import __JS_WRITE__, obj\n\nclass object(obj): # typecheck h4ck\n\n    def __new__(cls):\n        return __JS_WRITE__("Object.create(this.prototype)")\n\n    def __eq__(self, o: obj, /):\n        if self is o: return True\n        return NotImplemented\n    \n    def __ne__(self, o: obj, /):\n        return not self == o\n    \n    def __lt__(self, o: obj, /):\n        return NotImplemented\n    def __le__(self, o: obj, /):\n        return NotImplemented\n    def __gt__(self, o: obj, /):\n        return NotImplemented\n    def __ge__(self, o: obj, /):\n        return NotImplemented\n    \n    # print\n    def __repr__(self):\n        # TODO: __module__ not implemented\n        # TODO: __qualname__ not implemented\n        return "<? object>" # using f"" = infinite loop.\n    \n    def __str__(self):\n        return type(self).__repr__(self)\n    \n    def __format__(self, f:str):\n        return type(self).__str__(self)'},2312:(e,t,n)=>{n.d(t,{A:()=>_});class _{}},2361:(e,t,n)=>{n.d(t,{A:()=>_});const _="def isinstance(o: object, t):\n    ot = type(o)\n    # TODO: better\n    return ot is t"},2445:(e,t,n)=>{n.d(t,{A:()=>_});const _="def len(o, /) -> float|int:\n    return type(o).__len__(o) # pyright: ignore[reportArgumentType]"},2458:(e,t,n)=>{function _(e,t){return t.w`(${e.target} = ${e.value})`}n.d(t,{A:()=>_})},2537:(e,t,n)=>{n.d(t,{A:()=>_});const _="def format(o: object, f: str):\n    return type(o).__format__(o, f)"},2683:(e,t,n)=>{function _(e,t){t.w`(function*(){${t.hm.BB()}`;for(let n=0;n<e.generators.length;++n){const _=e.generators[n];t.w`for(let ${_.target} of ${_.iter}){${t.hm.BB()}`;for(let e=0;e<_.ifs.length;++e)t.w`if(${_.ifs[e]}){${t.hm.BB()}`}t.w`yield ${e.elt}`;for(let n=0;n<e.generators.length;++n){t.w`${t.hm.BE()}}`;for(let _=0;_<e.generators[n].ifs.length;++_)t.w`${t.hm.BE()}}`}t.w`${t.hm.BE()}})()`}n.d(t,{A:()=>_})},2770:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(8119);function r(e){"boolean"==typeof e.node.value&&(e.node.result_type={type:_.dA})}},2977:(e,t,n)=>{function _(e,...t){e.w_str("console.log(");for(let n=0;n<t.length;++n)e.w`${t[n]},`;e.w_str(");")}n.d(t,{A:()=>_})},3183:(e,t,n)=>{function _(e){return function(e){e.w`$RB.withTmp`}}n.d(t,{A:()=>_})},3559:(e,t,n)=>{n.d(t,{A:()=>_});const _='from RBM import __JS_OP__, __JS_SHADOW__, __JS_WRITE__, Array\n\n@__JS_SHADOW__("Array")\nclass list(Array):\n    def __getitem__(self, i: int):\n        return __JS_OP__(self, "[]", i)\n    \n    def __len__(self):\n        return __JS_WRITE__("this.length")'},3629:(e,t,n)=>{function _(){return function(e){e.w`$RB.getTmp()`}}n.d(t,{A:()=>_})},3838:(e,t,n)=>{function _(e,t){e.w_str(t.value.replaceAll("\\n\\\n","\n"))}n.d(t,{A:()=>_})},3896:(e,t,n)=>{function _(e,t){const n=t.isMethod(),_=e.name,r=e.body;n&&t.w`${t.getName(-1)}.prototype.${_} = `;for(let n=0;n<e.decorator_list.length;++n)t.w`${e.decorator_list[n]}(`;t.w`async function ${_} ${e.args}`,t.w_body(r),t.w`}`;for(let n=0;n<e.decorator_list.length;++n)t.w`)`}n.d(t,{A:()=>_})},3929:(e,t,n)=>{function _(e,t){e.w`BigInt(${t})`}n.d(t,{A:()=>_})},4103:(e,t,n)=>{n.d(t,{A:()=>_});const _='from JS import console\n\ndef print(*a):\n    s = ""\n\n    for i in range(len(a)):\n        if i != 0:\n            s += " "\n        s += str(a[i])\n\n    console.log(s)'},4567:(e,t,n)=>{function _(e,t){t.w`{${t.hm.BB()}`;for(let n=0;n<e.items.length;++n)t.w`const _w${n}_ = ${e.items[n].context_expr};${t.hm.NL()}`;for(let n=0;n<e.items.length;++n){const _=e.items[n];void 0!==_.optional_vars&&t.w`var ${_.optional_vars} = `,t.w`$RB.mcall(_w${n}_, '__enter__');${t.hm.NL()}`}t.w`let _err_ = null;${t.hm.NL()}`,t.w`try{${e.body}} catch(_e_) { _err_ = _e_ }${t.hm.NL()}`,t.w`finally {${t.hm.BB()}`,t.w`let _et_ = null; let _ee_ = null; let _ex_ = null;${t.hm.NL()}`,t.w`if(_err_ !== null) {${t.hm.BB()}`,t.w`_et_ = 'type';${t.hm.NL()}`,t.w`_ee_ = 'exp';${t.hm.NL()}`,t.w`_ex_ = 'trace';`,t.w`${t.hm.BE()}}${t.hm.NL()}`,t.w`let _ok_ = true;${t.hm.NL()}`;for(let n=e.items.length-1;n>=0;--n)e.items[n],t.w`_ok_ &&= $RB.mcall(_w${n}_, '__exit__', _et_, _ee_, _ex_);${t.hm.NL()}`;t.w`if( _err_ !== null && ! _ok_ ) throw _err_;`,t.w`${t.hm.BE()}}${t.hm.BE()}}`}n.d(t,{A:()=>_})},4623:(e,t,n)=>{n.d(t,{A:()=>_});const _='from RBM import __JS_OP__, __JS_SHADOW__, __JS_WRITE__, boolean\n\n@__JS_SHADOW__("boolean")\nclass bool(boolean, int): # type: ignore (bool is Final)\n    def __new__(cls, arg: object, /) -> boolean:# -> Any | bool:\n        # can\'t use Python "if", "or" as we\'d have an infinite loop.\n        __JS_WRITE__("if(arg === true || arg === false) { return arg; }")\n        return type(arg).__bool__(arg) # type: ignore'},4786:(e,t,n)=>{function _(e){return function(t){t.w`$RB.saveTmp(${e})`}}n.d(t,{A:()=>_})},4868:(e,t,n)=>{function _(){return function(e){e.w_line()}}n.d(t,{A:()=>_})},5091:(e,t,n)=>{n.d(t,{A:()=>_});const _='from RBM import __JS_WRITE__\n\n_marker = __JS_WRITE__("Symbol()") #object()\n\ndef next(it, defaultVal: object = _marker):\n    val = __JS_WRITE__("it.next()") #TODO: we use JS iterator\n    if __JS_WRITE__("val.done") == True:\n        if defaultVal is _marker:\n            raise Exception("StopIteration")\n        return defaultVal\n    \n    return __JS_WRITE__("val.value")'},5136:(e,t,n)=>{n.d(t,{A:()=>_});const _="def abs(o: float|int, /) -> float|int:\n    return type(o).__abs__(o) # pyright: ignore[reportArgumentType]"},5211:(e,t,n)=>{function _(e,t){t.w`[`;for(let n=0;n<e.elts.length;++n)t.w_node(e.elts[n]),t.w_str(", ");t.w`]`}n.d(t,{A:()=>_})},5315:(e,t,n)=>{function _(e,t){t.w`dict([`;for(let n=0;n<e.keys.length;++n)t.w`[${e.keys[n]}, ${e.values[n]}], `;t.w`])`}n.d(t,{A:()=>_})},5351:(e,t,n)=>{n.d(t,{A:()=>_});const _='from RBM import __JS_OP__, __JS_WRITE__\n\nclass type:\n    def __new__(cls, o: object, /) -> type:\n        return __JS_WRITE__("$RB.getClass(o)") # pyright: ignore[reportReturnType]\n\n    def __call__(self, *args):\n        __JS_WRITE__("""\n                     let instance;\n                     const factory = this.prototype.__new__;\n                     if( factory !== undefined )\n                        instance = factory.call(self, ...args)\n                     else\n                        instance = new self(...args) // JS\n                     \n                     const init = this.prototype.__init__;\n                     if( init !== undefined)\n                        init.call(instance, ...args)\n                     """)\n        return instance # type: ignore'},5952:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(1336);function r(e,t){for(let n=0;n<e.targets.length;++n){const r=(0,_.Vq)(e.targets[n]);if("Subscript"!==r){if("Attribute"!==r)throw console.warn(r),new Error("Not implemented");{const _=e.targets[n];t.w`$RB.delattr(${_.value}, "${_.attr}");${t.hm.NL}`}}else{const _=e.targets[n];t.w`$RB.delitem(${_.value}, ${_.slice});${t.hm.NL}`}}}},6057:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(8119);function r(e){(e.symtab.typedSymbols||={})[e.node.name]={type:_.RK}}},6263:(e,t,n)=>{function _(e,t){t.w`await ${e.value}`}n.d(t,{A:()=>_})},6479:(e,t,n)=>{n.d(t,{A:()=>_});const _='from JS import Symbol\n\n__BUCKETS__ = Symbol("buckets")\n\nclass dict:\n    def __init__(self, args):\n\n        __JS_WRITE__("this[__BUCKETS__] = new Map()")\n\n        # destructured arg not implemented in for\n        # __eq__ influence not implemented...\n        for i in range(len(args)):\n            __JS_WRITE__("this[__BUCKETS__]").set(args[i][0], args[i][1])'},6528:(e,t,n)=>{n.d(t,{A:()=>_});const _='from types import NotImplementedType\nfrom RBM import __JS_AS_NUMBER__, __JS_OP__, __JS_SHADOW__, bigint\n\n@__JS_SHADOW__("bigint")\nclass int(bigint):\n\n    def __new__(cls, o: object, base: int, /) -> int:\n        if type(o) == str:\n            return __JS_RUN__( # type: ignore\n                \'\'\'\n                    (x, base) => {\n                        if( base !== 16)\n                            return BigInt(x);\n                        \n                        let result = 0n;\n                        for(let i = 2; i < x.length; ++i)\n                            result = result << 4n + BigInt( parseInt(this.slice(i, i+8), 16) );\n                        return result;\n                    }\n                \'\'\', o, base) # type: ignore\n        return type(o).__int__(o) # type: ignore\n    \n    def __str__(self):\n        return __JS_WRITE__("`${this}`")\n    \n    def __eq__(self, o: object, /) -> bool:\n        return __JS_OP__(self, "==", o)\n    \n    def __ge__(self, o: object, /) -> bool:\n        return __JS_OP__(self, ">=", o)\n\n\n    def __add__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "+", o)\n            case _      : return NotImplemented\n    \n    def __radd__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(o, "+", self)\n            case _      : return NotImplemented\n    \n\n    def __sub__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "-", o)\n            case _      : return NotImplemented\n    \n    def __rsub__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(o, "-", self)\n            case _      : return NotImplemented\n    \n    def __mul__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "*", o)\n            case _      : return NotImplemented\n    \n    def __rmul__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(o, "*", self)\n            case _      : return NotImplemented\n\n    def __pow__(self, o: object, mod: int|None = None, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "**", o)\n            case _      : return NotImplemented\n    \n    def __rpow__(self, o: object, mod: int|None = None, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(o, "**", self)\n            case _      : return NotImplemented\n\n    def __truediv__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(self),\n                                           "/",\n                                           __JS_AS_NUMBER__(o))\n            case _      : return NotImplemented\n    \n    def __rtruediv__(self, o: object, /) -> NotImplementedType|float:\n        match o:\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o),\n                                           "*",\n                                           __JS_AS_NUMBER__(self) )\n            case _      : return NotImplemented\n\n    def __mod__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "%", o)\n            case _      : return NotImplemented\n    \n    def __rmod__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "%", o)\n            case _      : return NotImplemented\n    \n    def __or__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "|", o)\n            case _      : return NotImplemented\n    \n    def __ror__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "|", o)\n            case _      : return NotImplemented\n\n    def __and__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "&", o)\n            case _      : return NotImplemented\n    \n    def __rand__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "&", o)\n            case _      : return NotImplemented\n        \n    def __xor__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "^", o)\n            case _      : return NotImplemented\n    \n    def __rxor__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "^", o)\n            case _      : return NotImplemented\n\n    def __lshift__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  ():\n                __JS_LOG__("INT")\n                return __JS_OP__(self, "<<", o)\n            case _      :\n                __JS_LOG__("OTHER", o)\n                return NotImplemented\n    \n    def __rlshift__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, "<<", o)\n            case _      : return NotImplemented\n\n    def __rshift__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, ">>", o)\n            case _      : return NotImplemented\n    \n    def __rrshift__(self, o: object, /) -> NotImplementedType|int:\n        match o:\n            case int  (): return __JS_OP__(self, ">>", o)\n            case _      : return NotImplemented\n    \n    ### unary operators ###\n    def __invert__(self, /) -> int:\n        return __JS_OP__("~", self)\n\n    def __neg__(self, /) -> int:\n        return __JS_OP__("-", self)\n    \n    def __abs__(self, /) -> int:\n         return __JS_RUN__("x => x < 0n ? -x : x", self) # type: ignore'},6706:(e,t,n)=>{n.d(t,{A:()=>r,D:()=>o});var _=n(1336);function r(e,t){const n=e.func,r=n.id;if(r in t.macros)t.macros[r](t,...e.args);else{if("Attribute"===(0,_.Vq)(n)){const e=n;t.w`$RB.mcall(${e.value}, "${e.attr}", `}else t.w`$RB.call(${n}, `;o(e,t),t.w_str(")")}}function o(e,t){const n=e.args,_=e.keywords;for(let e=0;e<n.length;++e)t.w`${n[e]}, `;if(_.length){t.w`$RB.setKW({`;for(let e=0;e<_.length;++e)t.w`${_[e].arg}: ${_[e].value},`;t.w`})`}}},6724:(e,t,n)=>{n.d(t,{A:()=>o,p:()=>r});var _=n(1336);function r(e){const t=(0,_.Vq)(e);return"Constant"===t||"Name"===t}function o(e,t){return r(t)?e=>e.w_node(t):e(t)}},6894:(e,t,n)=>{function _(e){return function(t){t.w`bool(${e})`}}n.d(t,{A:()=>_})},7061:(e,t,n)=>{n.d(t,{A:()=>_});const _="def repr(o: object):\n    return type(o).__repr__(o)"},7378:(e,t,n)=>{function _(e,t){t.w`yield * ${e.value}`}n.d(t,{A:()=>_})},7734:(e,t,n)=>{function _(e,t){t.w`(function(){${t.hm.BB()}`,t.w`const _r_ = [];${t.hm.NL()}`;for(let n=0;n<e.generators.length;++n){const _=e.generators[n];t.w`for(let ${_.target} of ${_.iter}){${t.hm.BB()}`;for(let e=0;e<_.ifs.length;++e)t.w`if(${_.ifs[e]}){${t.hm.BB()}`}t.w`_r_.push(${e.elt})`;for(let n=0;n<e.generators.length;++n){t.w`${t.hm.BE()}}`;for(let _=0;_<e.generators[n].ifs.length;++_)t.w`${t.hm.BE()}}`}t.w`${t.hm.NL()}return _r_;`,t.w`${t.hm.BE()}})()`}n.d(t,{A:()=>_})},7745:(e,t,n)=>{function _(e,t){e.w`await ${t}`}n.d(t,{A:()=>_})},7795:(e,t,n)=>{function _(e,t){e.w`\`\${${t}}\``}n.d(t,{A:()=>_})},8039:(e,t,n)=>{function _(e,t){e.w`$RB.shadowJS(${t})`}n.d(t,{A:()=>_})},8119:(e,t,n)=>{n.d(t,{Qs:()=>o,RK:()=>_,dA:()=>r});const _={},r={};function o(e,t){return void 0!==e&&e.type===t}},8189:(e,t,n)=>{n.d(t,{A:()=>o});var _=n(1336),r=n(8119);function o(e){"Not"===(0,_.wB)(e.node.op)&&(e.node.result_type={type:r.dA})}},8771:(e,t,n)=>{function _(e,t){e.w`Number(${t})`}n.d(t,{A:()=>_})},8958:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>RBrythonGlobalRunner,a:()=>modules});var _RBrython_rbry_runlib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9160),_interface__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2312);const modules={};class RBrythonGlobalRunner extends _interface__WEBPACK_IMPORTED_MODULE_1__.A{#e=modules;#t={};async run(e){return await this.runFunction(this.loadAsFunction(e))}runSync(e){return this.runSyncFunction(this.loadAsSyncFunction(e))}loadAsFunction(jscode){return eval(jscode)}async runFunction(e){return await e(_RBrython_rbry_runlib__WEBPACK_IMPORTED_MODULE_0__.t)}loadAsSyncFunction(jscode){return eval(jscode)}runSyncFunction(e){return e(_RBrython_rbry_runlib__WEBPACK_IMPORTED_MODULE_0__.t)}registerModule(e,t){this.#e[e]=t}getModule(e){return this.#e[e]}registerBuiltins(e){for(let t in e)this.registerBuiltin(t,e[t])}registerBuiltin(e,t){this.#t[e]=t,globalThis[e]=t}}},9050:(e,t,n)=>{n.d(t,{A:()=>s});var _=n(1336),r=n(8119),o=n(6706);function s(e,t,n){if("Name"===(0,_.Vq)(e.func)&&void 0!==t.symtab.typedSymbols){const n=e.func.id,_=t.symtab.typedSymbols[n];if((0,r.Qs)(_,r.RK))return t.w`${n}(`,(0,o.D)(e,t),void t.w`)`}n(e,t)}},9160:(e,t,n)=>{n.d(t,{t:()=>u});const _={};function r(e){const t=typeof e;if("function"===t)return type;if("object"===t){const t=e.constructor.name;return t in _?_[t]:Object.isFrozen(e)&&`RO${t}`in _?_[`RO${t}`]:e.constructor===Error?Exception:e.constructor}const n=_[t];if(void 0!==n)return n;throw new Error(`JS type ${t} not implemented yet`)}const o=globalThis.NotImplemented=Symbol(),s={lt:"gt",gt:"lt",le:"ge",ge:"le",ne:"ne",eq:"eq"};let i=null;const a=Symbol();var l=n(8958);let c=null;const u=globalThis.$RB={op:function(e,t,n){const _=r(e);if(void 0===_)throw console.warn(e,t),new Error("?");let i=o,a=_.prototype[`__${t}__`];if(void 0!==a&&(i=a.call(e,n)),i!==o)return i;if("i"===t[0]&&(t=t.slice(1),a=_.prototype[`__${t}__`],void 0!==a&&(i=a.call(e,n)),i!==o))return i;const l=r(n);if(void 0===l)throw console.warn(n,"r"+t),new Error("?");let c;if(c=2==t.length&&"or"!==t?s[t]:`r${t}`,a=l.prototype[`__${c}__`],void 0!==a&&(i=a.call(n,e)),i!==o)return i;if("eq"===t)return e===n;if("ne"===t)return e!==n;throw new Error(`Operation not implemented ${_.name} ${t} ${l.name}`)},uop:function(e,t){const n=r(t);if(void 0===n)throw console.warn(t,e),new Error("?");let _=n.prototype[`__${e}__`];if(void 0===_)throw console.warn(t,n),new Error(`__${e}__ not defined`);return _.call(t)},call:function(e,...t){t[t.length-1]===a&&(t=t.slice(0,-1));let n=e.__call__;if(void 0===n){if(n=e,void 0!==n.prototype?.__new__){const e=r(n).prototype.__call__;if(void 0!==e)return e.call(n,...t)}if((_=n)!==Symbol&&!1===Object.getOwnPropertyDescriptors(_)?.prototype?.writable)return new n(...t)}var _;return n(...t)},mcall:function(e,t,...n){return n[n.length-1]===a&&(n=n.slice(0,-1)),void 0===e[t]?(void 0===e.prototype[t]&&console.warn(e,e.name,t),e.prototype[t].call(...n)):e[t](...n)},assert:function(e,t=""){if(!e)throw new Error(`Assertion failed: ${t}`)},getitem:function(e,t){return r(e).prototype.__getitem__.call(e,t)},setitem:function(e,t,n){return r(e).prototype.__setitem__.call(e,t,n)},delitem:function(e,t){return r(e).prototype.__delitem__.call(e,t)},getattr:function(e,t){return r(e).prototype.__getattr__.call(e,t)},setattr:function(e,t,n){return r(e).prototype.__setattr__.call(e,t,n)},delattr:function(e,t){return r(e).prototype.__delattr__.call(e,t)},getKW:function(){if(null===i)return{};const e=i;return i=null,e},setKW:function(e){return i=e,a},tmp:function(){return c},getTmp:function(){const e=c;return c=null,e},saveTmp:function(e){return c=e},withTmp:function(e){return c=null,e},getModule:async function(e){const t=l.a[e];if(void 0!==t)return t;if(e in globalThis)return l.a[e]=globalThis[e];if("__BRYTHON__"in globalThis&&e in __BRYTHON__.imported)return l.a[e]=__BRYTHON__.pyobj2jsob(__BRYTHON__.imported[e]);throw new Error(`module ${e} not found`)},getModuleSync:function(e){const t=l.a[e];if(void 0!==t)return t;if(e in globalThis)return l.a[e]=globalThis[e];if("__BRYTHON__"in globalThis&&e in __BRYTHON__.imported)return l.a[e]=__BRYTHON__.pyobj2jsob(__BRYTHON__.imported[e]);throw new Error(`module ${e} not found`)},getClass:r,in:function(e,t){const n=r(t);if(void 0===n)throw console.warn(t),new Error("?");let _=n.prototype.__contains__;if(void 0!==_)return _.call(t,e);if(_=n.prototype[Symbol.iterator],void 0!==_){for(let n of _.call(t))if($RB.op(n,"eq",e))return!0;return!1}throw new Error("Not implemented")},shadowJS:function(e,t=!1){const n=t?"RO":"";return t=>_[n+e]=t},ro:function(e){return Object.freeze(e)}},f=Symbol();globalThis.__JS_SET_IVALUE__=(e,t)=>e[f]=t,globalThis.__JS_GET_IVALUE__=e=>e[f]},9237:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(6724);function r(e,t){return(0,_.p)(t)?e=>e.w_node(t):e(t)}},9282:(e,t,n)=>{function _(e,t){t.w`yield ${e.value}`}n.d(t,{A:()=>_})},9469:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(6724);function r(e,t){return(0,_.p)(t)?e=>{}:e(t)}},9704:(e,t,n)=>{n.d(t,{A:()=>r});var _=n(8119);function r(e){e.node.result_type={type:_.dA}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};__webpack_require__.d(__webpack_exports__,{A:()=>RBrython_dev});var RBrythonGlobalRunner=__webpack_require__(8958);class Engine{}var runlib=__webpack_require__(9160);const handlers={},emitter_handlers=handlers,hacked=["number","bigint","boolean","string","obj","ROArray","Array"];function ClassDef(e,t){const n=e.name,_=e.body;t.w`var ${n} = `;for(let n=0;n<e.decorator_list.length;++n)t.w_node(e.decorator_list[n]),t.w_str("(");t.w`(() =>{${t.hm.BB()}`,t.w`function ${n}(...args) {${t.hm.BB()}`,t.w`return type.prototype.__call__.call(${n}, ...args)`,t.w`${t.hm.BE()}}${t.hm.NL()}`;let r=e.bases;if(r.length>=1&&hacked.includes(r[0].id)&&(r=r.slice(1)),0===r.length&&(r=["object"]),"object"!==n){t.w`${n}.prototype = Object.create(${r[0]}.prototype);${t.hm.NL()}`;for(let e=1;e<r.length;++e)t.w`Object.assign(${n}.prototype, ${r[e]}.prototype);${t.hm.NL()}`;t.w`${n}.prototype.constructor = ${n};`}t.w`${t.hm.BE()}`,t.w_body(_),t.w`${t.hm.BB()}return ${n};${t.hm.BE()}})()`;for(let n=0;n<e.decorator_list.length;++n)t.w_str(")")}var ast=__webpack_require__(1336);function hasYield(e){const t=[...e];let n;for(;n=t.pop();){if("Expr"===(0,ast.Vq)(n)&&(n=n.value),"Yield"===(0,ast.Vq)(n)||"YieldFrom"===(0,ast.Vq)(n))return!0;"body"in n&&t.push(...n.body)}return!1}function FunctionDef(e,t){const n=t.isMethod(),_=e.name,r=e.body,o=hasYield(r)?"*":"";n&&(t.w`${t.getName(-1)}.prototype.${_} = `,"__iter__"===_&&t.w`${t.getName(-1)}.prototype[Symbol.iterator] = `);for(let n=0;n<e.decorator_list.length;++n)t.w`${e.decorator_list[n]}(`;t.w`function ${o}${_} ${e.args}`,t.w_body(r),t.w`}`;for(let n=0;n<e.decorator_list.length;++n)t.w`)`}function Lambda(e,t){t.w`function ${e.args} return ${e.body}}`}function Arguments(e,t){t.w`(`;let n=0,_=0;const r=t.isMethod();r&&(e.posonlyargs.length?++n:++_);let o=e.posonlyargs.length+e.args.length-e.defaults.length;for(let _=n;_<e.posonlyargs.length;++_)t.w`${e.posonlyargs[_].arg}`,o>=_&&t.w` = ${e.defaults[_-o]}`,t.w`,`;o-=e.posonlyargs.length;for(let n=_;n<e.args.length;++n)t.w`_${e.args[n].arg}`,n>=o&&t.w` = ${e.defaults[e.posonlyargs.length+n-o]}`,t.w`,`;const s=void 0!==e.vararg;s&&t.w`...${e.vararg.arg}`;const i=e.args.length-_||void 0!==e.kwarg||e.kwonlyargs.length;if(i&&!s&&writeKW(e,t,_),t.w`){`,i&&s&&(t.w`${t.hm.BB()}var `,writeKW(e,t,_),t.w`;${t.hm.BE()}`),s&&t.w`${t.hm.BB()}${e.vararg.arg} = $RB.ro(${e.vararg.arg});${t.hm.BE()}`,r){let n="";n=e.posonlyargs.length>0?e.posonlyargs[0].arg:e.args[0].arg,t.w`${t.hm.BB()}const ${n} = this;${t.hm.BE()}`}}function writeKW(e,t,n){t.w`{`;for(let _=n;_<e.args.length;++_)t.w`${e.args[_].arg} = _${e.args[_].arg}, `;for(let n=0;n<e.kwonlyargs.length;++n)t.w`${e.kwonlyargs[n].arg}`,void 0!==e.kw_defaults[n]&&t.w` = ${e.kw_defaults[n]}`,t.w`, `;void 0!==e.kwarg&&t.w`...${e.kwarg.arg}`,t.w`} = $RB.getKW()`}function Global(){}function Nonlocal(){}function Subscript(e,t){t.w`$RB.getitem(${e.value}, ${e.slice})`}function Assert(e,t){t.mode!==MODE.PROD&&t.w`$RB.assert( ${t.hm.bool(e.test)}, ${e.msg??""})`}function Pass(e){}function Return(e,t){t.w`return ${e.value}`}const FUNCTION=0,CLASS=1,BODY=1,LOCAL_VAR=4096;class EmitContext{macros={};hm;mode;sync;handlers;jscode="";#n;constructor({opti:{handlers:e,hmacros:t},mode:n,sync:_},r,o){this.handlers=e,this.#n=[o],this.mode=n,this.macros=r,this.hm=t,this.sync=_}getScope(e){return this.symtab.symbols.$strings[e]}getName(e=0){return this.#n[this.#n.length-1+e].name}isTopLevel(){return 1===this.#n.length}isMethod(){const e=this.#n.length-1;return this.#n[e].type===FUNCTION&&this.#n[e-1].type===CLASS}get symtab(){return this.#n[this.#n.length-1]}w(e,...t){for(let n=0;n<t.length;++n){this.w_str(e[n]);const _=t[n];"function"==typeof _?_(this):(0,ast.VJ)(_)?this.w_node(_):Array.isArray(_)?this.w_body(_):this.jscode+=`${_}`}this.w_str(e[e.length-1])}w_str(e){return this.jscode+=e}indent_level=0;w_line(){const e="\n"+"  ".repeat(this.indent_level);this.jscode.endsWith(e)||(this.jscode+=e)}w_body(e){if(0!==e.length&&(1!==e.length||"Pass"!==(0,ast.Vq)(e[0]))){++this.indent_level;for(let t=0;t<e.length;++t)this.w_line(),this.w_node(e[t]),this.w_str(";");--this.indent_level,this.w_line()}}w_node(e){const t=(0,ast.Vq)(e),n=this.handlers[t];if(void 0===n)throw console.warn(e),new Error(`Node type ${(0,ast.Vq)(e)} is unknown`);const _="FunctionDef"===t||"ClassDef"===t;_&&this.enter(e.name),e.js_start=this.jscode.length,n(e,this),e.js_end=this.jscode.length,_&&this.leave()}enter(e){const t=this.symtab.children.find((t=>t.name===e));return this.#n.push(t),t}leave(){this.#n.pop()}}function Assign(e,t){const n=(0,ast.Vq)(e.targets[0]);if("Attribute"!==n){if("Subscript"!==n){for(let n=1;n<e.targets.length;++n)(t.getScope(e.targets[n].id)&LOCAL_VAR||t.isTopLevel())&&t.w`var ${e.targets[n]};`;(t.getScope(e.targets[0].id)&LOCAL_VAR||t.isTopLevel())&&t.w`var `;for(let n=0;n<e.targets.length;++n)t.w`${e.targets[n]} = `;return t.w_node(e.value)}{const n=e.targets[0];t.w`$RB.setitem(${n.value}, ${n.slice}, ${e.value})`}}else{const n=e.targets[0];t.w`$RB.setattr(${n.value}, "${n.attr}", ${e.value})`}}function Attribute(e,t){t.w`$RB.getattr(${e.value}, "${e.attr}")`}function BinOp(e,t){const n=e.left,_=e.right,r=(0,ast.wB)(e.op),o=binops[r];if(void 0===o)throw new Error(`BinOp ${r} not impl`);t.w`$RB.op(${n}, "${o}", ${_})`}const binops={Add:"add",Sub:"sub",Mult:"mul",Div:"truediv",FloorDiv:"floordiv",Pow:"pow",Mod:"mod",BitOr:"or",BitAnd:"and",BitXor:"xor",LShift:"lshift",RShift:"rshift"};function AugAssign(e,t){const n=e.target,_=(0,ast.wB)(e.op),r=e.value,o=binops[_];if(void 0===o)throw new Error(`BinOp ${_} not impl`);t.w`${n} = $RB.op(${n}, "i${o}", ${r})`}var Call=__webpack_require__(6706);function Compare(e,t){let n=e.left;for(let _=0;_<e.ops.length;++_){const r=0===_,o=_===e.ops.length-1;let s=(0,ast.wB)(e.ops[_]),i=n;r||(i=t.hm.getTmp(n));let a=n=e.comparators[_];if(o||(a=t.hm.saveTmp(a)),r||t.w` && `,"Is"===s){t.w`${i} === ${a}`;continue}if("IsNot"===s){t.w`${i} !== ${a}`;continue}if("NotIn"===s&&(t.w_str("!"),s="In"),"In"===s){t.w`$RB.in(${i}, ${a})`;continue}const l=cmpops[s];if(void 0===l)throw console.warn(s),new Error(`CmpOp ${s} not impl`);t.w`$RB.op(${i}, "${l}", ${a})`}}const cmpops={Eq:"eq",NotEq:"ne",Gt:"gt",GtE:"ge",Lt:"lt",LtE:"le",In:"contains"};function UnaryOp(e,t){const n=e.operand,_=(0,ast.wB)(e.op);if("Not"===_)return void t.w`! ${t.hm.bool(n)}`;const r=uops[_];if(void 0===r)throw new Error(`UnaryOp ${_} not impl`);t.w`$RB.uop("${r}", ${n})`}const uops={Invert:"invert",USub:"neg",UAdd:"pos"};function Constant(e,t){const n=typeof e.value;if("object"===n){const n=e.value.__class__.__qualname__,_=e.value.value;if("float"===n)return t.w`${_}`;if("int"===n)return t.w`${_}n`;if("NoneType"===n)return t.w`null`}if("string"===n)return t.w`"${e.value}"`;if("number"===n)return t.w`${e.value}n`;if("boolean"===n)return t.w`${e.value}`;throw console.warn(e,n),new Error(`Unknown Cste ${n}`)}function Expr(e,t){t.w_node(e.value)}function Name(e,t){"__debug__"!==e.id?t.w_str(e.id):t.w`${t.mode===MODE.DEBUG}`}function JoinedStr(e,t){t.w_str("`");for(let n=0;n<e.values.length;++n){const _=e.values[n];if("Constant"===(0,ast.Vq)(_)){t.w_str(_.value);continue}const r=_;void 0!==r.format_spec?t.w`\${format(${_.value}, ${r.format_spec.values[0]})}`:t.w`\${${_.value}}`}t.w_str("`")}function If(e,t){t.w`if( ${t.hm.bool(e.test)} ){${e.body}}`;for(let n=0;n<e.orelse.length;++n){const _=e.orelse[n];"If"===(0,ast.Vq)(_)?t.w`else ${_}`:t.w`else{${_}}`}}function While(e,t){t.w`while( ${t.hm.bool(e.test)} ){${e.body}}`}function For(e,t){t.w`for(var ${e.target} of ${e.iter}){${e.body}}`}function Try(e,t){if(t.w`try{${e.body}}`,e.handlers.length>0){t.w`catch(_e_){${t.hm.BB()}`;for(let n=0;n<e.handlers.length;++n){const _=e.handlers[n];0!==n&&t.w`else `,void 0!==_.type&&t.w`if( isinstance(_e_, ${_.type}) )`,t.w`{`,void 0!==_.name&&t.w`${t.hm.BB()}var ${_.name} = _e_;${t.hm.BE()}`,t.w_body(_.body),t.w`}`}t.w`${t.hm.BE()}}`}e.finalbody.length>0&&t.w`finally{${e.finalbody}}`}function Match(e,t){t.w`{${t.hm.BB()}`,t.w`const _s_ = ${e.subject};${t.hm.NL()}`;for(let n=0;n<e.cases.length-1;++n){0!==n&&t.w`else `;const _=e.cases[n];t.w`if( isinstance(_s_, ${_.pattern.cls.id}) ){${_.body}}`}t.w`else {${e.cases[e.cases.length-1].body}}`,t.w`${t.hm.BE()}}`}function Continue(e,t){t.w_str("continue;")}function Break(e,t){t.w_str("break;")}function Raise(e,t){t.w`throw ${e.exc};`}function ImportFrom(e,t){const n=e.module;if("RBM"===n)return;if("types"===n||"typing"===n)return;if("functools"===n)return void console.warn("Import not implemented yet");t.w`const {`;for(let n=0;n<e.names.length;++n){const _=e.names[n];let r="";void 0!==_.asname&&(r=`: ${_.asname}`),t.w`${_.name}${r},`}const _=t.isTopLevel()&&!t.sync?"await $RB.getModule":"$RB.getModuleSync";t.w`} = ${_}("${n}")`}function Import(e,t){for(let n=0;n<e.names.length;++n){const _=e.names[n],r=_.name;if("RBM"===r)continue;let o=_.asname;void 0===o&&(o=r);const s=t.isTopLevel()&&!t.sync?"await $RB.getModule":"$RB.getModuleSync";t.w`const ${o} = ${s}("${r}")`}}function BoolOp(e,t){const n=(0,ast.wB)(e.op),_=e.values[0],r=e.values[1],o=t.hm.bool(t.hm.saveTmp(_)),s=t.hm.tmp(_),i=t.hm.withTmp(_);if("And"===n)return t.w`${i}(${o} ? ${r} : ${s} )`;if("Or"===n)return t.w`${i}(${o} ? ${s} : ${r} )`;throw new Error(`Unknown boolean operator ${n}`)}function globalExport(e,t){return`  globalThis.${e} = {${t.join(", ")}};\n`}function returnExport(e,t){return`  return {${t.join(", ")}};\n`}function moduleExport(e,t){return`  export {${t.join(", ")}};\n`}function brythonExport(e,t){return`  $B.imported["${e}"] = $B.jsobj2pyobj({${t.join(",")}});\n`}emitter_handlers.ClassDef=ClassDef,emitter_handlers.FunctionDef=FunctionDef,emitter_handlers.AsyncFunctionDef=__webpack_require__(3896).A,emitter_handlers.Await=__webpack_require__(6263).A,emitter_handlers.Yield=__webpack_require__(9282).A,emitter_handlers.YieldFrom=__webpack_require__(7378).A,emitter_handlers.Delete=__webpack_require__(5952).A,emitter_handlers.IfExp=__webpack_require__(1701).A,emitter_handlers.With=__webpack_require__(4567).A,emitter_handlers.NamedExpr=__webpack_require__(2458).A,emitter_handlers.Tuple=__webpack_require__(1101).A,emitter_handlers.List=__webpack_require__(5211).A,emitter_handlers.Dict=__webpack_require__(5315).A,emitter_handlers.GeneratorExp=__webpack_require__(2683).A,emitter_handlers.ListComp=__webpack_require__(7734).A,emitter_handlers.DictComp=__webpack_require__(1534).A,emitter_handlers.Lambda=Lambda,emitter_handlers.arguments=Arguments,emitter_handlers.Global=Global,emitter_handlers.Nonlocal=Nonlocal,emitter_handlers.Subscript=Subscript,emitter_handlers.Assert=Assert,emitter_handlers.Pass=Pass,emitter_handlers.Return=Return,emitter_handlers.Assign=Assign,emitter_handlers.Attribute=Attribute,emitter_handlers.AugAssign=AugAssign,emitter_handlers.BinOp=BinOp,emitter_handlers.Call=Call.A,emitter_handlers.Compare=Compare,emitter_handlers.UnaryOp=UnaryOp,emitter_handlers.Constant=Constant,emitter_handlers.Expr=Expr,emitter_handlers.Name=Name,emitter_handlers.JoinedStr=JoinedStr,emitter_handlers.If=If,emitter_handlers.While=While,emitter_handlers.For=For,emitter_handlers.Try=Try,emitter_handlers.Match=Match,emitter_handlers.Continue=Continue,emitter_handlers.Break=Break,emitter_handlers.Raise=Raise,emitter_handlers.ImportFrom=ImportFrom,emitter_handlers.Import=Import,emitter_handlers.BoolOp=BoolOp;const raw={defaults:{},transform:e=>e},handlers_handlers={FunctionDef:__webpack_require__(6057).A,Constant:__webpack_require__(2770).A,UnaryOp:__webpack_require__(8189).A,Compare:__webpack_require__(9704).A},checker_handlers=handlers_handlers;function walk(e){const t=new Array;for(let n=0;n<e.ast.body.length;++n)t.push({symtab:e.symtable,node:e.ast.body[n]});const n=new Array;let _,r;for(;_=t.pop();){n.push(_);for(let e of(0,ast.i0)(_.node))t.push({node:e,symtab:_.symtab});if(_.node.body){let e=_.symtab;const n=(0,ast.Vq)(_.node);"FunctionDef"!==n&&"ClassDef"!==n||(e=e.children.find((e=>e.name===_.node.name)));for(let n=0;n<_.node.body.length;++n)t.push({node:_.node.body[n],symtab:e})}}for(;r=n.pop();){const e=checker_handlers[(0,ast.Vq)(r.node)];void 0!==e&&e(r)}}const hmacros={NL:__webpack_require__(4868).A,BB:__webpack_require__(1406).A,BE:__webpack_require__(137).A,bool:__webpack_require__(6894).A,tmp:__webpack_require__(723).A,getTmp:__webpack_require__(3629).A,saveTmp:__webpack_require__(4786).A,withTmp:__webpack_require__(3183).A},list=hmacros,SafeOpti=[__webpack_require__(9050).A],safe_handlers=SafeOpti,hmacros_SafeOpti=[__webpack_require__(1328).A,__webpack_require__(9237).A,__webpack_require__(1727).A,__webpack_require__(6724).A,__webpack_require__(9469).A],safe_hmacros=hmacros_SafeOpti;function patchHandlers(e,t){const n={...e};for(let _=0;_<t.length;++_){const r=t[_].name,o=e[r];n[r]=(e,n)=>{t[_](e,n,o)}}return n}function patchHMacros(e,t){const n={...e};for(let _=0;_<t.length;++_){const r=t[_].name,o=e[r];n[r]=(...e)=>t[_](o,...e)}return n}const safeHandlers=patchHandlers(emitter_handlers,safe_handlers),safeHmacros=patchHMacros(list,safe_hmacros),Optimizers={disabled:{handlers:emitter_handlers,hmacros:list,require_typechecker:!1},safe:{handlers:safeHandlers,hmacros:safeHmacros,require_typechecker:!0},unsafe:{handlers:safeHandlers,hmacros:safeHmacros,require_typechecker:!0}},optimizers=Optimizers;var MODE,EXPORT;!function(e){e[e.DEBUG=0]="DEBUG",e[e.TEST=1]="TEST",e[e.PROD=2]="PROD"}(MODE||(MODE={})),function(e){e[e.NONE=0]="NONE",e[e.GLOBAL=1]="GLOBAL",e[e.MODULE=2]="MODULE",e[e.RETURN=4]="RETURN",e[e.BRYTHON=8]="BRYTHON"}(EXPORT||(EXPORT={}));const EmitterDefaults={mode:0,target:raw,opti:optimizers.safe,exports:0,sync:!1};class Emitter{}class RBrythonEmitter extends Emitter{macros={};registerMacros(e){for(let t in e)this.macros[t]=e[t]}registerMacro(e,t){this.macros[e]=t}emit(e,t={}){const n="_",_=Object.assign({},EmitterDefaults,t.target?.defaults,t);_.opti.require_typechecker&&walk(e);const r=new EmitContext(_,this.macros,e.symtable),o=this.extractExportedSymbols(e);r.w_body(e.ast.body);let s=r.jscode;return 1&_.exports&&(s+=globalExport(n,o)),2&_.exports&&(s+=moduleExport(n,o)),4&_.exports&&(s+=returnExport(n,o)),8&_.exports&&(s+=brythonExport(n,o)),_.target.transform(s,_.sync)}extractExportedSymbols(e){const t=e.symtable.symbols.$strings;return Object.keys(t).filter((e=>4098===t[e]))}}const targets_function={defaults:{exports:EXPORT.RETURN},transform:(e,t)=>`(${t?"":"async "}function($RB){"use strict";${e}})`};class BaseEngine extends Engine{parser;emitter;runner;constructor(e,t,n){super(),this.parser=e,this.emitter=t,this.runner=n}async run(e,t){return await this.runner.run(this.emit(this.parse(e),{...t,target:targets_function}))}runSync(e,t){return this.runner.runSync(this.emit(this.parse(e),{...t,sync:!0,target:targets_function}))}async registerModule(e,t){"string"==typeof t&&(t=await this.run(t)),this.runner.registerModule(e,t)}registerModuleSync(e,t){"string"==typeof t&&(t=this.runSync(t)),this.runner.registerModule(e,t)}getModule(e){return this.runner.getModule(e)}registerBuiltins(e){"string"==typeof e&&(e=this.runSync(e)),this.runner.registerBuiltins(e)}registerBuiltin(e,t){this.runner.registerBuiltin(e,t)}registerMacros(e){this.emitter.registerMacros(e)}registerMacro(e,t){this.emitter.registerMacro(e,t)}parse(e){return this.parser(e,"_")}emit(e,t){return this.emitter.emit(e,t)}loadAsFunction(e){return this.runner.loadAsFunction(e)}runFunction(e){return this.runner.runFunction(e)}loadAsSyncFunction(e){return this.runner.loadAsSyncFunction(e)}runSyncFunction(e){return this.runner.runSyncFunction(e)}}function parse(e,t){const n=new $B.Parser(e,t,"file"),_=$B._PyPegen.run_parser(n),r=$B.future_features(_,t);return{filename:t,pycode:e,ast:_,symtable:$B._PySymtable_Build(_,t,r)}}const builtins={object:__webpack_require__(1846).A,type:__webpack_require__(5351).A,int:__webpack_require__(6528).A,bool:__webpack_require__(4623).A,float:__webpack_require__(1777).A,str:__webpack_require__(382).A,tuple:__webpack_require__(1269).A,list:__webpack_require__(3559).A,dict:__webpack_require__(6479).A,format:__webpack_require__(2537).A,repr:__webpack_require__(7061).A,print:__webpack_require__(4103).A,abs:__webpack_require__(5136).A,len:__webpack_require__(2445).A,range:__webpack_require__(1069).A,next:__webpack_require__(5091).A,Exception:__webpack_require__(1445).A,isinstance:__webpack_require__(2361).A};function RBrythonEngineFactory(){const e=new RBrythonEmitter,t=new RBrythonGlobalRunner.A,n=new BaseEngine(parse,e,t);n.registerMacros({__JS_OP__:__webpack_require__(238).A,__JS_AWAIT__:__webpack_require__(7745).A,__JS_RUN__:__webpack_require__(1264).A,__JS_WRITE__:__webpack_require__(3838).A,__JS_LOG__:__webpack_require__(2977).A,__JS_AS_STRING__:__webpack_require__(7795).A,__JS_AS_NUMBER__:__webpack_require__(8771).A,__JS_AS_BIGINT__:__webpack_require__(3929).A,__JS_SHADOW__:__webpack_require__(8039).A}),n.registerModule("JS",globalThis);for(let e of Object.values(builtins))n.registerBuiltins(e);return n}const RBrython_dev=RBrythonEngineFactory();var __webpack_exports__default=__webpack_exports__.A;export{__webpack_exports__default as default};
//# sourceMappingURL=index.js.map