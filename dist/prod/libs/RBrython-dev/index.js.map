{"version":3,"file":"libs/RBrython-dev/index.js","mappings":"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","sources":["webpack://sbrython/./src/rbry/corelib/bool.py","webpack://sbrython/./src/rbry/corelib/float.py","webpack://sbrython/./src/rbry/corelib/int.py","webpack://sbrython/./src/rbry/corelib/str.py","webpack://sbrython/webpack/bootstrap","webpack://sbrython/webpack/runtime/define property getters","webpack://sbrython/webpack/runtime/hasOwnProperty shorthand","webpack://sbrython/./src/rbry/parser/index.ts","webpack://sbrython/./src/rbry/engines/interface.ts","webpack://sbrython/./src/rbry/engines/Brython/index.ts","webpack://sbrython/./src/rbry/runlib/tmp_corelib/type.ts","webpack://sbrython/./src/rbry/runlib/helpers/getClass.ts","webpack://sbrython/./src/rbry/runlib/tmp_corelib/NotImplemented.ts","webpack://sbrython/./src/rbry/runlib/interface/op.ts","webpack://sbrython/./src/rbry/runlib/interface/KW.ts","webpack://sbrython/./src/rbry/runlib/index.ts","webpack://sbrython/./src/rbry/runlib/interface/uop.ts","webpack://sbrython/./src/rbry/runlib/interface/call.ts","webpack://sbrython/./src/rbry/runlib/helpers/isClass.ts","webpack://sbrython/./src/rbry/runlib/interface/mcall.ts","webpack://sbrython/./src/rbry/runlib/interface/assert.ts","webpack://sbrython/./src/rbry/runlib/interface/attr.ts","webpack://sbrython/./src/rbry/runlib/interface/getModule.ts","webpack://sbrython/./src/rbry/emitter/handlers/index.ts","webpack://sbrython/./src/rbry/ast/index.ts","webpack://sbrython/./src/rbry/emitter/node2js.ts","webpack://sbrython/./src/rbry/emitter/handlers/Body.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/ClassDef.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/BinOp.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Call.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Compare.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/UnaryOp.ts","webpack://sbrython/./src/rbry/emitter/handlers/list.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/FunctionDef.ts","webpack://sbrython/./src/rbry/emitter/handlers/definitions/Lambda.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Assert.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Pass.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Return.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Assign.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/Attribute.ts","webpack://sbrython/./src/rbry/emitter/handlers/operators/AugAssign.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Constant.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Expr.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/Name.ts","webpack://sbrython/./src/rbry/emitter/handlers/vars/JoinedStr.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/If.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/While.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/For.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/Try.ts","webpack://sbrython/./src/rbry/emitter/handlers/controlflows/Match.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Continue.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Break.ts","webpack://sbrython/./src/rbry/emitter/handlers/keywords/Raise.ts","webpack://sbrython/./src/rbry/emitter/handlers/imports/ImportFrom.ts","webpack://sbrython/./src/rbry/emitter/handlers/imports/Import.ts","webpack://sbrython/./src/rbry/engines/RBrython/macros.ts","webpack://sbrython/./src/rbry/engines/RBrython/builtins.ts","webpack://sbrython/./src/rbry/engines/RBrython/index.ts","webpack://sbrython/./src/rbry/emitter/index.ts","webpack://sbrython/./src/libs/RBrython-dev/index.ts","webpack://sbrython/./src/rbry/engines/index.ts"],"sourcesContent":["export default \"from RBM import __JS_OP__, boolean\\n\\nclass bool(boolean): # type: ignore (bool is Final)\\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)\";","export default \"from types import NotImplementedType\\nfrom RBM import __JS_OP__, __JS_AS_NUMBER__, number\\n\\nclass float(number):\\n    def __new__(cls, o: object, /) -> float:\\n        if type(o) is str:\\n            return __JS_AS_NUMBER__(o)\\n        return type(o).__float__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)    \\n\\n    def __add__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"+\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"+\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __radd__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"+\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"+\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __sub__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"-\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"-\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __rsub__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"-\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"-\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __mul__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"*\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"*\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __rmul__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"*\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"*\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __div__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(self, \\\"/\\\", o)\\n            case int  (): return __JS_OP__(self, \\\"/\\\", __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n\\n    def __rdiv__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case float(): return __JS_OP__(o                  , \\\"/\\\", self)\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o), \\\"/\\\", self)\\n            case _      : return NotImplemented\\n\\n    ### unary operators ###\\n\\n    def __neg__(self, /) -> float:\\n        return __JS_OP__(\\\"-\\\", self)\\n    \\n    def __int__(self, /) -> int:\\n        return __JS_RUN__('(x) => Math.trunc(x)', self) # type: ignore\\n    \\n    def __abs__(self, /) -> int:\\n         return __JS_RUN__('(x) => Math.abs(x)', self) # type: ignore\";","export default \"from types     import NotImplementedType\\n\\nfrom RBM import __JS_AS_NUMBER__, __JS_OP__, bigint\\n\\nclass int(bigint):\\n\\n    def __new__(cls, o: object, base: int, /) -> int:\\n        if type(o) == str:\\n            return __JS_RUN__( # type: ignore\\n                '''\\n                    (x, base) => {\\n                        if( base !== 16)\\n                            return BigInt(x);\\n                        \\n                        let result = 0n;\\n                        for(let i = 2; i < x.length; ++i)\\n                            result = result << 4n + BigInt( parseInt(this.slice(i, i+8), 16) );\\n                        return result;\\n                    }\\n                ''', o, base) # type: ignore\\n        return type(o).__int__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)\\n\\n\\n    def __add__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"+\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __radd__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"+\\\", self)\\n            case _      : return NotImplemented\\n    \\n\\n    def __sub__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"-\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rsub__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"-\\\", self)\\n            case _      : return NotImplemented\\n    \\n    def __mul__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"*\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rmul__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"*\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __pow__(self, o: object, mod: int|None = None, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"**\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rpow__(self, o: object, mod: int|None = None, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(o, \\\"**\\\", self)\\n            case _      : return NotImplemented\\n\\n    def __div__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(self),\\n                                           \\\"/\\\",\\n                                           __JS_AS_NUMBER__(o))\\n            case _      : return NotImplemented\\n    \\n    def __rdiv__(self, o: object, /) -> NotImplementedType|float:\\n        match o:\\n            case int  (): return __JS_OP__(__JS_AS_NUMBER__(o),\\n                                           \\\"*\\\",\\n                                           __JS_AS_NUMBER__(self) )\\n            case _      : return NotImplemented\\n\\n    def __mod__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"%\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rmod__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"%\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __or__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"|\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __ror__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"|\\\", o)\\n            case _      : return NotImplemented\\n\\n    def __and__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"&\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rand__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"&\\\", o)\\n            case _      : return NotImplemented\\n        \\n    def __xor__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"^\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rxor__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"^\\\", o)\\n            case _      : return NotImplemented\\n\\n    def __lshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"<<\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rlshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\"<<\\\", o)\\n            case _      : return NotImplemented\\n\\n    def __rshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\">>\\\", o)\\n            case _      : return NotImplemented\\n    \\n    def __rrshift__(self, o: object, /) -> NotImplementedType|int:\\n        match o:\\n            case int  (): return __JS_OP__(self, \\\">>\\\", o)\\n            case _      : return NotImplemented\\n    \\n    ### unary operators ###\\n    def __invert__(self, /) -> int:\\n        return __JS_OP__(\\\"~\\\", self)\\n\\n    def __neg__(self, /) -> int:\\n        return __JS_OP__(\\\"-\\\", self)\\n    \\n    def __abs__(self, /) -> int:\\n         return __JS_RUN__(\\\"x => x < 0n ? -x : x\\\", self) # type: ignore\";","export default \"from types     import NotImplementedType\\nfrom RBM import __JS_OP__, string\\n\\nclass str(string):\\n    def __new__(cls, o: object, /) -> str:\\n        return __JS_AS_STRING__(o) # type: ignore\\n        #return type(o).__str__(o) # type: ignore\\n    \\n    def __eq__(self, o: object, /) -> bool:\\n        return __JS_OP__(self, \\\"==\\\", o)\\n\\n    def __mul__(self, o: object, /) -> NotImplementedType|str:\\n        match o:\\n            case int  (): return __JS_WRITE__(\\\"self.repeat(Number(b))\\\") # type: ignore\\n            case _      : return NotImplemented\\n    \\n    def __rmul__(self, o: object, /) -> NotImplementedType|str:\\n        match o:\\n            case int  (): return __JS_WRITE__(\\\"self.repeat(Number(b))\\\") # type: ignore\\n            case _      : return NotImplemented\";","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { ParsedCode } from \"../ast/types\";\n\nexport default function parse(pycode: string, filename: string): ParsedCode {\n    \n    const parser = new $B.Parser(pycode, filename, 'file');\n\n    const ast   = $B._PyPegen.run_parser(parser);\n    const future = $B.future_features(ast, filename)\n    var symtable = $B._PySymtable_Build(ast, filename, future);\n\n    return {\n        filename,\n        pycode,\n        ast,\n        symtable,\n    }\n}","import { ParsedCode } from \"../ast/types\";\n\nexport default abstract class Engine {\n    abstract run(pycode: string): void;\n\n    // low level\n    abstract parse(pycode: string ): ParsedCode;\n    abstract emit (ast: ParsedCode): string;\n    abstract loadAsFunction(jscode: string): () => void;\n}","import { ParsedCode } from \"../../ast/types\";\nimport parse from \"../../parser\";\nimport Engine from \"../interface\";\n\nexport default class BrythonEngine extends Engine {\n\n    constructor() {\n        super();\n        this.initialize(); // by default initialize immediately.\n    }\n\n    run(pycode: string) {\n        this.loadAsFunction(this.emit(this.parse(pycode)))();\n    }\n    // builtins\n\n    // initialize\n    #initialized = false;\n    initialize() {\n        $B.imported[\"JS\"] = $B.jsobj2pyobj( globalThis );\n\n        this.#initialized = true;\n    }\n\n    // low level\n    parse(pycode: string): ParsedCode {\n        return parse(pycode, \"_\");\n    }\n    emit(ast: ParsedCode) {\n        let imported:any;\n        return $B.js_from_root({ast: ast.ast,\n                                symtable: ast.symtable,\n                                filename: ast.filename,\n                                src     : ast.pycode,\n                                imported}).js\n\n    }\n    loadAsFunction(jscode: string) {\n        $B.imported[\"_\"] = {};\n        return Function(\"'use strict';\" + jscode) as () => void;\n    }\n}","export class type {\n    //TODO...\n    __call__(...args: any[]) {\n\n        // @ts-ignore\n        const factory = this.prototype.__new__;\n        const self = factory !== undefined\n                        ? factory.call(this, ...args)\n                        // @ts-ignore\n                        : new this(...args);\n        // @ts-ignore\n        const init = this.prototype.__init__;\n        if( init !== undefined)\n            init.call(self, ...args);\n        \n        return self\n    }\n    __eq__(b: unknown) {\n        return this == b;\n    }\n}","import { type } from \"../tmp_corelib/type\";\n\nconst mapper = {\n    \"bigint\" : \"int\",\n    \"number\" : \"float\",\n    \"string\" : \"str\",\n    \"boolean\": \"bool\"\n}\n\nexport function getClass(o: unknown) {\n\n    const typename = typeof o;\n\n    if( typename === \"function\" ) {\n        //TODO: is class ? is something else ?\n        return type;\n    }\n\n    if( typename === \"object\" ) {\n        // @ts-ignore;\n        return o.constructor;\n    }\n\n    // @ts-ignore\n    const lit_class = globalThis[mapper[typename]];\n    if( lit_class !== undefined)\n        return lit_class;\n\n    throw new Error(`JS type ${typename} not implemented yet`);\n}","//TODO...\nexport const NotImplemented = Symbol();","import { getClass } from \"../helpers/getClass\";\nimport { NotImplemented } from \"../tmp_corelib/NotImplemented\";\n\nexport default function op(a: unknown, op: string, b: unknown) {\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n\n    if( fct === undefined ) {\n        if( op === \"ne\" )\n            return ! ka.prototype[\"__eq__\"].call(a, b);\n        if( op[0] === \"i\")\n            fct = ka.prototype[`__${op.slice(1)}__`];\n        if( fct === undefined)\n            fct = defaults[op as keyof typeof defaults];\n    }\n    \n    let result = fct.call(a, b);\n\n    if( result === NotImplemented) {\n\n        const kb = getClass(b);\n        if( kb === undefined ) {\n            console.warn(b, \"r\" + op);\n            throw new Error(\"?\");\n        }\n\n        let fct = kb.prototype[`__r${op}__`];\n        result = fct.call(b, a);\n    }\n\n    return result;\n}\n\n//TODO: move to corelib ?\nconst defaults = {\n    eq: function(b: unknown) { return this == b }\n}","export let KW: Record<string, any>|null = null;\n\nexport const IGNORE_ARG = Symbol();\n\nexport function setKW(args: Record<string, any>) {\n    KW = args;\n    return IGNORE_ARG;\n}\n\nexport function getKW() {\n    if( KW === null )\n        return {};\n    const args = KW;\n    KW = null;\n    return args;\n}","// interface\nimport op     from \"./interface/op\";\nimport uop    from \"./interface/uop\";\nimport call   from \"./interface/call\";\nimport mcall  from \"./interface/mcall\";\nimport assert from \"./interface/assert\";\nimport attr   from \"./interface/attr\";\nimport { getKW, setKW } from \"./interface/KW\";\n\n// @ts-ignore\nglobalThis.$RB = {\n    // interface\n    op,\n    uop,\n    call,\n    mcall,\n    assert,\n    attr,\n    getKW,\n    setKW,\n    getModule\n}\n\n//TODO: corelib\nimport {NotImplemented} from \"./tmp_corelib/NotImplemented\";\n\n// @ts-ignore\nglobalThis.abs = function( a: unknown) {\n    const ka = getClass(a);\n    return ka.prototype[`__abs__`].call(a);\n}\n\n// @ts-ignore\nglobalThis.type = function(a: unknown) {\n    return getClass(a); //TODO...\n}\n\n// @ts-ignore\nglobalThis.NotImplemented = NotImplemented;\n\n// @ts-ignore\nglobalThis.range = function*(a: number) {\n    for(let i = 0; i < a; ++i)\n        yield i;\n}\n\n// @ts-ignore\nglobalThis.Exception = function(msg: string) {\n    throw new Error(msg);\n}\n\n// =====================================================\n\n//TODO: as macro...\n\nimport { getClass } from \"./helpers/getClass\";\nimport getModule from \"./interface/getModule\";\n\n// @ts-ignore\nglobalThis.__JS_LOG__ = (...args) => console.log(...args);\n\nexport const IVALUE = Symbol();\n\n// @ts-ignore\nglobalThis.__JS_SET_IVALUE__ = (self, v) => self[IVALUE] = v;\n// @ts-ignore\nglobalThis.__JS_GET_IVALUE__ = (self) => self[IVALUE];\n\n// @ts-ignore\nglobalThis.__JS_AS_NUMBER__ = (o: unknown) => {\n    if( o === \"infinity\" || o === \"inf\")\n        return Number.POSITIVE_INFINITY\n    if( o === \"-infinity\" || o === \"-inf\")\n        return Number.NEGATIVE_INFINITY\n    return Number( o );\n}\n\n// @ts-ignore\nglobalThis.__JS_AS_STRING__ = (o: unknown) => `${o}`;\n\n","import { getClass } from \"../helpers/getClass\";\n\nexport default function uop(op:string, a: unknown) {\n\n    if( op === \"not\") {\n        // @ts-ignore\n        return ! a;\n    }\n\n    const ka = getClass(a);\n\n    if( ka === undefined ) {\n        console.warn(a, op);\n        throw new Error(\"?\")\n    }\n\n    let fct = ka.prototype[`__${op}__`];\n    return fct.call(a);\n}","import { getClass } from \"../helpers/getClass\";\nimport isClass from \"../helpers/isClass\";\nimport { IGNORE_ARG } from \"./KW\";\n\nexport default function call(a: (...args:unknown[]) => unknown, ...args: unknown[]) {\n\n    if( args[args.length-1] === IGNORE_ARG)\n        args = args.slice(0,-1);\n\n    // @ts-ignore\n    let fct = a.__call__\n\n    if( fct === undefined ) {\n        fct = a;\n\n        // h4cky\n        if( fct.prototype?.__new__ !== undefined ) {\n            const b = getClass(fct).prototype.__call__;\n            if( b !== undefined) {\n                return b.call(fct, ...args);\n            }\n        }\n\n        if( isClass(fct) ) // only for JS classes now...\n            return new fct(...args);\n    }\n\n    return fct(...args);\n}\n","export default function isClass(o: unknown) {\n    // from https://stackoverflow.com/questions/526559/testing-if-something-is-a-class-in-javascript\n    return Object.getOwnPropertyDescriptors(o)?.prototype?.writable === false;\n}\n// + https://github.com/brython-dev/brython/issues/2513","import { IGNORE_ARG } from \"./KW\";\n\nexport default function mcall(o: unknown, name: string, ...args: unknown[]) {\n    \n    if( args[args.length-1] === IGNORE_ARG)\n        args = args.slice(0,-1);\n    \n    // @ts-ignore\n    let fct = o[name];\n    if( fct === undefined)\n        // @ts-ignore\n        return o.prototype[name].call(...args);\n\n    // @ts-ignore\n    return o[name](...args);\n}","export default function assert(cond: boolean) {\n    if( ! cond )\n        throw new Error(`Assertion failed`);\n}","export default function attr(o: any, attr: string) {\n    if( ! (attr in o) )\n        return o.constructor[attr];\n    return o[attr];\n}","export default function getModule(name: string) {\n    if( name === \"JS\")\n        return globalThis; //TODO...\n\n    throw new Error(`module ${name} not found`);\n}","// list is filled in list.ts in order to prevent circular dependency.\n\nimport { ASTNode } from \"../../ast/types\";\n\nexport type Handler = (node: ASTNode) => string;\n\nconst Handlers: Record<string, Handler> = {};\n\nexport default Handlers;","import { ASTNode, OperatorNode } from \"./types\";\n\nexport function nodeType(node: ASTNode): string {\n    // @ts-ignore\n    return node.constructor.$name;\n}\n\nexport function getOp(op: OperatorNode): string {\n    // @ts-ignore\n    return op.constructor.$name\n}","import { nodeType } from \"../ast\";\nimport { ASTNode } from \"../ast/types\";\nimport Handlers from \"./handlers\";\n\nexport function node2js(node: ASTNode): string {\n\n    const handler = Handlers[nodeType(node) as keyof typeof Handlers];\n\n    if( handler === undefined) {\n        console.warn(node);\n        throw new Error(`Node type ${nodeType(node)} is unknown`);\n    }\n\n    return handler(node);\n}\n","import { BodyNode } from \"../../ast/types\";\nimport { node2js } from \"../node2js\";\n\nexport default function(body: BodyNode, _inClass = false) {\n\n    //@ts-ignore\n    const prev = globalThis.inClass;\n    //@ts-ignore\n    globalThis.inClass = _inClass; //TODO: h4ck\n\n    let res = \"\";\n    for(let i = 0; i < body.length; ++i)\n        res += node2js(body[i]) + \";\\n\";\n\n    //@ts-ignore\n    globalThis.inClass = prev;\n\n    return res;\n}","import { node2js } from \"../../node2js\";\nimport { nodeType } from \"../../../ast\";\nimport { ClassDefNode } from \"../../../ast/types\";\n\n// @ts-ignore\nglobalThis.inCstrFct = false;\n\nexport default function ClassDef(node: ClassDefNode) {\n    const name = node.name;\n    const body = node.body;\n\n    // dirty dirty h4ck... (we need a runner)\n    let str = `globalThis.${name} = (() =>{\n        function ${name}() {\n            return Object.create(${name}.prototype);\n        }\n        const classname = ${name};\n    `;\n\n    // @ts-ignore\n    const isH4ck = node.bases.length === 1 && [\"number\", \"bigint\", \"boolean\", \"string\"].includes(node.bases[0].id);\n\n    if( !isH4ck && node.bases.length >= 1) {\n        str += `${name}.prototype = Object.create(${node2js(node.bases[0])}.prototype);\\n`;\n    \n        for(let i = 1; i < node.bases.length; ++i) {\n\n            str += `Object.assign(${name}.prototype, ${node2js(node.bases[i])}.prototype);`;\n        }\n\n        str += `${name}.prototype.constructor = ${name};\\n`;\n    }\n\n    for(let i = 0; i < body.length; ++i) {\n        const type = nodeType(body[i]);\n        if( type === \"FunctionDef\") {\n            // @ts-ignore\n            globalThis.inCstrFct = true;\n            // @ts-ignore\n            let prefix = body[i].name === \"_\"\n                            ? \"\"\n                            // @ts-ignore\n                            : `${name}.prototype.${body[i].name} = `;\n            \n            str += `${prefix}${node2js(body[i])}\n            `;\n            // @ts-ignore\n            globalThis.inCstrFct = false;\n        }\n    }\n\n    str += `\n        return ${name};\n    })();\n    `;\n\n    return str;\n}","import { getOp } from \"../../../ast/\";\nimport { BinaryOpNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function(node: BinaryOpNode) {\n    const a = node.left;\n    const b = node.right;\n    const op = getOp(node.op) as keyof typeof binops;\n\n    const opname = binops[op];\n    if( opname === undefined) \n        throw new Error(`BinOp ${op} not impl`);\n\n    return `$RB.op(${node2js(a)}, \"${opname}\", ${node2js(b)})`;\n}\n\nexport const binops = {\n    Add : \"add\",\n    Sub : \"sub\",\n    Mult: \"mul\",\n    Div : \"div\",\n    Pow : \"pow\",\n    Mod : \"mod\",\n    // bits\n    BitOr: \"or\",\n    BitAnd: \"and\",\n    LShift: \"lshift\",\n    RShift: \"rshift\"\n}","import { node2js } from \"../../node2js\";\nimport { nodeType } from \"../../../ast\";\nimport { ASTNode, AttributeNode, CallNode } from \"../../../ast/types\";\n\nexport const macros: Record<string, (...args: ASTNode[]) => string> = {};\n\nexport default function Call(node: CallNode) {\n    const f        = node.func;\n    const args     = node.args;\n    const keywords = node.keywords;\n\n    // @ts-ignore\n    if( f.id in macros)\n        // @ts-ignore\n        return macros[f.id]( ...node.args );\n\n    //TODO: args parsing...\n    let str = \"\";\n    for(let i = 0; i < args.length; ++i)\n        str += node2js(args[i]) + \", \";\n\n    if( keywords.length ) {\n        str += \"$RB.setKW({\";\n            for( let i = 0; i < keywords.length; ++i)\n                // @ts-ignore\n                str += `${keywords[i].arg}: ${node2js(keywords[i].value)},`;\n        str += \"})\";\n    }    \n\n    if( nodeType(f) === \"Attribute\") {\n        const m = f as AttributeNode;\n        return `$RB.mcall(${node2js(m.value)}, \"${m.attr}\", ${str} )`;\n    }\n\n    return `$RB.call(${node2js(f)}, ${str})`;\n}","import { CompareNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { getOp } from \"../../../ast/\";\n\nexport default function Compare(node: CompareNode) {\n\n    const a = node.left;\n    const op = getOp(node.ops[0]) as keyof typeof cmpops | \"Is\";\n    const b  = node.comparators[0];\n\n    if( op === 'Is' ) return `${node2js(a)} === ${node2js(b)}`;\n    \n    const opname = cmpops[op];\n    if( opname === undefined) {\n        console.warn(op);\n        throw new Error(`CmpOp ${op} not impl`);\n    }\n\n    return `$RB.op(${node2js(a)}, \"${opname}\", ${node2js(b)})`;\n}\n\nconst cmpops = {\n    Eq   : \"eq\",\n    NotEq: \"ne\"\n}\n","import { UnaryOpNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { getOp } from \"../../../ast/\";\n\nexport default function(node: UnaryOpNode) {\n\n    const a = node.operand;\n    const op = getOp(node.op) as keyof typeof uops;\n\n    const opname = uops[op];\n    if( opname === undefined) \n        throw new Error(`UnaryOp ${op} not impl`);\n\n    return `$RB.uop(\"${opname}\", ${node2js(a)})`;\n}\n\nconst uops = {\n    Invert: \"invert\",\n    USub: \"neg\",\n    // pos\n\n    // special:\n    Not: \"not\", // use __len__ or __bool__\n}","import Handlers, { Handler } from \"./index\";\n\nimport {default as ClassDef} from \"./definitions/ClassDef\";\nHandlers[\"ClassDef\"] = ClassDef as Handler;\n\nimport {default as FunctionDef} from \"./definitions/FunctionDef\";\nHandlers[\"FunctionDef\"] = FunctionDef as Handler;\n\nimport {default as Lambda} from \"./definitions/Lambda\";\nHandlers[\"Lambda\"] = Lambda as Handler;\n\nimport {default as Assert} from \"./keywords/Assert\";\nHandlers[\"Assert\"] = Assert as Handler;\n\nimport {default as Pass} from \"./keywords/Pass\";\nHandlers[\"Pass\"] = Pass as Handler;\n\nimport {default as Return} from \"./keywords/Return\";\nHandlers[\"Return\"] = Return as Handler;\n\n\nimport {default as Assign} from \"./operators/Assign\";\nHandlers[\"Assign\"] = Assign as Handler;\n\nimport {default as Attribute} from \"./operators/Attribute\";\nHandlers[\"Attribute\"] = Attribute as Handler;\n\nimport {default as AugAssign} from \"./operators/AugAssign\";\nHandlers[\"AugAssign\"] = AugAssign as Handler;\n\nimport {default as BinOp} from \"./operators/BinOp\";\nHandlers[\"BinOp\"] = BinOp as Handler;\n\nimport {default as Call} from \"./operators/Call\";\nHandlers[\"Call\"] = Call as Handler;\n\nimport {default as Compare} from \"./operators/Compare\";\nHandlers[\"Compare\"] = Compare as Handler;\n\nimport {default as UnaryOp} from \"./operators/UnaryOp\";\nHandlers[\"UnaryOp\"] = UnaryOp as Handler;\n\nimport {default as Constant} from \"./vars/Constant\";\nHandlers[\"Constant\"] = Constant as Handler;\n\nimport {default as Expr} from \"./vars/Expr\";\nHandlers[\"Expr\"] = Expr as Handler;\n\nimport {default as Name} from \"./vars/Name\";\nHandlers[\"Name\"] = Name as Handler;\n\nimport {default as JoinedStr} from \"./vars/JoinedStr\";\nHandlers[\"JoinedStr\"] = JoinedStr as Handler;\n\nimport {default as If} from \"./controlflows/If\";\nHandlers[\"If\"] = If as Handler;\n\nimport {default as While} from \"./controlflows/While\";\nHandlers[\"While\"] = While as Handler;\n\nimport {default as For} from \"./controlflows/For\";\nHandlers[\"For\"] = For as Handler;\n\nimport {default as Try} from \"./controlflows/Try\";\nHandlers[\"Try\"] = Try as Handler;\n\nimport {default as Match} from \"./controlflows/Match\";\nHandlers[\"Match\"] = Match as Handler;\n\nimport {default as Continue} from \"./keywords/Continue\";\nHandlers[\"Continue\"] = Continue as Handler;\n\nimport {default as Break} from \"./keywords/Break\";\nHandlers[\"Break\"] = Break as Handler;\n\nimport {default as Raise} from \"./keywords/Raise\";\nHandlers[\"Raise\"] = Raise as Handler;\n\nimport {default as ImportFrom} from \"./imports/ImportFrom\";\nHandlers[\"ImportFrom\"] = ImportFrom as Handler;\n\nimport {default as Import} from \"./imports/Import\";\nHandlers[\"Import\"] = Import as Handler;","import Body from \"../Body\";\nimport { node2js } from \"../../node2js\";\nimport { nodeType } from \"../../../ast\";\nimport { FunctionDefNode } from \"../../../ast/types\";\n\nexport default function FunctionDef(node: FunctionDefNode) {\n    const name = node.name;\n    //const args = node.args;\n    const body = node.body;\n\n    // @ts-ignore\n    let prefix = globalThis.inClass ? \"\" : \"function \";\n\n    let args = \"\";\n\n    let i = 0;\n    let arg_offset = 0;\n    let self = \"\";\n    // @ts-ignore\n    if( globalThis.inClass || globalThis.inCstrFct ) {\n\n        let selfname = \"\";\n        if( node.args.posonlyargs.length)\n            // @ts-ignore\n            selfname = node.args.posonlyargs[0].arg;\n        else {\n            // @ts-ignore\n            selfname = node.args.args[0].arg\n            ++arg_offset;\n        }\n\n        // @ts-ignore'\n        self = `const ${selfname} = this;`;\n        ++i;\n    }\n\n    for( ; i < node.args.posonlyargs.length; ++i) {\n        //console.warn( node.args.posonlyargs[i] );\n        //TODO:\n        //args += node2js(node.args.posonlyargs[i]) + \", \";\n        // @ts-ignore\n        args += `${node.args.posonlyargs[i].arg}, `;\n    }\n    i = arg_offset;\n    for( ; i < node.args.args.length; ++i) {\n        //console.warn( node.args.posonlyargs[i] );\n        //TODO:\n        //args += node2js(node.args.posonlyargs[i]) + \", \";\n        // @ts-ignore\n        args += `_${node.args.args[i].arg}, `;\n    }\n    if( node.args.args.length ) {\n        // kw...\n        args += \"{\";\n        for( let i = arg_offset ; i < node.args.args.length; ++i) {\n            // @ts-ignore\n            args += `${node.args.args[i].arg} = _${node.args.args[i].arg}, `;\n        }\n        args += \"} = $RB.getKW()\";\n    }\n\n    // vararg\n    // kwonlyargs\n    // kwarg\n    //console.warn(node.args);\n\n\n    let fct_str = `${prefix}${name}(${args}) {\n        ${self}\n        ${Body(body)}\n    }`;\n\n    if( node.decorator_list.length === 0 )\n        return fct_str;\n\n    const dnode = node.decorator_list[0];\n\n    // @ts-ignore\n    if( globalThis.inClass ) {\n\n        return `static {\n            this.prototype.${name} = ${node2js(dnode)}(function ${fct_str});\n        }`;\n    }\n\n    return `${node2js(dnode)}(${fct_str})`;\n}","import { ASTNode } from \"@RBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Lambda(node: ASTNode): string {\n    let args = \"\";\n\n    // @ts-ignore\n    for(let i = 0; i < node.args.posonlyargs.length; ++i)\n        // @ts-ignore\n        args += node.args.posonlyargs[i].arg + \", \";\n\n    // @ts-ignore\n    return `(${args}) => { return ${node2js(node.body)}}`\n}","import { AssertNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Assert(node: AssertNode) {\n    return `$RB.assert(${node2js(node.test)})`;\n}","import { PassNode } from \"../../../ast/types\";\n\nexport default function Pass(node: PassNode) {\n    return \"\";\n}","import { ReturnNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Return(node: ReturnNode) {\n    return `return ${ node2js(node.value) }`;\n}","import { AssignNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Assign(node: AssignNode) {\n\n    let res = \"\";\n\n    //@ts-ignore\n    const prefix = globalThis.inClass ? \"static \" : \"var \";\n\n    for(let i = 1; i < node.targets.length; ++i)\n        res += `${prefix}${node2js(node.targets[i])};`;\n\n    res += prefix + node2js(node.targets[0]) + \" = \";\n    for(let i = 1; i < node.targets.length; ++i)\n        res += node2js(node.targets[i]) + \" = \";\n\n    return res + node2js(node.value);\n}","import { AttributeNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function (node: AttributeNode) {\n    return `$RB.attr(${node2js(node.value)}, \"${node.attr}\")`;\n}","import { AugAssignNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport { binops } from \"./BinOp\";\nimport { getOp } from \"../../../ast/\";\n\nexport default function AugAssign(node: AugAssignNode) {\n \n    const a  = node.target;\n    const op = getOp(node.op) as keyof typeof binops;\n    const b  = node.value;\n\n    const opname = binops[op];\n    if( opname === undefined) \n        throw new Error(`BinOp ${op} not impl`);\n\n    return `${node2js(a)} = $RB.op(${node2js(a)}, \"i${opname}\", ${node2js(b)})`;   \n}","import { ConstantNode } from \"../../../ast/types\";\n\nexport default function Constant(node: ConstantNode) {\n\n        const type = typeof node.value;\n\n        if( type === \"object\") {\n            // @ts-ignore\n            const qname = node.value.__class__.__qualname__\n            // @ts-ignore\n            const value: float|bigint = node.value.value;\n\n            if( qname === \"float\"   ) return `${value}`;\n            if( qname === \"int\"     ) return `${value}n`;\n            if( qname === \"NoneType\") return \"null\";\n            //if( qname === \"ellipsis\") return \"$RB.ellipsis\";\n        }\n        if( type === \"string\" ) return `\"${node.value}\"`;\n        if( type === \"number\" ) return `${node.value}n`; // bigint\n        if( type === \"boolean\") return `${node.value}`;\n\n        console.warn(node, type);\n        throw new Error(`Unknown Cste ${type}`);\n}","import { ExprNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Expr(node: ExprNode) {\n    return node2js(node.value);\n}","import { NameNode } from \"../../../ast/types\";\n\nexport default function Name(node: NameNode) {\n    return node.id;\n}","import { nodeType } from \"../../../ast/\";\nimport { node2js } from \"../../node2js\";\nimport { JoinedStrNode } from \"../../../ast/types\";\n\nexport default function JoinedStr(node: JoinedStrNode) {\n\n    console.warn(node);\n\n    let res = \"`\";\n    for(let i = 0; i < node.values.length; ++i) {\n        const value = node.values[i];\n        const type  = nodeType(value);\n\n        if( type === \"Constant\")\n            // @ts-ignore\n            res += value.value;\n        else {\n            // @ts-ignore\n            res += `\\${${node2js(value.value)}}`;\n        }\n    }\n    res += \"`\";\n    return res;\n}","import { IfNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\nimport { nodeType } from \"../../../ast/\";\n\nexport default function If(node: IfNode) {\n\n    let str = `if( ${node2js(node.test)} ) {\n        ${ Body(node.body) }\n    }`;\n\n    for(let i = 0; i < node.orelse.length; ++i) {\n        const snode = node.orelse[i];\n        const type = nodeType(snode);\n\n        if( type === \"If\")\n            str += \"else \" + node2js(snode);\n        else\n            str += `else { ${node2js(snode)} }`;\n    }\n\n    return str;\n}","import { WhileNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function While(node: WhileNode) {\n\n    return `while( ${node2js(node.test)} ) {\n        ${Body(node.body)}\n    }`;\n\n}","import { ForNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function For(node: ForNode) {\n    return `for(${node2js(node.target)} of ${node2js(node.iter)}){\n        ${Body(node.body)}\n    }`;\n}","import { TryNode } from \"../../../ast/types\";\nimport Body from \"../Body\";\n\nexport default function Try(node: TryNode) {\n    //TODO...\n    return `try {\n        ${Body(node.body)}\n    } catch {\n        ${  // @ts-ignore\n            Body(node.handlers[0].body)\n        }\n    }`;\n}","import { ASTNode } from \"@RBrython/rbry/ast/types\";\nimport { node2js } from \"../../node2js\";\nimport Body from \"../Body\";\n\nexport default function Match(node: ASTNode) {\n\n    let result = \"{\";\n\n    // @ts-ignore\n    result += `const tname = type(${node2js(node.subject)}).name;`\n\n    // @ts-ignore\n    for(let i = 0; i < node.cases.length -1; ++i) {\n        if( i !== 0)\n            result += \"else \";\n        // @ts-ignore\n        result += `if( tname === \"${node.cases[i].pattern.cls.id}\") {\n            ${  // @ts-ignore\n                Body(node.cases[i].body)}\n        }`;\n    }\n    result += `else {\n            ${  // @ts-ignore\n                Body(node.cases[node.cases.length-1].body)}\n    }`;\n\n    result += \"}\";\n    \n    return result;\n}","import { ASTNode } from \"../../../ast/types\";\n\nexport default function Continue(node: ASTNode) {\n    return \"continue;\"\n}","import { ASTNode } from \"../../../ast/types\";\n\nexport default function Break(node: ASTNode) {\n    return \"break;\"\n}","import { RaiseNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function Raise(node: RaiseNode) {\n    return `throw ${node2js(node.exc)};`;\n}","import { ASTNode } from \"../../../ast/types\";\nimport { node2js } from \"../../node2js\";\n\nexport default function ImportFrom(node: ASTNode) {\n\n    // @ts-ignore\n    const module = node.module;\n\n    if( module === \"RBM\" )\n        return \"\"; // Brython macros...\n\n    if( module === \"types\" || module === \"typing\")\n        return \"\"; // ignore for now\n    if( module === \"functools\") {\n        console.warn(\"Import not implemented yet\");\n        return \"\";\n    }\n    let res = \"const {\";\n\n    // @ts-ignore\n    for(let i = 0; i < node.names.length; ++i)\n        // @ts-ignore\n        res += `${node.names[i].name},`;\n\n    return res + `} = $RB.getModule(\"${module}\")`;\n}","import { ASTNode } from \"../../../ast/types\";\n\nexport default function Import(node: ASTNode) {\n\n    // @ts-ignore\n    const module = node.names[0].name;\n\n    if( module === \"RBM\" )\n        return \"\"; // Brython macros...\n\n    return `const ${module} = $RB.getModule(\"${module}\")`;\n}","import { ASTNode } from \"@RBrython/rbry/ast/types\";\nimport { macros } from \"../../emitter/handlers/operators/Call\";\nimport { node2js } from \"@RBrython/rbry/emitter/node2js\";\n\nmacros.__DISPATCH__ = (...args: ASTNode[]) => {\n\n    let result = `((fct) => {\n\n        const registered = {`;\n\n    // @ts-ignore\n    for(let i = 0; i < args[0].keys.length; ++i) {\n        // @ts-ignore\n        result += `${node2js(args[0].keys[i])}: ${node2js(args[0].values[i])},`;\n    }\n\n    result += `};\n    \n        function _(...args) {\n            let f = registered[type(args[0]).name];\n            if( f === undefined )\n                f = fct;\n            return f.call(null, this, ...args);\n        }\n\n        Object.defineProperty(_, \"name\", {value: fct.name});\n    \n        return _;\n    })`;\n\n    return result;\n}\n\nmacros.__JS_WRITE__ = (code: ASTNode) => {\n    // @ts-ignore\n    return code.value; //TODO: improve\n}\nmacros.__JS_OP__    = (...args: ASTNode[]) => {\n    \n    if(args.length === 2) // unary op\n        // @ts-ignore\n        return `${args[0].value}${node2js(args[1])}`;\n    \n    // binary op\n    // @ts-ignore\n    return `${node2js(args[0])} ${args[1].value} ${node2js(args[2])}`;\n}\n\nfunction unescape(str: string) {\n    str = str.replaceAll(\"\\\\n\\\\\", \"\\n\");\n    return str;\n}\n\nmacros.__JS_RUN__    = (...args: ASTNode[]) => {\n    // @ts-ignore\n    return `(${unescape(args[0].value)})(${args.slice(1).map(e=>node2js(e)).join(\",\")})`;\n}\n","export default {\n    int  : require(\"!!raw-loader!../../corelib/int.py\"  ).default,\n    float: require(\"!!raw-loader!../../corelib/float.py\").default,\n    bool : require(\"!!raw-loader!../../corelib/bool.py\" ).default,\n    str  : require(\"!!raw-loader!../../corelib/str.py\"  ).default\n}","import { ParsedCode } from \"../../ast/types\";\nimport emit from \"../../emitter\";\nimport parse from \"../../parser\";\nimport Engine from \"../interface\";\n\nimport \"./macros\";\nimport builtins from \"./builtins\";\n\n\nexport default class RBrythonEngine extends Engine {\n\n    constructor() {\n        super();\n        this.initialize(); // by default initialize immediately.\n    }\n\n    run(pycode: string) {\n        this.loadAsFunction(this.emit(this.parse(pycode)))();\n    }\n    // builtins\n\n    // initialize\n    #initialized = false;\n    initialize() {\n        for(let name in builtins)\n            this.run(builtins[name as keyof typeof builtins]);\n\n        this.#initialized = true;\n    }\n\n    // low level\n    parse(pycode: string): ParsedCode {\n        return parse(pycode, \"_\");\n    }\n    emit(ast: ParsedCode) {\n        return emit(ast);\n    }\n    loadAsFunction(jscode: string) {\n        return Function(\"'use strict';\" + jscode) as () => void;\n    }\n}","// quick h4ck (should move it).\nimport \"../runlib\";\n\nimport \"./handlers/list\"; // ensure Handlers are loaded.\n\nimport { ParsedCode } from \"../ast/types\";\nimport Body from \"./handlers/Body\";\n\nexport default function emit(ast: ParsedCode) {\n    return Body(ast.ast.body);\n}\n","import Engines from \"@RBrython/rbry/engines/\";\n\nexport default Engines","import  BrythonEngine from \"./Brython\";\nimport RBrythonEngine from \"./RBrython\";\n\nexport default class Engines {\n    static getBrythonEngine() {\n        return new BrythonEngine();\n    }\n    static getRBrythonEngine() {\n        return new RBrythonEngine();\n    }\n}"],"names":["__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","parse","pycode","filename","parser","$B","Parser","ast","_PyPegen","run_parser","future","future_features","symtable","_PySymtable_Build","Engine","BrythonEngine","constructor","super","this","initialize","run","loadAsFunction","emit","imported","jsobj2pyobj","globalThis","js_from_root","src","js","jscode","Function","type","__call__","args","factory","__new__","self","init","__init__","__eq__","b","mapper","getClass","typename","lit_class","Error","NotImplemented","Symbol","defaults","eq","KW","IGNORE_ARG","$RB","op","a","ka","console","warn","fct","slice","result","kb","uop","length","getOwnPropertyDescriptors","writable","mcall","name","assert","cond","attr","getKW","setKW","getModule","abs","range","i","Exception","msg","__JS_LOG__","log","IVALUE","__JS_SET_IVALUE__","v","__JS_GET_IVALUE__","__JS_AS_NUMBER__","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","__JS_AS_STRING__","nodeType","node","$name","getOp","node2js","handler","Handlers","body","_inClass","prev","inClass","res","inCstrFct","binops","Add","Sub","Mult","Div","Pow","Mod","BitOr","BitAnd","LShift","RShift","macros","cmpops","Eq","NotEq","uops","Invert","USub","Not","str","bases","includes","id","prefix","arg_offset","selfname","posonlyargs","arg","fct_str","Body","decorator_list","dnode","test","value","targets","target","opname","left","right","f","func","keywords","m","ops","comparators","operand","qname","__class__","__qualname__","values","orelse","snode","iter","handlers","subject","cases","pattern","cls","exc","names","__DISPATCH__","keys","__JS_WRITE__","code","__JS_OP__","__JS_RUN__","replaceAll","map","e","join","int","require","float","bool","RBrythonEngine","builtins","getBrythonEngine","getRBrythonEngine"],"sourceRoot":""}